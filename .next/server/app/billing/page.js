(()=>{var e={};e.id=522,e.ids=[522],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},15616:(e,t,s)=>{"use strict";s.d(t,{T:()=>n});var r=s(60687),a=s(43210),l=s(96241);let n=a.forwardRef(({className:e,...t},s)=>(0,r.jsx)("textarea",{className:(0,l.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:s,...t}));n.displayName="Textarea"},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},28561:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(62688).A)("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]])},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},48340:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(62688).A)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]])},58869:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(62688).A)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},63535:(e,t,s)=>{Promise.resolve().then(s.bind(s,68393))},68393:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"D:\\\\adminpanel12 (1)\\\\billing-app\\\\app\\\\billing\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"D:\\adminpanel12 (1)\\billing-app\\app\\billing\\page.tsx","default")},71783:(e,t,s)=>{Promise.resolve().then(s.bind(s,95808))},95808:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>eC});var r=s(60687),a=s(43210),l=s(16189),n=s(25995),i=s(49774),o=s(24934),c=s(68988),d=s(39390),m=s(55192),h=s(59821),u=s(15616),x=s(37826),p=s(63974),f=s(78377),v=s(14163),g=s(46059),j=s(11273),b=s(98599),y=s(13495),w=s(43),N=s(66156),C=s(67969),P=s(70569),S="ScrollArea",[A,E]=(0,j.A)(S),[T,k]=A(S),$=a.forwardRef((e,t)=>{let{__scopeScrollArea:s,type:l="hover",dir:n,scrollHideDelay:i=600,...o}=e,[c,d]=a.useState(null),[m,h]=a.useState(null),[u,x]=a.useState(null),[p,f]=a.useState(null),[g,j]=a.useState(null),[y,N]=a.useState(0),[C,P]=a.useState(0),[S,A]=a.useState(!1),[E,k]=a.useState(!1),$=(0,b.s)(t,e=>d(e)),R=(0,w.jH)(n);return(0,r.jsx)(T,{scope:s,type:l,dir:R,scrollHideDelay:i,scrollArea:c,viewport:m,onViewportChange:h,content:u,onContentChange:x,scrollbarX:p,onScrollbarXChange:f,scrollbarXEnabled:S,onScrollbarXEnabledChange:A,scrollbarY:g,onScrollbarYChange:j,scrollbarYEnabled:E,onScrollbarYEnabledChange:k,onCornerWidthChange:N,onCornerHeightChange:P,children:(0,r.jsx)(v.sG.div,{dir:R,...o,ref:$,style:{position:"relative","--radix-scroll-area-corner-width":y+"px","--radix-scroll-area-corner-height":C+"px",...e.style}})})});$.displayName=S;var R="ScrollAreaViewport",D=a.forwardRef((e,t)=>{let{__scopeScrollArea:s,children:l,nonce:n,...i}=e,o=k(R,s),c=a.useRef(null),d=(0,b.s)(t,c,o.onViewportChange);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),(0,r.jsx)(v.sG.div,{"data-radix-scroll-area-viewport":"",...i,ref:d,style:{overflowX:o.scrollbarXEnabled?"scroll":"hidden",overflowY:o.scrollbarYEnabled?"scroll":"hidden",...e.style},children:(0,r.jsx)("div",{ref:o.onContentChange,style:{minWidth:"100%",display:"table"},children:l})})]})});D.displayName=R;var I="ScrollAreaScrollbar",_=a.forwardRef((e,t)=>{let{forceMount:s,...l}=e,n=k(I,e.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:o}=n,c="horizontal"===e.orientation;return a.useEffect(()=>(c?i(!0):o(!0),()=>{c?i(!1):o(!1)}),[c,i,o]),"hover"===n.type?(0,r.jsx)(L,{...l,ref:t,forceMount:s}):"scroll"===n.type?(0,r.jsx)(F,{...l,ref:t,forceMount:s}):"auto"===n.type?(0,r.jsx)(z,{...l,ref:t,forceMount:s}):"always"===n.type?(0,r.jsx)(q,{...l,ref:t}):null});_.displayName=I;var L=a.forwardRef((e,t)=>{let{forceMount:s,...l}=e,n=k(I,e.__scopeScrollArea),[i,o]=a.useState(!1);return a.useEffect(()=>{let e=n.scrollArea,t=0;if(e){let s=()=>{window.clearTimeout(t),o(!0)},r=()=>{t=window.setTimeout(()=>o(!1),n.scrollHideDelay)};return e.addEventListener("pointerenter",s),e.addEventListener("pointerleave",r),()=>{window.clearTimeout(t),e.removeEventListener("pointerenter",s),e.removeEventListener("pointerleave",r)}}},[n.scrollArea,n.scrollHideDelay]),(0,r.jsx)(g.C,{present:s||i,children:(0,r.jsx)(z,{"data-state":i?"visible":"hidden",...l,ref:t})})}),F=a.forwardRef((e,t)=>{var s;let{forceMount:l,...n}=e,i=k(I,e.__scopeScrollArea),o="horizontal"===e.orientation,c=er(()=>m("SCROLL_END"),100),[d,m]=(s={hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}},a.useReducer((e,t)=>s[e][t]??e,"hidden"));return a.useEffect(()=>{if("idle"===d){let e=window.setTimeout(()=>m("HIDE"),i.scrollHideDelay);return()=>window.clearTimeout(e)}},[d,i.scrollHideDelay,m]),a.useEffect(()=>{let e=i.viewport,t=o?"scrollLeft":"scrollTop";if(e){let s=e[t],r=()=>{let r=e[t];s!==r&&(m("SCROLL"),c()),s=r};return e.addEventListener("scroll",r),()=>e.removeEventListener("scroll",r)}},[i.viewport,o,m,c]),(0,r.jsx)(g.C,{present:l||"hidden"!==d,children:(0,r.jsx)(q,{"data-state":"hidden"===d?"hidden":"visible",...n,ref:t,onPointerEnter:(0,P.m)(e.onPointerEnter,()=>m("POINTER_ENTER")),onPointerLeave:(0,P.m)(e.onPointerLeave,()=>m("POINTER_LEAVE"))})})}),z=a.forwardRef((e,t)=>{let s=k(I,e.__scopeScrollArea),{forceMount:l,...n}=e,[i,o]=a.useState(!1),c="horizontal"===e.orientation,d=er(()=>{if(s.viewport){let e=s.viewport.offsetWidth<s.viewport.scrollWidth,t=s.viewport.offsetHeight<s.viewport.scrollHeight;o(c?e:t)}},10);return ea(s.viewport,d),ea(s.content,d),(0,r.jsx)(g.C,{present:l||i,children:(0,r.jsx)(q,{"data-state":i?"visible":"hidden",...n,ref:t})})}),q=a.forwardRef((e,t)=>{let{orientation:s="vertical",...l}=e,n=k(I,e.__scopeScrollArea),i=a.useRef(null),o=a.useRef(0),[c,d]=a.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),m=K(c.viewport,c.content),h={...l,sizes:c,onSizesChange:d,hasThumb:!!(m>0&&m<1),onThumbChange:e=>i.current=e,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:e=>o.current=e};function u(e,t){return function(e,t,s,r="ltr"){let a=Q(s),l=t||a/2,n=s.scrollbar.paddingStart+l,i=s.scrollbar.size-s.scrollbar.paddingEnd-(a-l),o=s.content-s.viewport;return et([n,i],"ltr"===r?[0,o]:[-1*o,0])(e)}(e,o.current,c,t)}return"horizontal"===s?(0,r.jsx)(M,{...h,ref:t,onThumbPositionChange:()=>{if(n.viewport&&i.current){let e=ee(n.viewport.scrollLeft,c,n.dir);i.current.style.transform=`translate3d(${e}px, 0, 0)`}},onWheelScroll:e=>{n.viewport&&(n.viewport.scrollLeft=e)},onDragScroll:e=>{n.viewport&&(n.viewport.scrollLeft=u(e,n.dir))}}):"vertical"===s?(0,r.jsx)(O,{...h,ref:t,onThumbPositionChange:()=>{if(n.viewport&&i.current){let e=ee(n.viewport.scrollTop,c);i.current.style.transform=`translate3d(0, ${e}px, 0)`}},onWheelScroll:e=>{n.viewport&&(n.viewport.scrollTop=e)},onDragScroll:e=>{n.viewport&&(n.viewport.scrollTop=u(e))}}):null}),M=a.forwardRef((e,t)=>{let{sizes:s,onSizesChange:l,...n}=e,i=k(I,e.__scopeScrollArea),[o,c]=a.useState(),d=a.useRef(null),m=(0,b.s)(t,d,i.onScrollbarXChange);return a.useEffect(()=>{d.current&&c(getComputedStyle(d.current))},[d]),(0,r.jsx)(H,{"data-orientation":"horizontal",...n,ref:m,sizes:s,style:{bottom:0,left:"rtl"===i.dir?"var(--radix-scroll-area-corner-width)":0,right:"ltr"===i.dir?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Q(s)+"px",...e.style},onThumbPointerDown:t=>e.onThumbPointerDown(t.x),onDragScroll:t=>e.onDragScroll(t.x),onWheelScroll:(t,s)=>{if(i.viewport){let r=i.viewport.scrollLeft+t.deltaX;e.onWheelScroll(r),function(e,t){return e>0&&e<t}(r,s)&&t.preventDefault()}},onResize:()=>{d.current&&i.viewport&&o&&l({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:d.current.clientWidth,paddingStart:Z(o.paddingLeft),paddingEnd:Z(o.paddingRight)}})}})}),O=a.forwardRef((e,t)=>{let{sizes:s,onSizesChange:l,...n}=e,i=k(I,e.__scopeScrollArea),[o,c]=a.useState(),d=a.useRef(null),m=(0,b.s)(t,d,i.onScrollbarYChange);return a.useEffect(()=>{d.current&&c(getComputedStyle(d.current))},[d]),(0,r.jsx)(H,{"data-orientation":"vertical",...n,ref:m,sizes:s,style:{top:0,right:"ltr"===i.dir?0:void 0,left:"rtl"===i.dir?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Q(s)+"px",...e.style},onThumbPointerDown:t=>e.onThumbPointerDown(t.y),onDragScroll:t=>e.onDragScroll(t.y),onWheelScroll:(t,s)=>{if(i.viewport){let r=i.viewport.scrollTop+t.deltaY;e.onWheelScroll(r),function(e,t){return e>0&&e<t}(r,s)&&t.preventDefault()}},onResize:()=>{d.current&&i.viewport&&o&&l({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:d.current.clientHeight,paddingStart:Z(o.paddingTop),paddingEnd:Z(o.paddingBottom)}})}})}),[U,W]=A(I),H=a.forwardRef((e,t)=>{let{__scopeScrollArea:s,sizes:l,hasThumb:n,onThumbChange:i,onThumbPointerUp:o,onThumbPointerDown:c,onThumbPositionChange:d,onDragScroll:m,onWheelScroll:h,onResize:u,...x}=e,p=k(I,s),[f,g]=a.useState(null),j=(0,b.s)(t,e=>g(e)),w=a.useRef(null),N=a.useRef(""),C=p.viewport,S=l.content-l.viewport,A=(0,y.c)(h),E=(0,y.c)(d),T=er(u,10);function $(e){w.current&&m({x:e.clientX-w.current.left,y:e.clientY-w.current.top})}return a.useEffect(()=>{let e=e=>{let t=e.target;f?.contains(t)&&A(e,S)};return document.addEventListener("wheel",e,{passive:!1}),()=>document.removeEventListener("wheel",e,{passive:!1})},[C,f,S,A]),a.useEffect(E,[l,E]),ea(f,T),ea(p.content,T),(0,r.jsx)(U,{scope:s,scrollbar:f,hasThumb:n,onThumbChange:(0,y.c)(i),onThumbPointerUp:(0,y.c)(o),onThumbPositionChange:E,onThumbPointerDown:(0,y.c)(c),children:(0,r.jsx)(v.sG.div,{...x,ref:j,style:{position:"absolute",...x.style},onPointerDown:(0,P.m)(e.onPointerDown,e=>{0===e.button&&(e.target.setPointerCapture(e.pointerId),w.current=f.getBoundingClientRect(),N.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",p.viewport&&(p.viewport.style.scrollBehavior="auto"),$(e))}),onPointerMove:(0,P.m)(e.onPointerMove,$),onPointerUp:(0,P.m)(e.onPointerUp,e=>{let t=e.target;t.hasPointerCapture(e.pointerId)&&t.releasePointerCapture(e.pointerId),document.body.style.webkitUserSelect=N.current,p.viewport&&(p.viewport.style.scrollBehavior=""),w.current=null})})})}),B="ScrollAreaThumb",G=a.forwardRef((e,t)=>{let{forceMount:s,...a}=e,l=W(B,e.__scopeScrollArea);return(0,r.jsx)(g.C,{present:s||l.hasThumb,children:(0,r.jsx)(V,{ref:t,...a})})}),V=a.forwardRef((e,t)=>{let{__scopeScrollArea:s,style:l,...n}=e,i=k(B,s),o=W(B,s),{onThumbPositionChange:c}=o,d=(0,b.s)(t,e=>o.onThumbChange(e)),m=a.useRef(void 0),h=er(()=>{m.current&&(m.current(),m.current=void 0)},100);return a.useEffect(()=>{let e=i.viewport;if(e){let t=()=>{h(),m.current||(m.current=es(e,c),c())};return c(),e.addEventListener("scroll",t),()=>e.removeEventListener("scroll",t)}},[i.viewport,h,c]),(0,r.jsx)(v.sG.div,{"data-state":o.hasThumb?"visible":"hidden",...n,ref:d,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...l},onPointerDownCapture:(0,P.m)(e.onPointerDownCapture,e=>{let t=e.target.getBoundingClientRect(),s=e.clientX-t.left,r=e.clientY-t.top;o.onThumbPointerDown({x:s,y:r})}),onPointerUp:(0,P.m)(e.onPointerUp,o.onThumbPointerUp)})});G.displayName=B;var X="ScrollAreaCorner",Y=a.forwardRef((e,t)=>{let s=k(X,e.__scopeScrollArea),a=!!(s.scrollbarX&&s.scrollbarY);return"scroll"!==s.type&&a?(0,r.jsx)(J,{...e,ref:t}):null});Y.displayName=X;var J=a.forwardRef((e,t)=>{let{__scopeScrollArea:s,...l}=e,n=k(X,s),[i,o]=a.useState(0),[c,d]=a.useState(0),m=!!(i&&c);return ea(n.scrollbarX,()=>{let e=n.scrollbarX?.offsetHeight||0;n.onCornerHeightChange(e),d(e)}),ea(n.scrollbarY,()=>{let e=n.scrollbarY?.offsetWidth||0;n.onCornerWidthChange(e),o(e)}),m?(0,r.jsx)(v.sG.div,{...l,ref:t,style:{width:i,height:c,position:"absolute",right:"ltr"===n.dir?0:void 0,left:"rtl"===n.dir?0:void 0,bottom:0,...e.style}}):null});function Z(e){return e?parseInt(e,10):0}function K(e,t){let s=e/t;return isNaN(s)?0:s}function Q(e){let t=K(e.viewport,e.content),s=e.scrollbar.paddingStart+e.scrollbar.paddingEnd;return Math.max((e.scrollbar.size-s)*t,18)}function ee(e,t,s="ltr"){let r=Q(t),a=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,l=t.scrollbar.size-a,n=t.content-t.viewport,i=(0,C.q)(e,"ltr"===s?[0,n]:[-1*n,0]);return et([0,n],[0,l-r])(i)}function et(e,t){return s=>{if(e[0]===e[1]||t[0]===t[1])return t[0];let r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(s-e[0])}}var es=(e,t=()=>{})=>{let s={left:e.scrollLeft,top:e.scrollTop},r=0;return function a(){let l={left:e.scrollLeft,top:e.scrollTop},n=s.left!==l.left,i=s.top!==l.top;(n||i)&&t(),s=l,r=window.requestAnimationFrame(a)}(),()=>window.cancelAnimationFrame(r)};function er(e,t){let s=(0,y.c)(e),r=a.useRef(0);return a.useEffect(()=>()=>window.clearTimeout(r.current),[]),a.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(s,t)},[s,t])}function ea(e,t){let s=(0,y.c)(t);(0,N.N)(()=>{let t=0;if(e){let r=new ResizeObserver(()=>{cancelAnimationFrame(t),t=window.requestAnimationFrame(s)});return r.observe(e),()=>{window.cancelAnimationFrame(t),r.unobserve(e)}}},[e,s])}var el=s(96241);let en=a.forwardRef(({className:e,children:t,...s},a)=>(0,r.jsxs)($,{ref:a,className:(0,el.cn)("relative overflow-hidden",e),...s,children:[(0,r.jsx)(D,{className:"h-full w-full rounded-[inherit]",children:t}),(0,r.jsx)(ei,{}),(0,r.jsx)(Y,{})]}));en.displayName=$.displayName;let ei=a.forwardRef(({className:e,orientation:t="vertical",...s},a)=>(0,r.jsx)(_,{ref:a,orientation:t,className:(0,el.cn)("flex touch-none select-none transition-colors","vertical"===t&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===t&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...s,children:(0,r.jsx)(G,{className:"relative flex-1 rounded-full bg-border"})}));ei.displayName=_.displayName;var eo=s(10022),ec=s(11860),ed=s(96474),em=s(99270),eh=s(28561),eu=s(58869),ex=s(23576),ep=s(48340),ef=s(62688);let ev=(0,ef.A)("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);var eg=s(88233);let ej=(0,ef.A)("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]),eb=(0,ef.A)("Banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]),ey=(0,ef.A)("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);var ew=s(93613);let eN=e=>fetch(e).then(e=>e.json());function eC(){(0,l.useRouter)();let{data:e=[]}=(0,n.Ay)("/api/products",eN),[t,s]=(0,a.useState)(null),[v,g]=(0,a.useState)(""),[j,b]=(0,a.useState)([]),[y,w]=(0,a.useState)([]),[N,C]=(0,a.useState)(""),[P,S]=(0,a.useState)([]),[A,E]=(0,a.useState)(!1),[T,k]=(0,a.useState)(!1),[$,R]=(0,a.useState)(!1),[D,I]=(0,a.useState)(""),[_,L]=(0,a.useState)({gstin:"",taxPercentage:0,companyName:"",companyAddress:"",companyPhone:"",companyEmail:""}),[F,z]=(0,a.useState)([]),[q,M]=(0,a.useState)(null),[O,U]=(0,a.useState)({}),[W,H]=(0,a.useState)({}),[B,G]=(0,a.useState)("A4"),V=e=>{let t=y.find(t=>t.id===e);if(t?.hasUnsavedChanges){I(e),R(!0);return}if(1===y.length){X(e);return}let s=y.filter(t=>t.id!==e);if(w(s),N===e){let t=y.findIndex(t=>t.id===e);C((s[t]||s[t-1]||s[0]).id)}},X=e=>{w(y.map(t=>t.id===e?{...t,cart:[],customer:{},subtotal:0,discountPercentage:0,discountAmount:0,taxAmount:0,total:0,notes:"",hasUnsavedChanges:!1}:t))},Y=(e,t)=>{w(y.map(s=>s.id===e?{...s,...t,hasUnsavedChanges:!0}:s))},J=()=>y.find(e=>e.id===N),Z=e=>{let t;let s=J();if(!s)return;if(e.stock<=0){alert("Product is out of stock");return}let r=s.cart.find(t=>t.productId===e.id);if(r){if(r.quantity>=e.stock){alert(`Cannot add more. Maximum available: ${e.stock}`);return}t=s.cart.map(t=>t.productId===e.id?{...t,quantity:t.quantity+1,total:(t.quantity+1)*t.price}:t)}else t=[...s.cart,{productId:e.id,productName:e.name,quantity:1,price:e.price,total:e.price}];let a=t.reduce((e,t)=>e+t.total,0),l=a*s.discountPercentage/100,n=a-l,i=n*s.taxPercentage/100;Y(N,{cart:t,subtotal:a,discountAmount:l,taxAmount:i,total:n+i})},K=(t,s)=>{let r=J();if(!r)return;if(s<=0){Q(t);return}let a=e.find(e=>e.id===t);if(a&&s>a.stock){alert(`Cannot exceed available stock: ${a.stock}`);return}let l=r.cart.map(e=>e.productId===t?{...e,quantity:s,total:s*e.price}:e),n=l.reduce((e,t)=>e+t.total,0),i=n*r.discountPercentage/100,o=n-i,c=o*r.taxPercentage/100;Y(N,{cart:l,subtotal:n,discountAmount:i,taxAmount:c,total:o+c})},Q=e=>{let t=J();if(!t)return;let s=t.cart.filter(t=>t.productId!==e),r=s.reduce((e,t)=>e+t.total,0),a=r*t.discountPercentage/100,l=r-a,n=l*t.taxPercentage/100;Y(N,{cart:s,subtotal:r,discountAmount:a,taxAmount:n,total:l+n})},ee=e=>{let t=J();if(!t)return;let s=Math.max(0,Math.min(100,e)),r=t.subtotal*s/100,a=t.subtotal-r,l=a*t.taxPercentage/100;Y(N,{discountPercentage:s,discountAmount:r,taxAmount:l,total:a+l})},et=e=>{let t=J();if(!t||0===t.subtotal)return;let s=Math.max(0,t.subtotal+t.taxAmount-e),r=t.subtotal>0?s/t.subtotal*100:0;Y(N,{total:e,discountAmount:s,discountPercentage:r})},es=e=>{J()&&(Y(N,{customer:e}),k(!1))},er=async()=>{let s=J();if(!s||0===s.cart.length||!q)return;let r=W[q.id]||B,a=O[r]||O.A4,l={id:`INV-${Date.now()}`,storeId:q.id,storeName:q.name,storeAddress:q.address,storePhone:q.phone,customerName:s.customer.name||"",customerPhone:s.customer.phone||"",customerEmail:s.customer.email||"",customerAddress:s.customer.address||"",items:s.cart,subtotal:s.subtotal,taxPercentage:s.taxPercentage,taxAmount:s.taxAmount,discountPercentage:s.discountPercentage,discountAmount:s.discountAmount,total:s.total,paymentMethod:s.paymentMethod,timestamp:new Date().toISOString(),notes:s.notes,gstin:_.gstin,companyName:_.companyName,companyAddress:_.companyAddress,companyPhone:_.companyPhone,companyEmail:_.companyEmail,billFormat:r,createdBy:t?.name||"Unknown"};try{await fetch("/api/bills",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)})}catch(e){console.error("Failed to save bill:",e)}for(let t of s.cart){let s=e.find(e=>e.id===t.productId);if(s){let e=s.stock-t.quantity;try{await fetch(`/api/products/${t.productId}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({stock:e})})}catch(e){console.error(`Failed to update stock for product ${t.productId}:`,e)}}}ea(l,a),X(N),E(!1)},ea=(e,t)=>{let s=window.open("","_blank");if(!s)return;let r=216===t.width&&279===t.height,a=210===t.width&&297===t.height,l=t.width<=80?"80mm":r?"216mm":a?"210mm":`${t.width}mm`,n=`
    <!DOCTYPE html>
    <html>
      <head>
        <title>Invoice - ${e.id}</title>
        <style>
          @page {
            size: ${r?"letter":a?"A4":`${t.width}mm ${"auto"===t.height?"auto":`${t.height}mm`}`};
            margin: ${t.margins.top}mm ${t.margins.right}mm ${t.margins.bottom}mm ${t.margins.left}mm;
          }
          body {
            font-family: 'Arial', sans-serif;
            max-width: ${l};
            margin: 0 auto;
            font-size: 13px;
            color: #000;
          }
          .header, .footer {
            text-align: center;
            padding: 10px 0;
          }
          .company-name {
            font-size: 18px;
            font-weight: bold;
            text-transform: uppercase;
          }
          .invoice-title {
            font-size: 16px;
            font-weight: bold;
            margin-top: 10px;
          }
          .section {
            margin: 20px 0;
          }
          .section-title {
            font-weight: bold;
            border-bottom: 1px solid #ccc;
            margin-bottom: 5px;
          }
          .row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 6px;
          }
          .items-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
          }
          .items-table th, .items-table td {
            border: 1px solid #ccc;
            padding: 6px 8px;
            text-align: left;
          }
          .items-table th {
            background-color: #f2f2f2;
          }
          .totals {
            margin-top: 10px;
            width: 100%;
          }
          .totals td {
            padding: 6px;
          }
          .totals .label {
            text-align: right;
            font-weight: bold;
          }
          .totals .value {
            text-align: right;
            width: 100px;
          }
        </style>
      </head>
      <body>
        <div class="header">
          <div class="company-name">${e.companyName}</div>
          <div>${e.companyAddress}</div>
          <div>Phone: ${e.companyPhone}</div>
          <div>Email: ${e.companyEmail}</div>
          <div class="invoice-title">INVOICE</div>
        </div>

        <div class="section">
          <div class="row">
            <div><strong>Invoice ID:</strong> ${e.id}</div>
            <div><strong>Date:</strong> ${new Date(e.timestamp).toLocaleString()}</div>
          </div>
          ${e.gstin?`<div><strong>GSTIN:</strong> ${e.gstin}</div>`:""}
        </div>

        ${e.customerName||e.customerPhone?`
        <div class="section">
          <div class="section-title">Customer Details</div>
          ${e.customerName?`<div>Name: ${e.customerName}</div>`:""}
          ${e.customerPhone?`<div>Phone: ${e.customerPhone}</div>`:""}
          ${e.customerEmail?`<div>Email: ${e.customerEmail}</div>`:""}
          ${e.customerAddress?`<div>Address: ${e.customerAddress}</div>`:""}
        </div>`:""}

        <div class="section">
          <table class="items-table">
            <thead>
              <tr>
                <th>#</th>
                <th>Item</th>
                <th>Qty</th>
                <th>Rate</th>
                <th>Total</th>
              </tr>
            </thead>
            <tbody>
              ${e.items.map((e,t)=>`
                <tr>
                  <td>${t+1}</td>
                  <td>${e.productName}</td>
                  <td>${e.quantity}</td>
                  <td>₹${e.price.toFixed(2)}</td>
                  <td>₹${e.total.toFixed(2)}</td>
                </tr>
              `).join("")}
            </tbody>
          </table>
        </div>

        <div class="section">
          <table class="totals">
            <tr>
              <td class="label">Subtotal:</td>
              <td class="value">₹${e.subtotal.toFixed(2)}</td>
            </tr>
            ${e.discountAmount>0?`<tr>
                    <td class="label">Discount (${e.discountPercentage.toFixed(1)}%):</td>
                    <td class="value">-₹${e.discountAmount.toFixed(2)}</td>
                  </tr>`:""}
            <tr>
              <td class="label">Tax (${e.taxPercentage}%):</td>
              <td class="value">₹${e.taxAmount.toFixed(2)}</td>
            </tr>
            <tr>
              <td class="label">Total:</td>
              <td class="value"><strong>₹${e.total.toFixed(2)}</strong></td>
            </tr>
            <tr>
              <td class="label">Payment:</td>
              <td class="value">${e.paymentMethod.toUpperCase()}</td>
            </tr>
          </table>
        </div>

        ${e.notes?`<div class="section">
                <div class="section-title">Notes</div>
                <div>${e.notes}</div>
              </div>`:""}

        <div class="footer">
          <p>Thank you for your business!</p>
        </div>
      </body>
    </html>
  `;s.document.write(n),s.document.close(),s.print()},el=J();return(0,r.jsx)(i.A,{children:(0,r.jsxs)("div",{className:"h-full flex flex-col",children:[(0,r.jsxs)("div",{className:"flex items-center bg-gray-100 border-b border-gray-200 px-2 py-1",children:[(0,r.jsx)("div",{className:"flex items-center space-x-1 flex-1 overflow-x-auto",children:y.map(e=>(0,r.jsxs)("div",{className:`
                  relative flex items-center px-4 py-2 min-w-0 max-w-48 cursor-pointer group
                  ${N===e.id?"bg-white border-t-2 border-blue-500 text-blue-600":"bg-gray-200 hover:bg-gray-300 text-gray-700"}
                  rounded-t-lg border-l border-r border-gray-300 mr-1
                  transition-all duration-200
                `,style:{clipPath:N===e.id?"polygon(8px 100%, 0 0, calc(100% - 8px) 0, 100% 100%)":"polygon(4px 100%, 0 0, calc(100% - 4px) 0, 100% 100%)"},onClick:()=>C(e.id),children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2 flex-1 min-w-0",children:[(0,r.jsx)(eo.A,{className:"h-4 w-4 flex-shrink-0"}),(0,r.jsx)("span",{className:"truncate text-sm font-medium",children:e.name}),e.cart.length>0&&(0,r.jsx)(h.E,{variant:"secondary",className:"h-5 text-xs",children:e.cart.length}),e.hasUnsavedChanges&&(0,r.jsx)("div",{className:"h-2 w-2 bg-orange-500 rounded-full flex-shrink-0",title:"Unsaved changes"})]}),y.length>1&&(0,r.jsx)(o.$,{variant:"ghost",size:"sm",className:"h-5 w-5 p-0 ml-2 opacity-0 group-hover:opacity-100 hover:bg-red-100 hover:text-red-600 flex-shrink-0",onClick:t=>{t.stopPropagation(),V(e.id)},children:(0,r.jsx)(ec.A,{className:"h-3 w-3"})})]},e.id))}),(0,r.jsx)(o.$,{variant:"ghost",size:"sm",onClick:()=>{let e=y.length+1,t={id:`tab-${Date.now()}`,name:`Bill #${e}`,cart:[],customer:{},subtotal:0,discountPercentage:0,discountAmount:0,taxPercentage:_.taxPercentage,taxAmount:0,total:0,paymentMethod:"cash",notes:"",hasUnsavedChanges:!1};w([...y,t]),C(t.id)},className:"ml-2 h-8 w-8 p-0 bg-gray-200 hover:bg-gray-300 rounded-full",title:"New Tab",children:(0,r.jsx)(ed.A,{className:"h-4 w-4"})})]}),el&&(0,r.jsxs)("div",{className:"flex-1 flex overflow-hidden",children:[(0,r.jsxs)("div",{className:"w-1/2 border-r border-gray-200 flex flex-col",children:[(0,r.jsx)("div",{className:"p-4 border-b border-gray-200",children:(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(em.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,r.jsx)(c.p,{placeholder:"Search products by name, category, or barcode...",value:v,onChange:e=>g(e.target.value),className:"pl-10"})]})}),(0,r.jsx)(en,{className:"flex-1",children:(0,r.jsxs)("div",{className:"p-4 space-y-2",children:[j.map(e=>(0,r.jsx)(m.Zp,{className:"cursor-pointer hover:shadow-md transition-shadow",onClick:()=>Z(e),children:(0,r.jsx)(m.Wu,{className:"p-3",children:(0,r.jsxs)("div",{className:"flex justify-between items-start",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("h3",{className:"font-medium text-sm",children:e.name}),e.category&&(0,r.jsx)("p",{className:"text-xs text-gray-600 mt-1",children:e.category}),e.barcodes&&e.barcodes.length>0&&(0,r.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Barcode: ",e.barcodes[0]]})]}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsxs)("p",{className:"font-bold text-green-600",children:["₹",e.price.toFixed(2)]}),(0,r.jsxs)("p",{className:"text-xs text-gray-500",children:["Stock: ",e.stock]})]})]})})},e.id)),0===j.length&&(0,r.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,r.jsx)(em.A,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),(0,r.jsx)("p",{children:"No products found"}),(0,r.jsx)("p",{className:"text-sm",children:"Try adjusting your search terms"})]})]})})]}),(0,r.jsxs)("div",{className:"w-1/2 flex flex-col",children:[(0,r.jsxs)("div",{className:"p-4 border-b border-gray-200",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("h2",{className:"text-lg font-semibold flex items-center",children:[(0,r.jsx)(eh.A,{className:"h-5 w-5 mr-2"}),el.name]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsxs)(o.$,{variant:"outline",size:"sm",onClick:()=>k(!0),children:[(0,r.jsx)(eu.A,{className:"h-4 w-4 mr-1"}),"Customer"]}),el.cart.length>0&&(0,r.jsxs)(o.$,{size:"sm",onClick:()=>E(!0),children:[(0,r.jsx)(ex.A,{className:"h-4 w-4 mr-1"}),"Checkout"]})]})]}),(el.customer.name||el.customer.phone)&&(0,r.jsx)("div",{className:"mt-3 p-3 bg-blue-50 rounded-lg",children:(0,r.jsxs)("div",{className:"flex items-center space-x-2 text-sm",children:[(0,r.jsx)(eu.A,{className:"h-4 w-4 text-blue-600"}),(0,r.jsx)("span",{className:"font-medium",children:el.customer.name||"Customer"}),el.customer.phone&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(ep.A,{className:"h-3 w-3 text-gray-500"}),(0,r.jsx)("span",{className:"text-gray-600",children:el.customer.phone})]})]})})]}),(0,r.jsx)(en,{className:"flex-1",children:(0,r.jsx)("div",{className:"p-4",children:el.cart.length>0?(0,r.jsx)("div",{className:"space-y-3",children:el.cart.map(e=>(0,r.jsx)(m.Zp,{children:(0,r.jsxs)(m.Wu,{className:"p-3",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("h4",{className:"font-medium text-sm",children:e.productName}),(0,r.jsxs)("p",{className:"text-xs text-gray-600",children:["₹",e.price.toFixed(2)," each"]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(o.$,{variant:"outline",size:"sm",onClick:()=>K(e.productId,e.quantity-1),className:"h-8 w-8 p-0",children:(0,r.jsx)(ev,{className:"h-3 w-3"})}),(0,r.jsx)("span",{className:"w-8 text-center text-sm font-medium",children:e.quantity}),(0,r.jsx)(o.$,{variant:"outline",size:"sm",onClick:()=>K(e.productId,e.quantity+1),className:"h-8 w-8 p-0",children:(0,r.jsx)(ed.A,{className:"h-3 w-3"})}),(0,r.jsx)(o.$,{variant:"outline",size:"sm",onClick:()=>Q(e.productId),className:"h-8 w-8 p-0 text-red-600 hover:bg-red-50",children:(0,r.jsx)(eg.A,{className:"h-3 w-3"})})]})]}),(0,r.jsxs)("div",{className:"flex justify-between items-center mt-2",children:[(0,r.jsx)("span",{className:"text-sm text-gray-600",children:"Total:"}),(0,r.jsxs)("span",{className:"font-bold",children:["₹",e.total.toFixed(2)]})]})]})},e.productId))}):(0,r.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,r.jsx)(eh.A,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),(0,r.jsx)("p",{children:"Cart is empty"}),(0,r.jsx)("p",{className:"text-sm",children:"Add products from the left panel"})]})})}),el.cart.length>0?(0,r.jsx)("div",{className:"p-4 border-t border-gray-200 bg-gray-50",children:(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(d.J,{className:"text-sm",children:"Discount %:"}),(0,r.jsx)(c.p,{type:"number",value:el.discountPercentage,onChange:e=>ee(Number(e.target.value)),className:"w-20 h-8",min:"0",max:"100"}),(0,r.jsxs)("span",{className:"text-sm text-gray-600",children:["(-₹",el.discountAmount.toFixed(2),")"]})]}),(0,r.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{children:"Subtotal:"}),(0,r.jsxs)("span",{children:["₹",el.subtotal.toFixed(2)]})]}),el.discountAmount>0&&(0,r.jsxs)("div",{className:"flex justify-between text-red-600",children:[(0,r.jsx)("span",{children:"Discount:"}),(0,r.jsxs)("span",{children:["-₹",el.discountAmount.toFixed(2)]})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsxs)("span",{children:["Tax (",el.taxPercentage,"%):"]}),(0,r.jsxs)("span",{children:["₹",el.taxAmount.toFixed(2)]})]}),(0,r.jsx)(f.w,{}),(0,r.jsxs)("div",{className:"flex justify-between font-bold text-lg",children:[(0,r.jsx)("span",{children:"Total:"}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("span",{children:"₹"}),(0,r.jsx)(c.p,{type:"number",value:el.total.toFixed(2),onChange:e=>et(Number(e.target.value)),className:"w-24 h-8 text-right font-bold",step:"0.01"})]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(d.J,{className:"text-sm",children:"Notes:"}),(0,r.jsx)(u.T,{value:el.notes,onChange:e=>Y(N,{notes:e.target.value}),placeholder:"Add notes for this bill...",className:"mt-1 h-16 text-sm"})]})]})}):(0,r.jsxs)("div",{className:"p-4",children:[(0,r.jsx)("h3",{className:"font-semibold mb-2",children:"Recent Bills"}),(0,r.jsx)(en,{className:"h-64",children:(0,r.jsx)("div",{className:"space-y-2",children:P.slice(0,10).map(e=>(0,r.jsx)(m.Zp,{children:(0,r.jsxs)(m.Wu,{className:"p-3 text-sm",children:[(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"font-medium",children:e.id}),(0,r.jsxs)("span",{className:"font-bold",children:["₹",e.total.toFixed(2)]})]}),(0,r.jsx)("div",{className:"text-xs text-gray-600",children:new Date(e.timestamp).toLocaleString()})]})},e.id))})})]})]})]}),(0,r.jsx)(x.lG,{open:T,onOpenChange:k,children:(0,r.jsxs)(x.Cf,{className:"sm:max-w-md",children:[(0,r.jsxs)(x.c7,{children:[(0,r.jsxs)(x.L3,{className:"flex items-center",children:[(0,r.jsx)(eu.A,{className:"h-5 w-5 mr-2"}),"Customer Information"]}),(0,r.jsx)(x.rr,{children:"Add customer details for this bill"})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(d.J,{htmlFor:"customerName",children:"Name"}),(0,r.jsx)(c.p,{id:"customerName",defaultValue:el?.customer.name||"",placeholder:"Customer name"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(d.J,{htmlFor:"customerPhone",children:"Phone"}),(0,r.jsx)(c.p,{id:"customerPhone",defaultValue:el?.customer.phone||"",placeholder:"Phone number"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(d.J,{htmlFor:"customerEmail",children:"Email"}),(0,r.jsx)(c.p,{id:"customerEmail",defaultValue:el?.customer.email||"",placeholder:"Email address"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(d.J,{htmlFor:"customerAddress",children:"Address"}),(0,r.jsx)(u.T,{id:"customerAddress",defaultValue:el?.customer.address||"",placeholder:"Customer address",className:"h-20"})]})]}),(0,r.jsxs)(x.Es,{children:[(0,r.jsx)(o.$,{variant:"outline",onClick:()=>k(!1),children:"Cancel"}),(0,r.jsx)(o.$,{onClick:()=>{let e=document.getElementById("customerName")?.value,t=document.getElementById("customerPhone")?.value;es({name:e,phone:t,email:document.getElementById("customerEmail")?.value,address:document.getElementById("customerAddress")?.value})},children:"Save Customer"})]})]})}),(0,r.jsx)(x.lG,{open:A,onOpenChange:E,children:(0,r.jsxs)(x.Cf,{className:"sm:max-w-md",children:[(0,r.jsxs)(x.c7,{children:[(0,r.jsxs)(x.L3,{className:"flex items-center",children:[(0,r.jsx)(ej,{className:"h-5 w-5 mr-2"}),"Process Payment"]}),(0,r.jsx)(x.rr,{children:"Complete the transaction and select bill format"})]}),el&&(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(d.J,{className:"text-sm font-medium",children:"Bill Format"}),(0,r.jsxs)(p.l6,{value:B,onValueChange:G,children:[(0,r.jsx)(p.bq,{className:"mt-1",children:(0,r.jsx)(p.yv,{})}),(0,r.jsx)(p.gC,{children:Object.entries(O).map(([e,t])=>(0,r.jsxs)(p.eb,{value:e,children:[e.replace("_"," ")," (",t.width,"\xd7","auto"===t.height?"Auto":t.height,"mm)"]},e))})]})]}),(0,r.jsx)(m.Zp,{children:(0,r.jsx)(m.Wu,{className:"p-4",children:(0,r.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{children:"Items:"}),(0,r.jsxs)("span",{children:[el.cart.length," (",el.cart.reduce((e,t)=>e+t.quantity,0)," qty)"]})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{children:"Subtotal:"}),(0,r.jsxs)("span",{children:["₹",el.subtotal.toFixed(2)]})]}),el.discountAmount>0&&(0,r.jsxs)("div",{className:"flex justify-between text-red-600",children:[(0,r.jsxs)("span",{children:["Discount (",el.discountPercentage.toFixed(1),"%):"]}),(0,r.jsxs)("span",{children:["-₹",el.discountAmount.toFixed(2)]})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsxs)("span",{children:["Tax (",el.taxPercentage,"%):"]}),(0,r.jsxs)("span",{children:["₹",el.taxAmount.toFixed(2)]})]}),(0,r.jsx)(f.w,{}),(0,r.jsxs)("div",{className:"flex justify-between font-bold text-lg",children:[(0,r.jsx)("span",{children:"Total:"}),(0,r.jsxs)("span",{children:["₹",el.total.toFixed(2)]})]})]})})}),(0,r.jsxs)("div",{children:[(0,r.jsx)(d.J,{className:"text-sm font-medium",children:"Payment Method"}),(0,r.jsxs)(p.l6,{value:el.paymentMethod,onValueChange:e=>Y(N,{paymentMethod:e}),children:[(0,r.jsx)(p.bq,{className:"mt-1",children:(0,r.jsx)(p.yv,{})}),(0,r.jsxs)(p.gC,{children:[(0,r.jsx)(p.eb,{value:"cash",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(eb,{className:"h-4 w-4 mr-2"}),"Cash"]})}),(0,r.jsx)(p.eb,{value:"card",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(ej,{className:"h-4 w-4 mr-2"}),"Card"]})}),(0,r.jsx)(p.eb,{value:"upi",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(ey,{className:"h-4 w-4 mr-2"}),"UPI"]})})]})]})]}),q&&(0,r.jsx)(m.Zp,{children:(0,r.jsx)(m.Wu,{className:"p-3",children:(0,r.jsxs)("div",{className:"text-sm",children:[(0,r.jsxs)("div",{className:"font-medium",children:["Store: ",q.name]}),(0,r.jsx)("div",{className:"text-gray-600 mt-1",children:q.address}),q.phone&&(0,r.jsxs)("div",{className:"text-gray-600",children:["Phone: ",q.phone]}),(0,r.jsxs)("div",{className:"text-gray-600",children:["GSTIN: ",_.gstin]}),(0,r.jsxs)("div",{className:"text-gray-600",children:["Tax Rate: ",_.taxPercentage,"%"]})]})})}),(el.customer.name||el.customer.phone)&&(0,r.jsx)(m.Zp,{children:(0,r.jsx)(m.Wu,{className:"p-3",children:(0,r.jsxs)("div",{className:"text-sm",children:[(0,r.jsxs)("div",{className:"font-medium flex items-center",children:[(0,r.jsx)(eu.A,{className:"h-4 w-4 mr-2"}),"Customer Details"]}),(0,r.jsxs)("div",{className:"mt-2 space-y-1 text-gray-600",children:[el.customer.name&&(0,r.jsxs)("div",{children:["Name: ",el.customer.name]}),el.customer.phone&&(0,r.jsxs)("div",{children:["Phone: ",el.customer.phone]}),el.customer.email&&(0,r.jsxs)("div",{children:["Email: ",el.customer.email]})]})]})})})]}),(0,r.jsxs)(x.Es,{children:[(0,r.jsx)(o.$,{variant:"outline",onClick:()=>E(!1),children:"Cancel"}),(0,r.jsxs)(o.$,{onClick:er,className:"bg-green-600 hover:bg-green-700",children:[(0,r.jsx)(ex.A,{className:"h-4 w-4 mr-2"}),"Complete Payment"]})]})]})}),(0,r.jsx)(x.lG,{open:$,onOpenChange:R,children:(0,r.jsxs)(x.Cf,{className:"sm:max-w-md",children:[(0,r.jsxs)(x.c7,{children:[(0,r.jsxs)(x.L3,{className:"flex items-center",children:[(0,r.jsx)(ew.A,{className:"h-5 w-5 mr-2 text-orange-500"}),"Unsaved Changes"]}),(0,r.jsx)(x.rr,{children:"This tab has unsaved changes. Are you sure you want to close it?"})]}),(0,r.jsxs)(x.Es,{children:[(0,r.jsx)(o.$,{variant:"outline",onClick:()=>R(!1),children:"Cancel"}),(0,r.jsx)(o.$,{variant:"destructive",onClick:()=>{if(1===y.length)X(D);else{let e=y.filter(e=>e.id!==D);if(w(e),N===D){let t=y.findIndex(e=>e.id===D);C((e[t]||e[t-1]||e[0]).id)}}R(!1),I("")},children:"Close Tab"})]})]})})]})})}},99977:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>m,pages:()=>d,routeModule:()=>h,tree:()=>c});var r=s(65239),a=s(48088),l=s(88170),n=s.n(l),i=s(30893),o={};for(let e in i)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>i[e]);s.d(t,o);let c={children:["",{children:["billing",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,68393)),"D:\\adminpanel12 (1)\\billing-app\\app\\billing\\page.tsx"]}]},{loading:[()=>Promise.resolve().then(s.bind(s,85594)),"D:\\adminpanel12 (1)\\billing-app\\app\\billing\\loading.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,58014)),"D:\\adminpanel12 (1)\\billing-app\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,65284,23)),"next/dist/client/components/unauthorized-error"]}]}.children,d=["D:\\adminpanel12 (1)\\billing-app\\app\\billing\\page.tsx"],m={require:s,loadChunk:()=>Promise.resolve()},h=new r.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/billing/page",pathname:"/billing",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[447,357,677,782,990,111,250],()=>s(99977));module.exports=r})();