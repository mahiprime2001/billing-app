(()=>{var e={};e.id=242,e.ids=[242],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},12597:(e,s,r)=>{"use strict";r.d(s,{A:()=>a});let a=(0,r(62688).A)("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]])},13861:(e,s,r)=>{"use strict";r.d(s,{A:()=>a});let a=(0,r(62688).A)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},18417:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>a});let a=(0,r(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"D:\\\\adminpanel12 (1)\\\\billing-app\\\\app\\\\dashboard\\\\users\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"D:\\adminpanel12 (1)\\billing-app\\app\\dashboard\\users\\page.tsx","default")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},37850:(e,s,r)=>{Promise.resolve().then(r.bind(r,18417))},48730:(e,s,r)=>{"use strict";r.d(s,{A:()=>a});let a=(0,r(62688).A)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},58869:(e,s,r)=>{"use strict";r.d(s,{A:()=>a});let a=(0,r(62688).A)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},59410:(e,s,r)=>{"use strict";function a(){return null}r.r(s),r.d(s,{default:()=>a})},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},78018:(e,s,r)=>{Promise.resolve().then(r.bind(r,84375))},84375:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>K});var a=r(60687),t=r(43210),l=r(16189),i=r(78250),n=r(24934),d=r(68988),o=r(39390),c=r(55192),h=r(59821),u=r(37826),x=r(63974),m=r(15294),p=r(98599),j=r(11273),g=r(70569),v=r(65551),y=r(83721),f=r(18853),b=r(46059),N=r(14163),w="Checkbox",[k,C]=(0,j.A)(w),[A,S]=k(w);function _(e){let{__scopeCheckbox:s,checked:r,children:l,defaultChecked:i,disabled:n,form:d,name:o,onCheckedChange:c,required:h,value:u="on",internal_do_not_use_render:x}=e,[m,p]=(0,v.i)({prop:r,defaultProp:i??!1,onChange:c,caller:w}),[j,g]=t.useState(null),[y,f]=t.useState(null),b=t.useRef(!1),N=!j||!!d||!!j.closest("form"),k={checked:m,disabled:n,setChecked:p,control:j,setControl:g,name:o,form:d,value:u,hasConsumerStoppedPropagationRef:b,required:h,defaultChecked:!q(i)&&i,isFormControl:N,bubbleInput:y,setBubbleInput:f};return(0,a.jsx)(A,{scope:s,...k,children:"function"==typeof x?x(k):l})}var E="CheckboxTrigger",D=t.forwardRef(({__scopeCheckbox:e,onKeyDown:s,onClick:r,...l},i)=>{let{control:n,value:d,disabled:o,checked:c,required:h,setControl:u,setChecked:x,hasConsumerStoppedPropagationRef:m,isFormControl:j,bubbleInput:v}=S(E,e),y=(0,p.s)(i,u),f=t.useRef(c);return t.useEffect(()=>{let e=n?.form;if(e){let s=()=>x(f.current);return e.addEventListener("reset",s),()=>e.removeEventListener("reset",s)}},[n,x]),(0,a.jsx)(N.sG.button,{type:"button",role:"checkbox","aria-checked":q(c)?"mixed":c,"aria-required":h,"data-state":J(c),"data-disabled":o?"":void 0,disabled:o,value:d,...l,ref:y,onKeyDown:(0,g.m)(s,e=>{"Enter"===e.key&&e.preventDefault()}),onClick:(0,g.m)(r,e=>{x(e=>!!q(e)||!e),v&&j&&(m.current=e.isPropagationStopped(),m.current||e.stopPropagation())})})});D.displayName=E;var P=t.forwardRef((e,s)=>{let{__scopeCheckbox:r,name:t,checked:l,defaultChecked:i,required:n,disabled:d,value:o,onCheckedChange:c,form:h,...u}=e;return(0,a.jsx)(_,{__scopeCheckbox:r,checked:l,defaultChecked:i,disabled:d,required:n,onCheckedChange:c,name:t,form:h,value:o,internal_do_not_use_render:({isFormControl:e})=>(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(D,{...u,ref:s,__scopeCheckbox:r}),e&&(0,a.jsx)($,{__scopeCheckbox:r})]})})});P.displayName=w;var F="CheckboxIndicator",U=t.forwardRef((e,s)=>{let{__scopeCheckbox:r,forceMount:t,...l}=e,i=S(F,r);return(0,a.jsx)(b.C,{present:t||q(i.checked)||!0===i.checked,children:(0,a.jsx)(N.sG.span,{"data-state":J(i.checked),"data-disabled":i.disabled?"":void 0,...l,ref:s,style:{pointerEvents:"none",...e.style}})})});U.displayName=F;var M="CheckboxBubbleInput",$=t.forwardRef(({__scopeCheckbox:e,...s},r)=>{let{control:l,hasConsumerStoppedPropagationRef:i,checked:n,defaultChecked:d,required:o,disabled:c,name:h,value:u,form:x,bubbleInput:m,setBubbleInput:j}=S(M,e),g=(0,p.s)(r,j),v=(0,y.Z)(n),b=(0,f.X)(l);t.useEffect(()=>{if(!m)return;let e=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set,s=!i.current;if(v!==n&&e){let r=new Event("click",{bubbles:s});m.indeterminate=q(n),e.call(m,!q(n)&&n),m.dispatchEvent(r)}},[m,v,n,i]);let w=t.useRef(!q(n)&&n);return(0,a.jsx)(N.sG.input,{type:"checkbox","aria-hidden":!0,defaultChecked:d??w.current,required:o,disabled:c,name:h,value:u,form:x,...s,tabIndex:-1,ref:g,style:{...s.style,...b,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});function q(e){return"indeterminate"===e}function J(e){return q(e)?"indeterminate":e?"checked":"unchecked"}$.displayName=M;var R=r(13964),T=r(96241);let G=t.forwardRef(({className:e,...s},r)=>(0,a.jsx)(P,{ref:r,className:(0,T.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...s,children:(0,a.jsx)(U,{className:(0,T.cn)("flex items-center justify-center text-current"),children:(0,a.jsx)(R.A,{className:"h-4 w-4"})})}));G.displayName=P.displayName;var L=r(99891),O=r(58869),z=r(48730),I=r(96474),V=r(12597),Z=r(13861),B=r(41312),H=r(99270),W=r(63143),X=r(88233);function K(){(0,l.useRouter)();let[e,s]=(0,t.useState)([]),[r,p]=(0,t.useState)([]),[j,g]=(0,t.useState)(null),[v,y]=(0,t.useState)(""),[f,b]=(0,t.useState)("all"),[N,w]=(0,t.useState)("all"),[k,C]=(0,t.useState)(!1),[A,S]=(0,t.useState)(!1),[_,E]=(0,t.useState)(null),[D,P]=(0,t.useState)(!1),[F,U]=(0,t.useState)({name:"",email:"",password:"",role:"billing_user",assignedStores:[],sessionDuration:24,status:"active"}),M=async()=>{try{let e=await fetch("/api/users");if(e.ok){let r=await e.json();s(r)}else console.error("Failed to fetch users")}catch(e){console.error("Error fetching users:",e)}},$=()=>{U({name:"",email:"",password:"",role:"billing_user",assignedStores:[],sessionDuration:24,status:"active"})},q=()=>{let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%&*();'./,?<>",s="";for(let r=0;r<8;r++)s+=e.charAt(Math.floor(Math.random()*e.length));U({...F,password:s})},J=async()=>{if(!F.name||!F.email||!F.password){alert("Please fill in all required fields");return}if("billing_user"===F.role&&0===F.assignedStores.length){alert("Please assign at least one store for billing users");return}try{let e=await fetch("/api/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:F.name,email:F.email,password:F.password,role:F.role,assignedStores:"billing_user"===F.role?F.assignedStores:void 0,sessionDuration:"temporary_user"===F.role?F.sessionDuration:void 0,status:F.status})});if(e.ok)M(),$(),C(!1);else{let s=await e.json();alert(s.message||"Failed to add user")}}catch(e){console.error("Error adding user:",e),alert("An error occurred while adding the user")}},R=async()=>{if(!_||!F.name||!F.email||!F.password){alert("Please fill in all required fields");return}if("billing_user"===F.role&&0===F.assignedStores.length){alert("Please assign at least one store for billing users");return}try{let e=await fetch(`/api/users/${_.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:F.name,email:F.email,password:F.password,role:F.role,assignedStores:"billing_user"===F.role?F.assignedStores:void 0,sessionDuration:"temporary_user"===F.role?F.sessionDuration:void 0,status:F.status})});if(e.ok)M(),$(),E(null),S(!1);else{let s=await e.json();alert(s.message||"Failed to update user")}}catch(e){console.error("Error updating user:",e),alert("An error occurred while updating the user")}},T=async s=>{if(j?.email===e.find(e=>e.id===s)?.email){alert("You cannot delete your own account");return}try{let e=await fetch(`/api/users/${s}`,{method:"DELETE"});if(e.ok)M();else{let s=await e.json();alert(s.message||"Failed to delete user")}}catch(e){console.error("Error deleting user:",e),alert("An error occurred while deleting the user")}},K=async e=>{E(e),S(!0);try{let s=await fetch(`/api/users/${e.id}/password`);if(s.ok){let r=await s.json();U({name:e.name,email:e.email,password:r.password,role:e.role,assignedStores:e.assignedStores||[],sessionDuration:e.sessionDuration||24,status:e.status})}else console.error("Failed to fetch decrypted password"),U({name:e.name,email:e.email,password:"Could not retrieve password",role:e.role,assignedStores:e.assignedStores||[],sessionDuration:e.sessionDuration||24,status:e.status})}catch(e){console.error("Error fetching decrypted password:",e)}},Y=e=>{U(s=>({...s,assignedStores:s.assignedStores.includes(e)?s.assignedStores.filter(s=>s!==e):[...s.assignedStores,e]}))},Q=e.filter(e=>{let s=e.name.toLowerCase().includes(v.toLowerCase())||e.email.toLowerCase().includes(v.toLowerCase()),r="all"===f||e.role===f,a="all"===N||e.status===N;return s&&r&&a}),ee=e=>{switch(e){case"super_admin":return{label:"Super Admin",variant:"default",icon:L.A,color:"text-blue-600"};case"billing_user":return{label:"Billing User",variant:"secondary",icon:O.A,color:"text-green-600"};case"temporary_user":return{label:"Temporary User",variant:"outline",icon:z.A,color:"text-orange-600"}}},es=e=>"active"===e?{label:"Active",variant:"default"}:{label:"Inactive",variant:"secondary"};return(0,a.jsx)(i.default,{children:(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"User Management"}),(0,a.jsx)("p",{className:"text-gray-600 mt-2",children:"Manage admin users and their permissions"})]}),(0,a.jsxs)(u.lG,{open:k,onOpenChange:C,children:[(0,a.jsx)(u.zM,{asChild:!0,children:(0,a.jsxs)(n.$,{className:"bg-blue-600 hover:bg-blue-700",children:[(0,a.jsx)(I.A,{className:"h-4 w-4 mr-2"}),"Add User"]})}),(0,a.jsxs)(u.Cf,{className:"sm:max-w-[600px] max-h-[90vh] overflow-y-auto",children:[(0,a.jsxs)(u.c7,{children:[(0,a.jsx)(u.L3,{children:"Add New User"}),(0,a.jsx)(u.rr,{children:"Create a new admin user account"})]}),(0,a.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(o.J,{htmlFor:"name",children:"Full Name *"}),(0,a.jsx)(d.p,{id:"name",value:F.name,onChange:e=>U({...F,name:e.target.value}),placeholder:"Enter full name"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(o.J,{htmlFor:"email",children:"Email *"}),(0,a.jsx)(d.p,{id:"email",type:"email",value:F.email,onChange:e=>U({...F,email:e.target.value}),placeholder:"Enter email address"})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(o.J,{htmlFor:"password",children:"Password *"}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsxs)("div",{className:"relative flex-1",children:[(0,a.jsx)(d.p,{id:"password",type:D?"text":"password",value:F.password,onChange:e=>U({...F,password:e.target.value}),placeholder:"Enter password"}),(0,a.jsx)(n.$,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>P(!D),children:D?(0,a.jsx)(V.A,{className:"h-4 w-4 text-gray-400"}):(0,a.jsx)(Z.A,{className:"h-4 w-4 text-gray-400"})})]}),(0,a.jsx)(n.$,{type:"button",variant:"outline",onClick:q,children:"Generate"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(o.J,{htmlFor:"role",children:"Role *"}),(0,a.jsxs)(x.l6,{value:F.role,onValueChange:e=>U({...F,role:e}),children:[(0,a.jsx)(x.bq,{children:(0,a.jsx)(x.yv,{})}),(0,a.jsxs)(x.gC,{children:[(0,a.jsx)(x.eb,{value:"super_admin",children:"Super Admin"}),(0,a.jsx)(x.eb,{value:"billing_user",children:"Billing User"}),(0,a.jsx)(x.eb,{value:"temporary_user",children:"Temporary User"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(o.J,{htmlFor:"status",children:"Status *"}),(0,a.jsxs)(x.l6,{value:F.status,onValueChange:e=>U({...F,status:e}),children:[(0,a.jsx)(x.bq,{children:(0,a.jsx)(x.yv,{})}),(0,a.jsxs)(x.gC,{children:[(0,a.jsx)(x.eb,{value:"active",children:"Active"}),(0,a.jsx)(x.eb,{value:"inactive",children:"Inactive"})]})]})]})]}),"billing_user"===F.role&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(o.J,{children:"Assigned Stores *"}),(0,a.jsx)("div",{className:"border rounded-lg p-3 max-h-32 overflow-y-auto",children:r.filter(e=>"active"===e.status).map(e=>(0,a.jsxs)("div",{className:"flex items-center space-x-2 py-1",children:[(0,a.jsx)(G,{id:`store-${e.id}`,checked:F.assignedStores.includes(e.id),onCheckedChange:()=>Y(e.id)}),(0,a.jsx)(o.J,{htmlFor:`store-${e.id}`,className:"text-sm",children:e.name})]},e.id))})]}),"temporary_user"===F.role&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(o.J,{htmlFor:"sessionDuration",children:"Session Duration (hours)"}),(0,a.jsx)(d.p,{id:"sessionDuration",type:"number",min:"1",max:"168",value:F.sessionDuration,onChange:e=>U({...F,sessionDuration:Number(e.target.value)||24}),placeholder:"24"}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"How long the temporary user session should last (1-168 hours)"})]})]}),(0,a.jsxs)(u.Es,{children:[(0,a.jsx)(n.$,{variant:"outline",onClick:()=>{C(!1),$()},children:"Cancel"}),(0,a.jsx)(n.$,{onClick:J,children:"Add User"})]})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,a.jsx)(c.Zp,{children:(0,a.jsx)(c.Wu,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(B.A,{className:"h-8 w-8 text-blue-600"}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Users"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:e.length})]})]})})}),(0,a.jsx)(c.Zp,{children:(0,a.jsx)(c.Wu,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(L.A,{className:"h-8 w-8 text-blue-600"}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Super Admins"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:e.filter(e=>"super_admin"===e.role).length})]})]})})}),(0,a.jsx)(c.Zp,{children:(0,a.jsx)(c.Wu,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(O.A,{className:"h-8 w-8 text-green-600"}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Billing Users"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:e.filter(e=>"billing_user"===e.role).length})]})]})})}),(0,a.jsx)(c.Zp,{children:(0,a.jsx)(c.Wu,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(z.A,{className:"h-8 w-8 text-orange-600"}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Temporary Users"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:e.filter(e=>"temporary_user"===e.role).length})]})]})})})]}),(0,a.jsxs)(c.Zp,{children:[(0,a.jsx)(c.aR,{children:(0,a.jsx)(c.ZB,{children:"User Accounts"})}),(0,a.jsxs)(c.Wu,{children:[(0,a.jsxs)("div",{className:"flex flex-col md:flex-row gap-4 mb-6",children:[(0,a.jsx)("div",{className:"flex-1",children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(H.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),(0,a.jsx)(d.p,{placeholder:"Search users...",value:v,onChange:e=>y(e.target.value),className:"pl-10"})]})}),(0,a.jsxs)(x.l6,{value:f,onValueChange:b,children:[(0,a.jsx)(x.bq,{className:"w-full md:w-48",children:(0,a.jsx)(x.yv,{placeholder:"Filter by role"})}),(0,a.jsxs)(x.gC,{children:[(0,a.jsx)(x.eb,{value:"all",children:"All Roles"}),(0,a.jsx)(x.eb,{value:"super_admin",children:"Super Admin"}),(0,a.jsx)(x.eb,{value:"billing_user",children:"Billing User"}),(0,a.jsx)(x.eb,{value:"temporary_user",children:"Temporary User"})]})]}),(0,a.jsxs)(x.l6,{value:N,onValueChange:w,children:[(0,a.jsx)(x.bq,{className:"w-full md:w-48",children:(0,a.jsx)(x.yv,{placeholder:"Filter by status"})}),(0,a.jsxs)(x.gC,{children:[(0,a.jsx)(x.eb,{value:"all",children:"All Status"}),(0,a.jsx)(x.eb,{value:"active",children:"Active"}),(0,a.jsx)(x.eb,{value:"inactive",children:"Inactive"})]})]})]}),(0,a.jsxs)("div",{className:"overflow-x-auto",children:[(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"border-b",children:[(0,a.jsx)("th",{className:"text-left p-4 font-medium",children:"User"}),(0,a.jsx)("th",{className:"text-left p-4 font-medium",children:"Role"}),(0,a.jsx)("th",{className:"text-left p-4 font-medium",children:"Status"}),(0,a.jsx)("th",{className:"text-left p-4 font-medium",children:"Assigned Stores"}),(0,a.jsx)("th",{className:"text-left p-4 font-medium",children:"Session Duration"}),(0,a.jsx)("th",{className:"text-left p-4 font-medium",children:"Created"}),(0,a.jsx)("th",{className:"text-left p-4 font-medium",children:"Actions"})]})}),(0,a.jsx)("tbody",{children:Q.map(e=>{let s=ee(e.role),t=es(e.status),l=s.icon;return(0,a.jsxs)("tr",{className:"border-b hover:bg-gray-50",children:[(0,a.jsx)("td",{className:"p-4",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium",children:e.name}),(0,a.jsx)("div",{className:"text-sm text-gray-500",children:e.email})]})}),(0,a.jsx)("td",{className:"p-4",children:(0,a.jsxs)(h.E,{variant:s.variant,className:"flex items-center w-fit",children:[(0,a.jsx)(l,{className:`h-3 w-3 mr-1 ${s.color}`}),s.label]})}),(0,a.jsx)("td",{className:"p-4",children:(0,a.jsx)(h.E,{variant:t.variant,children:t.label})}),(0,a.jsx)("td",{className:"p-4",children:e.assignedStores&&e.assignedStores.length>0?(0,a.jsxs)("div",{className:"space-y-1",children:[e.assignedStores.map(e=>{let s=r.find(s=>s.id===e);return s?(0,a.jsx)("div",{className:"text-xs bg-gray-100 px-2 py-1 rounded",children:s.name},e):null}),e.assignedStores.length>2&&(0,a.jsxs)("span",{className:"text-xs text-gray-500",children:["+",e.assignedStores.length-2," more"]})]}):(0,a.jsx)("span",{className:"text-gray-400",children:"-"})}),(0,a.jsx)("td",{className:"p-4",children:e.sessionDuration?(0,a.jsxs)("span",{className:"text-sm",children:[e.sessionDuration,"h"]}):(0,a.jsx)("span",{className:"text-gray-400",children:"-"})}),(0,a.jsx)("td",{className:"p-4",children:(0,a.jsx)("span",{className:"text-sm text-gray-500",children:new Date(e.createdAt).toLocaleDateString()})}),(0,a.jsx)("td",{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(n.$,{variant:"outline",size:"sm",onClick:()=>K(e),children:(0,a.jsx)(W.A,{className:"h-3 w-3"})}),j?.email!==e.email&&(0,a.jsxs)(m.Lt,{children:[(0,a.jsx)(m.tv,{asChild:!0,children:(0,a.jsx)(n.$,{variant:"outline",size:"sm",className:"text-red-600 hover:text-red-700 bg-transparent",children:(0,a.jsx)(X.A,{className:"h-3 w-3"})})}),(0,a.jsxs)(m.EO,{children:[(0,a.jsxs)(m.wd,{children:[(0,a.jsx)(m.r7,{children:"Delete User"}),(0,a.jsxs)(m.$v,{children:['Are you sure you want to delete "',e.name,'"? This action cannot be undone.']})]}),(0,a.jsxs)(m.ck,{children:[(0,a.jsx)(m.Zr,{children:"Cancel"}),(0,a.jsx)(m.Rx,{onClick:()=>T(e.id),className:"bg-red-600 hover:bg-red-700",children:"Delete"})]})]})]})]})})]},e.id)})})]}),0===Q.length&&(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)(B.A,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-xl font-medium text-gray-900 mb-2",children:"No users found"}),(0,a.jsx)("p",{className:"text-gray-500 mb-4",children:v||"all"!==f||"all"!==N?"Try adjusting your search or filters":"Get started by adding your first user"})]})]})]})]}),(0,a.jsx)(u.lG,{open:A,onOpenChange:S,children:(0,a.jsxs)(u.Cf,{className:"sm:max-w-[600px] max-h-[90vh] overflow-y-auto",children:[(0,a.jsxs)(u.c7,{children:[(0,a.jsx)(u.L3,{children:"Edit User"}),(0,a.jsx)(u.rr,{children:"Update user information and permissions"})]}),(0,a.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(o.J,{htmlFor:"edit-name",children:"Full Name *"}),(0,a.jsx)(d.p,{id:"edit-name",value:F.name,onChange:e=>U({...F,name:e.target.value}),placeholder:"Enter full name"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(o.J,{htmlFor:"edit-email",children:"Email *"}),(0,a.jsx)(d.p,{id:"edit-email",type:"email",value:F.email,onChange:e=>U({...F,email:e.target.value}),placeholder:"Enter email address"})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(o.J,{htmlFor:"edit-password",children:"Password *"}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsxs)("div",{className:"relative flex-1",children:[(0,a.jsx)(d.p,{id:"edit-password",type:D?"text":"password",value:F.password,onChange:e=>U({...F,password:e.target.value}),placeholder:"Enter password"}),(0,a.jsx)(n.$,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>P(!D),children:D?(0,a.jsx)(V.A,{className:"h-4 w-4 text-gray-400"}):(0,a.jsx)(Z.A,{className:"h-4 w-4 text-gray-400"})})]}),(0,a.jsx)(n.$,{type:"button",variant:"outline",onClick:q,children:"Generate"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(o.J,{htmlFor:"edit-role",children:"Role *"}),(0,a.jsxs)(x.l6,{value:F.role,onValueChange:e=>U({...F,role:e}),children:[(0,a.jsx)(x.bq,{children:(0,a.jsx)(x.yv,{})}),(0,a.jsxs)(x.gC,{children:[(0,a.jsx)(x.eb,{value:"super_admin",children:"Super Admin"}),(0,a.jsx)(x.eb,{value:"billing_user",children:"Billing User"}),(0,a.jsx)(x.eb,{value:"temporary_user",children:"Temporary User"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(o.J,{htmlFor:"edit-status",children:"Status *"}),(0,a.jsxs)(x.l6,{value:F.status,onValueChange:e=>U({...F,status:e}),children:[(0,a.jsx)(x.bq,{children:(0,a.jsx)(x.yv,{})}),(0,a.jsxs)(x.gC,{children:[(0,a.jsx)(x.eb,{value:"active",children:"Active"}),(0,a.jsx)(x.eb,{value:"inactive",children:"Inactive"})]})]})]})]}),"billing_user"===F.role&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(o.J,{children:"Assigned Stores *"}),(0,a.jsx)("div",{className:"border rounded-lg p-3 max-h-32 overflow-y-auto",children:r.filter(e=>"active"===e.status).map(e=>(0,a.jsxs)("div",{className:"flex items-center space-x-2 py-1",children:[(0,a.jsx)(G,{id:`edit-store-${e.id}`,checked:F.assignedStores.includes(e.id),onCheckedChange:()=>Y(e.id)}),(0,a.jsx)(o.J,{htmlFor:`edit-store-${e.id}`,className:"text-sm",children:e.name})]},e.id))})]}),"temporary_user"===F.role&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(o.J,{htmlFor:"edit-sessionDuration",children:"Session Duration (hours)"}),(0,a.jsx)(d.p,{id:"edit-sessionDuration",type:"number",min:"1",max:"168",value:F.sessionDuration,onChange:e=>U({...F,sessionDuration:Number(e.target.value)||24}),placeholder:"24"}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"How long the temporary user session should last (1-168 hours)"})]})]}),(0,a.jsxs)(u.Es,{children:[(0,a.jsx)(n.$,{variant:"outline",onClick:()=>{S(!1),$(),E(null)},children:"Cancel"}),(0,a.jsx)(n.$,{onClick:R,children:"Update User"})]})]})})]})})}},88233:(e,s,r)=>{"use strict";r.d(s,{A:()=>a});let a=(0,r(62688).A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},92957:(e,s,r)=>{"use strict";r.r(s),r.d(s,{GlobalError:()=>i.a,__next_app__:()=>h,pages:()=>c,routeModule:()=>u,tree:()=>o});var a=r(65239),t=r(48088),l=r(88170),i=r.n(l),n=r(30893),d={};for(let e in n)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>n[e]);r.d(s,d);let o={children:["",{children:["dashboard",{children:["users",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,18417)),"D:\\adminpanel12 (1)\\billing-app\\app\\dashboard\\users\\page.tsx"]}]},{loading:[()=>Promise.resolve().then(r.bind(r,59410)),"D:\\adminpanel12 (1)\\billing-app\\app\\dashboard\\users\\loading.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,58014)),"D:\\adminpanel12 (1)\\billing-app\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,65284,23)),"next/dist/client/components/unauthorized-error"]}]}.children,c=["D:\\adminpanel12 (1)\\billing-app\\app\\dashboard\\users\\page.tsx"],h={require:r,loadChunk:()=>Promise.resolve()},u=new a.AppPageRouteModule({definition:{kind:t.RouteKind.APP_PAGE,page:"/dashboard/users/page",pathname:"/dashboard/users",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},96474:(e,s,r)=>{"use strict";r.d(s,{A:()=>a});let a=(0,r(62688).A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},99270:(e,s,r)=>{"use strict";r.d(s,{A:()=>a});let a=(0,r(62688).A)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},99891:(e,s,r)=>{"use strict";r.d(s,{A:()=>a});let a=(0,r(62688).A)("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]])}};var s=require("../../../webpack-runtime.js");s.C(e);var r=e=>s(s.s=e),a=s.X(0,[447,357,677,782,990,552,740,299],()=>r(92957));module.exports=a})();