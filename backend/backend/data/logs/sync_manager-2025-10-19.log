2025-10-19 17:04:39,163 - scripts.sync_manager - INFO - Starting background sync scheduler setup.
2025-10-19 17:04:39,163 - scripts.sync_manager - DEBUG - Scheduled tasks: scheduled_sync (15min), retry_failed_logs (15min), cleanup_old_logs (daily 02:00).
2025-10-19 17:04:39,165 - scripts.sync_manager - INFO - Background sync scheduler thread started.
2025-10-19 17:04:39,165 - scripts.sync_manager - INFO - Background sync process started.
2025-10-19 17:04:39,165 - scripts.sync_manager - INFO - Performing initial scheduled sync run.
2025-10-19 17:04:39,165 - scripts.sync_manager - INFO - Initiating scheduled sync operation.
2025-10-19 17:04:39,165 - scripts.sync_manager - INFO - No pending sync logs to process.
2025-10-19 17:04:39,169 - scripts.sync_manager - INFO - Push sync result: {'status': 'success', 'message': 'No pending logs', 'processed': 0, 'failed': 0}
2025-10-19 17:04:39,277 - scripts.sync_manager - INFO - Starting pull from MySQL sync_table. Last sync timestamp: None (fetching last 1 day)
2025-10-19 17:04:39,312 - scripts.sync_manager - INFO - No new entries found in MySQL sync_table.
2025-10-19 17:04:39,486 - scripts.sync_manager - INFO - Pull sync result: {'status': 'success', 'message': 'No new entries', 'pulled': 0}
2025-10-19 17:04:39,504 - scripts.sync_manager - INFO - Logged sync event: scheduled_sync - completed
2025-10-19 17:04:39,505 - scripts.sync_manager - INFO - Scheduled sync operation completed successfully.
2025-10-19 17:04:55,453 - scripts.sync_manager - INFO - Starting background sync scheduler setup.
2025-10-19 17:04:55,454 - scripts.sync_manager - DEBUG - Scheduled tasks: scheduled_sync (15min), retry_failed_logs (15min), cleanup_old_logs (daily 02:00).
2025-10-19 17:04:55,454 - scripts.sync_manager - INFO - Background sync scheduler thread started.
2025-10-19 17:04:55,454 - scripts.sync_manager - INFO - Background sync process started.
2025-10-19 17:04:55,456 - scripts.sync_manager - INFO - Performing initial scheduled sync run.
2025-10-19 17:04:55,456 - scripts.sync_manager - INFO - Initiating scheduled sync operation.
2025-10-19 17:04:55,456 - scripts.sync_manager - INFO - No pending sync logs to process.
2025-10-19 17:04:55,458 - scripts.sync_manager - INFO - Push sync result: {'status': 'success', 'message': 'No pending logs', 'processed': 0, 'failed': 0}
2025-10-19 17:04:55,571 - scripts.sync_manager - INFO - Starting pull from MySQL sync_table. Last sync timestamp: None (fetching last 1 day)
2025-10-19 17:04:55,611 - scripts.sync_manager - INFO - No new entries found in MySQL sync_table.
2025-10-19 17:04:55,792 - scripts.sync_manager - INFO - Pull sync result: {'status': 'success', 'message': 'No new entries', 'pulled': 0}
2025-10-19 17:04:55,813 - scripts.sync_manager - INFO - Logged sync event: scheduled_sync - completed
2025-10-19 17:04:55,813 - scripts.sync_manager - INFO - Scheduled sync operation completed successfully.
2025-10-19 17:05:11,585 - scripts.sync_manager - INFO - Starting background sync scheduler setup.
2025-10-19 17:05:11,586 - scripts.sync_manager - DEBUG - Scheduled tasks: scheduled_sync (15min), retry_failed_logs (15min), cleanup_old_logs (daily 02:00), _cleanup_log_files (daily 02:00).
2025-10-19 17:05:11,589 - scripts.sync_manager - INFO - Background sync scheduler thread started.
2025-10-19 17:05:11,589 - scripts.sync_manager - INFO - Background sync process started.
2025-10-19 17:05:11,589 - scripts.sync_manager - INFO - Performing initial scheduled sync run.
2025-10-19 17:05:11,590 - scripts.sync_manager - INFO - Initiating scheduled sync operation.
2025-10-19 17:05:11,590 - scripts.sync_manager - INFO - No pending sync logs to process.
2025-10-19 17:05:11,593 - scripts.sync_manager - INFO - Push sync result: {'status': 'success', 'message': 'No pending logs', 'processed': 0, 'failed': 0}
2025-10-19 17:05:11,703 - scripts.sync_manager - INFO - Starting pull from MySQL sync_table. Last sync timestamp: None (fetching last 1 day)
2025-10-19 17:05:11,748 - scripts.sync_manager - INFO - No new entries found in MySQL sync_table.
2025-10-19 17:05:11,929 - scripts.sync_manager - INFO - Pull sync result: {'status': 'success', 'message': 'No new entries', 'pulled': 0}
2025-10-19 17:05:11,954 - scripts.sync_manager - INFO - Logged sync event: scheduled_sync - completed
2025-10-19 17:05:11,954 - scripts.sync_manager - INFO - Scheduled sync operation completed successfully.
2025-10-19 17:20:11,961 - scripts.sync_manager - INFO - Initiating scheduled sync operation.
2025-10-19 17:20:11,968 - scripts.sync_manager - INFO - No pending sync logs to process.
2025-10-19 17:20:11,969 - scripts.sync_manager - INFO - Push sync result: {'status': 'success', 'message': 'No pending logs', 'processed': 0, 'failed': 0}
2025-10-19 17:20:12,378 - scripts.sync_manager - INFO - Starting pull from MySQL sync_table. Last sync timestamp: None (fetching last 1 day)
2025-10-19 17:20:12,419 - scripts.sync_manager - INFO - No new entries found in MySQL sync_table.
2025-10-19 17:20:12,604 - scripts.sync_manager - INFO - Pull sync result: {'status': 'success', 'message': 'No new entries', 'pulled': 0}
2025-10-19 17:20:12,626 - scripts.sync_manager - INFO - Logged sync event: scheduled_sync - completed
2025-10-19 17:20:12,626 - scripts.sync_manager - INFO - Scheduled sync operation completed successfully.
2025-10-19 17:20:12,627 - scripts.sync_manager - INFO - Attempting to retry 1 failed sync logs...
2025-10-19 17:20:12,627 - scripts.sync_manager - WARNING - Log ID 1 has exceeded max retry attempts (3). Skipping retry.
2025-10-19 17:20:12,628 - scripts.sync_manager - INFO - No logs eligible for retry after checking retry counts.
2025-10-19 17:32:51,378 - scripts.sync_manager - INFO - Logged CRUD operation: Products - CREATE - d8b9a244-755e-4a16-bfb5-4e1e71bc924b
2025-10-19 17:32:51,400 - scripts.sync_manager - INFO - Logged sync event: Products_create_logged - pending
2025-10-19 17:35:12,636 - scripts.sync_manager - INFO - Initiating scheduled sync operation.
2025-10-19 17:35:12,653 - scripts.sync_manager - INFO - Processing 1 pending sync logs sequentially...
2025-10-19 17:35:12,653 - scripts.sync_manager - INFO - Attempting to process log ID 3: Table `Products`, Type `CREATE`, Record ID `d8b9a244-755e-4a16-bfb5-4e1e71bc924b`.
2025-10-19 17:35:12,654 - scripts.sync_manager - DEBUG - Log ID 3 details: {'id': 3, 'sync_time': '2025-10-19T17:32:51.378575', 'table_name': 'Products', 'change_type': 'CREATE', 'record_id': 'd8b9a244-755e-4a16-bfb5-4e1e71bc924b', 'change_data': {'name': 'this is a testung ', 'price': 500, 'stock': 50, 'tax': None, 'barcodes': ['1760875367846938'], 'batchId': '694077bb-c723-4e96-87d4-97d7ac2c2912', 'id': 'd8b9a244-755e-4a16-bfb5-4e1e71bc924b', 'createdAt': '2025-10-19T17:32:51.365197', 'updatedAt': '2025-10-19T17:32:51.365197'}, 'status': 'pending', 'retry_count': 0, 'last_retry': None, 'error_message': None, 'created_at': '2025-10-19T17:32:51.378575'}
2025-10-19 17:35:13,059 - scripts.sync_manager - DEBUG - Attempting CREATE operation on table `Products` for record ID: d8b9a244-755e-4a16-bfb5-4e1e71bc924b
2025-10-19 17:35:13,143 - scripts.sync_manager - ERROR - Error in database operation for Products (ID: d8b9a244-755e-4a16-bfb5-4e1e71bc924b): 0
Traceback (most recent call last):
  File "E:\Siri-apps\billing-app\backend\scripts\sync_manager.py", line 261, in apply_change_to_mysql_db
    table_columns = [row[0] for row in cursor.fetchall()]
                     ~~~^^^
KeyError: 0
2025-10-19 17:35:13,321 - scripts.sync_manager - DEBUG - Log ID 3 marked as 'failed'. Retry count: 1
2025-10-19 17:35:13,359 - scripts.sync_manager - INFO - Logged sync event: Products_create_failed - failed
2025-10-19 17:35:13,359 - scripts.sync_manager - WARNING - Failed to process log ID 3. Will retry later if attempts remain.
2025-10-19 17:35:13,359 - scripts.sync_manager - INFO - Finished processing pending logs. Processed: 0, Failed: 1.
2025-10-19 17:35:13,359 - scripts.sync_manager - INFO - Push sync result: {'status': 'success', 'message': 'Processed 0 logs, 1 failed', 'processed': 0, 'failed': 1}
2025-10-19 17:35:13,729 - scripts.sync_manager - INFO - Starting pull from MySQL sync_table. Last sync timestamp: None (fetching last 1 day)
2025-10-19 17:35:13,791 - scripts.sync_manager - INFO - No new entries found in MySQL sync_table.
2025-10-19 17:35:13,974 - scripts.sync_manager - INFO - Pull sync result: {'status': 'success', 'message': 'No new entries', 'pulled': 0}
2025-10-19 17:35:13,993 - scripts.sync_manager - INFO - Logged sync event: scheduled_sync - completed
2025-10-19 17:35:13,993 - scripts.sync_manager - INFO - Scheduled sync operation completed successfully.
2025-10-19 17:35:14,007 - scripts.sync_manager - INFO - Attempting to retry 2 failed sync logs...
2025-10-19 17:35:14,007 - scripts.sync_manager - WARNING - Log ID 1 has exceeded max retry attempts (3). Skipping retry.
2025-10-19 17:35:14,008 - scripts.sync_manager - DEBUG - Log ID 3 status reset to 'pending' for retry. Current retry count: 1.
2025-10-19 17:35:14,009 - scripts.sync_manager - INFO - Successfully reset 1 failed logs to 'pending'. Now processing them.
2025-10-19 17:35:14,015 - scripts.sync_manager - INFO - Processing 1 pending sync logs sequentially...
2025-10-19 17:35:14,015 - scripts.sync_manager - INFO - Attempting to process log ID 3: Table `Products`, Type `CREATE`, Record ID `d8b9a244-755e-4a16-bfb5-4e1e71bc924b`.
2025-10-19 17:35:14,015 - scripts.sync_manager - DEBUG - Log ID 3 details: {'id': 3, 'sync_time': '2025-10-19T17:32:51.378575', 'table_name': 'Products', 'change_type': 'CREATE', 'record_id': 'd8b9a244-755e-4a16-bfb5-4e1e71bc924b', 'change_data': {'name': 'this is a testung ', 'price': 500, 'stock': 50, 'tax': None, 'barcodes': ['1760875367846938'], 'batchId': '694077bb-c723-4e96-87d4-97d7ac2c2912', 'id': 'd8b9a244-755e-4a16-bfb5-4e1e71bc924b', 'createdAt': '2025-10-19T17:32:51.365197', 'updatedAt': '2025-10-19T17:32:51.365197'}, 'status': 'pending', 'retry_count': 1, 'last_retry': '2025-10-19T17:35:13.321372', 'error_message': 'Database operation failed', 'created_at': '2025-10-19T17:32:51.378575'}
2025-10-19 17:35:14,411 - scripts.sync_manager - DEBUG - Attempting CREATE operation on table `Products` for record ID: d8b9a244-755e-4a16-bfb5-4e1e71bc924b
2025-10-19 17:35:14,488 - scripts.sync_manager - ERROR - Error in database operation for Products (ID: d8b9a244-755e-4a16-bfb5-4e1e71bc924b): 0
Traceback (most recent call last):
  File "E:\Siri-apps\billing-app\backend\scripts\sync_manager.py", line 261, in apply_change_to_mysql_db
    table_columns = [row[0] for row in cursor.fetchall()]
                     ~~~^^^
KeyError: 0
2025-10-19 17:35:14,666 - scripts.sync_manager - DEBUG - Log ID 3 marked as 'failed'. Retry count: 2
2025-10-19 17:35:14,679 - scripts.sync_manager - INFO - Logged sync event: Products_create_failed - failed
2025-10-19 17:35:14,680 - scripts.sync_manager - WARNING - Failed to process log ID 3. Will retry later if attempts remain.
2025-10-19 17:35:14,680 - scripts.sync_manager - INFO - Finished processing pending logs. Processed: 0, Failed: 1.
2025-10-19 17:36:20,392 - scripts.sync_manager - INFO - Starting background sync scheduler setup.
2025-10-19 17:36:20,397 - scripts.sync_manager - DEBUG - Scheduled tasks: scheduled_sync (15min), retry_failed_logs (15min), cleanup_old_logs (daily 02:00), _cleanup_log_files (daily 02:00).
2025-10-19 17:36:20,400 - scripts.sync_manager - INFO - Background sync scheduler thread started.
2025-10-19 17:36:20,400 - scripts.sync_manager - INFO - Background sync process started.
2025-10-19 17:36:20,400 - scripts.sync_manager - INFO - Performing initial scheduled sync run.
2025-10-19 17:36:20,403 - scripts.sync_manager - INFO - Initiating scheduled sync operation.
2025-10-19 17:36:20,423 - scripts.sync_manager - INFO - No pending sync logs to process.
2025-10-19 17:36:20,426 - scripts.sync_manager - INFO - Push sync result: {'status': 'success', 'message': 'No pending logs', 'processed': 0, 'failed': 0}
2025-10-19 17:36:20,544 - scripts.sync_manager - INFO - Starting pull from MySQL sync_table. Last sync timestamp: None (fetching last 1 day)
2025-10-19 17:36:20,585 - scripts.sync_manager - INFO - No new entries found in MySQL sync_table.
2025-10-19 17:36:20,773 - scripts.sync_manager - INFO - Pull sync result: {'status': 'success', 'message': 'No new entries', 'pulled': 0}
2025-10-19 17:36:20,794 - scripts.sync_manager - INFO - Logged sync event: scheduled_sync - completed
2025-10-19 17:36:20,795 - scripts.sync_manager - INFO - Scheduled sync operation completed successfully.
2025-10-19 17:39:25,881 - scripts.sync_manager - INFO - Logged CRUD operation: SystemSettings - UPDATE - 1
2025-10-19 17:39:25,888 - scripts.sync_manager - INFO - Logged sync event: SystemSettings_update_logged - pending
2025-10-19 17:51:20,803 - scripts.sync_manager - INFO - Initiating scheduled sync operation.
2025-10-19 17:51:20,818 - scripts.sync_manager - INFO - No pending sync logs to process.
2025-10-19 17:51:20,818 - scripts.sync_manager - INFO - Push sync result: {'status': 'success', 'message': 'No pending logs', 'processed': 0, 'failed': 0}
2025-10-19 17:51:21,205 - scripts.sync_manager - INFO - Starting pull from MySQL sync_table. Last sync timestamp: None (fetching last 1 day)
2025-10-19 17:51:21,241 - scripts.sync_manager - INFO - No new entries found in MySQL sync_table.
2025-10-19 17:51:21,419 - scripts.sync_manager - INFO - Pull sync result: {'status': 'success', 'message': 'No new entries', 'pulled': 0}
2025-10-19 17:51:21,427 - scripts.sync_manager - INFO - Logged sync event: scheduled_sync - completed
2025-10-19 17:51:21,427 - scripts.sync_manager - INFO - Scheduled sync operation completed successfully.
2025-10-19 17:51:21,428 - scripts.sync_manager - INFO - Attempting to retry 3 failed sync logs...
2025-10-19 17:51:21,428 - scripts.sync_manager - WARNING - Log ID 1 has exceeded max retry attempts (3). Skipping retry.
2025-10-19 17:51:21,429 - scripts.sync_manager - WARNING - Log ID 3 has exceeded max retry attempts (3). Skipping retry.
2025-10-19 17:51:21,429 - scripts.sync_manager - DEBUG - Log ID 4 status reset to 'pending' for retry. Current retry count: 2.
2025-10-19 17:51:21,431 - scripts.sync_manager - INFO - Successfully reset 1 failed logs to 'pending'. Now processing them.
2025-10-19 17:51:21,448 - scripts.sync_manager - INFO - Processing 1 pending sync logs sequentially...
2025-10-19 17:51:21,448 - scripts.sync_manager - INFO - Attempting to process log ID 4: Table `SystemSettings`, Type `UPDATE`, Record ID `1`.
2025-10-19 17:51:21,448 - scripts.sync_manager - DEBUG - Log ID 4 details: {'id': 4, 'sync_time': '2025-10-19T17:39:25.879674', 'table_name': 'SystemSettings', 'change_type': 'UPDATE', 'record_id': 1, 'change_data': {'systemSettings': {'companyAddress': '123 Jewelry Street, Mumbai, Maharashtra 400001', 'companyEmail': 'info@siriartjewellery.com', 'companyName': 'SIRI ART JEWELLERY', 'companyPhone': '+91 98765 43210', 'gstin': '27AAFCV2449G1Z7', 'id': 1, 'taxPercentage': 8.9}, 'billFormats': {'A4': {'height': 297, 'margins': {'bottom': 20, 'left': 20, 'right': 20, 'top': 20}, 'unit': 'mm', 'width': 210}, 'A5': {'height': 210, 'margins': {'bottom': 15, 'left': 15, 'right': 15, 'top': 15}, 'unit': 'mm', 'width': 148}, 'Custom': {'height': 297, 'margins': {'bottom': 20, 'left': 20, 'right': 20, 'top': 20}, 'unit': 'mm', 'width': 210}, 'Thermal_58mm': {'height': 'auto', 'margins': {'bottom': 3, 'left': 3, 'right': 3, 'top': 3}, 'unit': 'mm', 'width': 58}, 'Thermal_80mm': {'height': 'auto', 'margins': {'bottom': 5, 'left': 5, 'right': 5, 'top': 5}, 'unit': 'mm', 'width': 80}}, 'storeFormats': {}}, 'status': 'pending', 'retry_count': 2, 'last_retry': '2025-10-19T17:43:12.675575', 'error_message': 'Database operation failed', 'created_at': '2025-10-19T17:39:25.879674'}
2025-10-19 17:51:21,869 - scripts.sync_manager - DEBUG - Attempting UPDATE operation on table `SystemSettings` for record ID: 1
2025-10-19 17:51:21,906 - scripts.sync_manager - DEBUG - Table `SystemSettings` columns: ['id', 'gstin', 'taxPercentage', 'companyName', 'companyAddress', 'companyPhone', 'companyEmail']
2025-10-19 17:51:21,910 - scripts.sync_manager - DEBUG - Filtered data for UPDATE on `SystemSettings`: {}
2025-10-19 17:51:21,912 - scripts.sync_manager - DEBUG - Added record_id 1 to filtered_data for SystemSettings.
2025-10-19 17:51:21,912 - scripts.sync_manager - DEBUG - Executing UPSERT query for `SystemSettings`: 
                        INSERT INTO `SystemSettings` (`id`)
                        VALUES (%s)
                        ON DUPLICATE KEY UPDATE `id` = VALUES(`id`)
                         with values: [1]
2025-10-19 17:51:21,948 - scripts.sync_manager - DEBUG - Handling related tables for SystemSettings with record ID: 1 and change data: {'systemSettings': {'companyAddress': '123 Jewelry Street, Mumbai, Maharashtra 400001', 'companyEmail': 'info@siriartjewellery.com', 'companyName': 'SIRI ART JEWELLERY', 'companyPhone': '+91 98765 43210', 'gstin': '27AAFCV2449G1Z7', 'id': 1, 'taxPercentage': 8.9}, 'billFormats': {'A4': {'height': 297, 'margins': {'bottom': 20, 'left': 20, 'right': 20, 'top': 20}, 'unit': 'mm', 'width': 210}, 'A5': {'height': 210, 'margins': {'bottom': 15, 'left': 15, 'right': 15, 'top': 15}, 'unit': 'mm', 'width': 148}, 'Custom': {'height': 297, 'margins': {'bottom': 20, 'left': 20, 'right': 20, 'top': 20}, 'unit': 'mm', 'width': 210}, 'Thermal_58mm': {'height': 'auto', 'margins': {'bottom': 3, 'left': 3, 'right': 3, 'top': 3}, 'unit': 'mm', 'width': 58}, 'Thermal_80mm': {'height': 'auto', 'margins': {'bottom': 5, 'left': 5, 'right': 5, 'top': 5}, 'unit': 'mm', 'width': 80}}, 'storeFormats': {}}
2025-10-19 17:51:21,952 - scripts.sync_manager - INFO - UPDATE operation on table `SystemSettings` for record ID: 1 successful.
2025-10-19 17:51:21,988 - scripts.sync_manager - DEBUG - Transaction committed for UPDATE on `SystemSettings` for record ID: 1.
2025-10-19 17:51:22,195 - scripts.sync_manager - DEBUG - Log ID 4 marked as 'completed'.
2025-10-19 17:51:22,203 - scripts.sync_manager - INFO - Logged sync event: SystemSettings_update_success - completed
2025-10-19 17:51:22,204 - scripts.sync_manager - INFO - Successfully processed log ID 4.
2025-10-19 17:51:22,205 - scripts.sync_manager - INFO - Finished processing pending logs. Processed: 1, Failed: 0.
2025-10-19 18:03:14,075 - scripts.sync_manager - INFO - Starting background sync scheduler setup.
2025-10-19 18:03:14,077 - scripts.sync_manager - DEBUG - Scheduled tasks: scheduled_sync (15min), retry_failed_logs (15min), cleanup_old_logs (daily 02:00), _cleanup_log_files (daily 02:00).
2025-10-19 18:03:14,079 - scripts.sync_manager - INFO - Background sync scheduler thread started.
2025-10-19 18:03:14,079 - scripts.sync_manager - INFO - Background sync process started.
2025-10-19 18:03:14,081 - scripts.sync_manager - INFO - Performing initial scheduled sync run.
2025-10-19 18:03:14,096 - scripts.sync_manager - INFO - Initiating scheduled sync operation.
2025-10-19 18:03:14,100 - scripts.sync_manager - INFO - No pending sync logs to process.
2025-10-19 18:03:14,102 - scripts.sync_manager - INFO - Push sync result: {'status': 'success', 'message': 'No pending logs', 'processed': 0, 'failed': 0}
2025-10-19 18:03:14,218 - scripts.sync_manager - INFO - Starting pull from MySQL sync_table. Last sync timestamp: None (fetching last 1 day)
2025-10-19 18:03:14,259 - scripts.sync_manager - INFO - No new entries found in MySQL sync_table.
2025-10-19 18:03:14,452 - scripts.sync_manager - INFO - Pull sync result: {'status': 'success', 'message': 'No new entries', 'pulled': 0}
2025-10-19 18:03:14,463 - scripts.sync_manager - INFO - Logged sync event: scheduled_sync - completed
2025-10-19 18:03:14,463 - scripts.sync_manager - INFO - Scheduled sync operation completed successfully.
2025-10-19 20:56:20,286 - scripts.sync_manager - INFO - Starting background sync scheduler setup.
2025-10-19 20:56:20,288 - scripts.sync_manager - DEBUG - Scheduled tasks: scheduled_sync (15min), retry_failed_logs (15min), cleanup_old_logs (daily 02:00), _cleanup_log_files (daily 02:00).
2025-10-19 20:56:20,354 - scripts.sync_manager - INFO - Background sync scheduler thread started.
2025-10-19 20:56:20,354 - scripts.sync_manager - INFO - Background sync process started.
2025-10-19 20:56:20,354 - scripts.sync_manager - INFO - Performing initial scheduled sync run.
2025-10-19 20:56:20,356 - scripts.sync_manager - INFO - Initiating scheduled sync operation.
2025-10-19 20:56:20,358 - scripts.sync_manager - INFO - No pending sync logs to process.
2025-10-19 20:56:20,358 - scripts.sync_manager - INFO - Push sync result: {'status': 'success', 'message': 'No pending logs', 'processed': 0, 'failed': 0}
2025-10-19 20:56:20,492 - scripts.sync_manager - INFO - Starting pull from MySQL sync_table. Last sync timestamp: None (fetching last 1 day)
2025-10-19 20:56:20,538 - scripts.sync_manager - INFO - No new entries found in MySQL sync_table.
2025-10-19 20:56:20,713 - scripts.sync_manager - INFO - Pull sync result: {'status': 'success', 'message': 'No new entries', 'pulled': 0}
2025-10-19 20:56:20,715 - scripts.sync_manager - INFO - Logged sync event: scheduled_sync - completed
2025-10-19 20:56:20,716 - scripts.sync_manager - INFO - Scheduled sync operation completed successfully.
2025-10-19 20:56:25,693 - scripts.sync_manager - INFO - Starting background sync scheduler setup.
2025-10-19 20:56:25,694 - scripts.sync_manager - DEBUG - Scheduled tasks: scheduled_sync (15min), retry_failed_logs (15min), cleanup_old_logs (daily 02:00), _cleanup_log_files (daily 02:00).
2025-10-19 20:56:25,695 - scripts.sync_manager - INFO - Background sync scheduler thread started.
2025-10-19 20:56:25,696 - scripts.sync_manager - INFO - Background sync process started.
2025-10-19 20:56:25,696 - scripts.sync_manager - INFO - Performing initial scheduled sync run.
2025-10-19 20:56:25,697 - scripts.sync_manager - INFO - Initiating scheduled sync operation.
2025-10-19 20:56:25,697 - scripts.sync_manager - INFO - No pending sync logs to process.
2025-10-19 20:56:25,697 - scripts.sync_manager - INFO - Push sync result: {'status': 'success', 'message': 'No pending logs', 'processed': 0, 'failed': 0}
2025-10-19 20:56:25,807 - scripts.sync_manager - INFO - Starting pull from MySQL sync_table. Last sync timestamp: None (fetching last 1 day)
2025-10-19 20:56:25,851 - scripts.sync_manager - INFO - No new entries found in MySQL sync_table.
2025-10-19 20:56:26,034 - scripts.sync_manager - INFO - Pull sync result: {'status': 'success', 'message': 'No new entries', 'pulled': 0}
2025-10-19 20:56:26,052 - scripts.sync_manager - INFO - Logged sync event: scheduled_sync - completed
2025-10-19 20:56:26,053 - scripts.sync_manager - INFO - Scheduled sync operation completed successfully.
2025-10-19 21:00:47,787 - scripts.sync_manager - INFO - Starting background sync scheduler setup.
2025-10-19 21:00:47,787 - scripts.sync_manager - DEBUG - Scheduled tasks: scheduled_sync (15min), retry_failed_logs (15min), cleanup_old_logs (daily 02:00), _cleanup_log_files (daily 02:00).
2025-10-19 21:00:47,787 - scripts.sync_manager - INFO - Background sync scheduler thread started.
2025-10-19 21:00:47,787 - scripts.sync_manager - INFO - Background sync process started.
2025-10-19 21:00:47,787 - scripts.sync_manager - INFO - Performing initial scheduled sync run.
2025-10-19 21:00:47,787 - scripts.sync_manager - INFO - Initiating scheduled sync operation.
2025-10-19 21:00:47,787 - scripts.sync_manager - INFO - No pending sync logs to process.
2025-10-19 21:00:47,787 - scripts.sync_manager - INFO - Push sync result: {'status': 'success', 'message': 'No pending logs', 'processed': 0, 'failed': 0}
2025-10-19 21:00:47,903 - scripts.sync_manager - INFO - Starting pull from MySQL sync_table. Last sync timestamp: None (fetching last 1 day)
2025-10-19 21:00:47,940 - scripts.sync_manager - INFO - No new entries found in MySQL sync_table.
2025-10-19 21:00:48,124 - scripts.sync_manager - INFO - Pull sync result: {'status': 'success', 'message': 'No new entries', 'pulled': 0}
2025-10-19 21:00:48,124 - scripts.sync_manager - INFO - Logged sync event: scheduled_sync - completed
2025-10-19 21:00:48,130 - scripts.sync_manager - INFO - Scheduled sync operation completed successfully.
2025-10-19 21:01:32,063 - scripts.sync_manager - INFO - Starting background sync scheduler setup.
2025-10-19 21:01:32,065 - scripts.sync_manager - DEBUG - Scheduled tasks: scheduled_sync (15min), retry_failed_logs (15min), cleanup_old_logs (daily 02:00), _cleanup_log_files (daily 02:00).
2025-10-19 21:01:32,065 - scripts.sync_manager - INFO - Background sync scheduler thread started.
2025-10-19 21:01:32,065 - scripts.sync_manager - INFO - Background sync process started.
2025-10-19 21:01:32,065 - scripts.sync_manager - INFO - Performing initial scheduled sync run.
2025-10-19 21:01:32,067 - scripts.sync_manager - INFO - Initiating scheduled sync operation.
2025-10-19 21:01:32,067 - scripts.sync_manager - INFO - No pending sync logs to process.
2025-10-19 21:01:32,067 - scripts.sync_manager - INFO - Push sync result: {'status': 'success', 'message': 'No pending logs', 'processed': 0, 'failed': 0}
2025-10-19 21:01:32,190 - scripts.sync_manager - INFO - Starting pull from MySQL sync_table. Last sync timestamp: None (fetching last 1 day)
2025-10-19 21:01:32,228 - scripts.sync_manager - INFO - No new entries found in MySQL sync_table.
2025-10-19 21:01:32,409 - scripts.sync_manager - INFO - Pull sync result: {'status': 'success', 'message': 'No new entries', 'pulled': 0}
2025-10-19 21:01:32,429 - scripts.sync_manager - INFO - Logged sync event: scheduled_sync - completed
2025-10-19 21:01:32,429 - scripts.sync_manager - INFO - Scheduled sync operation completed successfully.
2025-10-19 21:01:55,708 - scripts.sync_manager - INFO - Starting background sync scheduler setup.
2025-10-19 21:01:55,710 - scripts.sync_manager - DEBUG - Scheduled tasks: scheduled_sync (15min), retry_failed_logs (15min), cleanup_old_logs (daily 02:00), _cleanup_log_files (daily 02:00).
2025-10-19 21:01:55,710 - scripts.sync_manager - INFO - Background sync scheduler thread started.
2025-10-19 21:01:55,710 - scripts.sync_manager - INFO - Background sync process started.
2025-10-19 21:01:55,710 - scripts.sync_manager - INFO - Performing initial scheduled sync run.
2025-10-19 21:01:55,710 - scripts.sync_manager - INFO - Initiating scheduled sync operation.
2025-10-19 21:01:55,710 - scripts.sync_manager - INFO - No pending sync logs to process.
2025-10-19 21:01:55,710 - scripts.sync_manager - INFO - Push sync result: {'status': 'success', 'message': 'No pending logs', 'processed': 0, 'failed': 0}
2025-10-19 21:01:55,822 - scripts.sync_manager - INFO - Starting pull from MySQL sync_table. Last sync timestamp: None (fetching last 1 day)
2025-10-19 21:01:55,862 - scripts.sync_manager - INFO - No new entries found in MySQL sync_table.
2025-10-19 21:01:56,044 - scripts.sync_manager - INFO - Pull sync result: {'status': 'success', 'message': 'No new entries', 'pulled': 0}
2025-10-19 21:01:56,058 - scripts.sync_manager - INFO - Logged sync event: scheduled_sync - completed
2025-10-19 21:01:56,058 - scripts.sync_manager - INFO - Scheduled sync operation completed successfully.
2025-10-19 21:02:09,182 - scripts.sync_manager - INFO - Starting background sync scheduler setup.
2025-10-19 21:02:09,182 - scripts.sync_manager - DEBUG - Scheduled tasks: scheduled_sync (15min), retry_failed_logs (15min), cleanup_old_logs (daily 02:00), _cleanup_log_files (daily 02:00).
2025-10-19 21:02:09,183 - scripts.sync_manager - INFO - Background sync scheduler thread started.
2025-10-19 21:02:09,183 - scripts.sync_manager - INFO - Background sync process started.
2025-10-19 21:02:09,183 - scripts.sync_manager - INFO - Performing initial scheduled sync run.
2025-10-19 21:02:09,184 - scripts.sync_manager - INFO - Initiating scheduled sync operation.
2025-10-19 21:02:09,185 - scripts.sync_manager - INFO - No pending sync logs to process.
2025-10-19 21:02:09,185 - scripts.sync_manager - INFO - Push sync result: {'status': 'success', 'message': 'No pending logs', 'processed': 0, 'failed': 0}
2025-10-19 21:02:09,292 - scripts.sync_manager - INFO - Starting pull from MySQL sync_table. Last sync timestamp: None (fetching last 1 day)
2025-10-19 21:02:09,341 - scripts.sync_manager - INFO - No new entries found in MySQL sync_table.
2025-10-19 21:02:09,533 - scripts.sync_manager - INFO - Pull sync result: {'status': 'success', 'message': 'No new entries', 'pulled': 0}
2025-10-19 21:02:09,540 - scripts.sync_manager - INFO - Logged sync event: scheduled_sync - completed
2025-10-19 21:02:09,540 - scripts.sync_manager - INFO - Scheduled sync operation completed successfully.
2025-10-19 21:02:46,672 - scripts.sync_manager - INFO - Starting background sync scheduler setup.
2025-10-19 21:02:46,674 - scripts.sync_manager - DEBUG - Scheduled tasks: scheduled_sync (15min), retry_failed_logs (15min), cleanup_old_logs (daily 02:00), _cleanup_log_files (daily 02:00).
2025-10-19 21:02:46,674 - scripts.sync_manager - INFO - Background sync scheduler thread started.
2025-10-19 21:02:46,674 - scripts.sync_manager - INFO - Background sync process started.
2025-10-19 21:02:46,674 - scripts.sync_manager - INFO - Performing initial scheduled sync run.
2025-10-19 21:02:46,676 - scripts.sync_manager - INFO - Initiating scheduled sync operation.
2025-10-19 21:02:46,676 - scripts.sync_manager - INFO - No pending sync logs to process.
2025-10-19 21:02:46,676 - scripts.sync_manager - INFO - Push sync result: {'status': 'success', 'message': 'No pending logs', 'processed': 0, 'failed': 0}
2025-10-19 21:02:46,793 - scripts.sync_manager - INFO - Starting pull from MySQL sync_table. Last sync timestamp: None (fetching last 1 day)
2025-10-19 21:02:46,831 - scripts.sync_manager - INFO - No new entries found in MySQL sync_table.
2025-10-19 21:02:47,029 - scripts.sync_manager - INFO - Pull sync result: {'status': 'success', 'message': 'No new entries', 'pulled': 0}
2025-10-19 21:02:47,043 - scripts.sync_manager - INFO - Logged sync event: scheduled_sync - completed
2025-10-19 21:02:47,044 - scripts.sync_manager - INFO - Scheduled sync operation completed successfully.
2025-10-19 21:03:29,383 - scripts.sync_manager - INFO - Logged CRUD operation: SystemSettings - UPDATE - 1
2025-10-19 21:03:29,403 - scripts.sync_manager - INFO - Logged sync event: SystemSettings_update_logged - pending
2025-10-19 21:11:20,735 - scripts.sync_manager - INFO - Initiating scheduled sync operation.
2025-10-19 21:11:20,770 - scripts.sync_manager - INFO - Processing 1 pending sync logs sequentially...
2025-10-19 21:11:20,770 - scripts.sync_manager - INFO - Attempting to process log ID 1: Table `SystemSettings`, Type `UPDATE`, Record ID `1`.
2025-10-19 21:11:20,771 - scripts.sync_manager - DEBUG - Log ID 1 details: {'id': 1, 'sync_time': '2025-10-19T21:03:29.382180', 'table_name': 'SystemSettings', 'change_type': 'UPDATE', 'record_id': 1, 'change_data': {'systemSettings': {'companyAddress': '123 Jewelry Street, Mumbai, Maharashtra 400001', 'companyEmail': 'info@siriartjewellery.com', 'companyName': 'SIRI ART JEWELLERY', 'companyPhone': '+91 98765 43210', 'gstin': '27AAFCV2449G1Z7', 'id': 1, 'taxPercentage': 10}, 'billFormats': {'A4': {'height': 297, 'margins': {'bottom': 20, 'left': 20, 'right': 20, 'top': 20}, 'unit': 'mm', 'width': 210}, 'A5': {'height': 210, 'margins': {'bottom': 15, 'left': 15, 'right': 15, 'top': 15}, 'unit': 'mm', 'width': 148}, 'Custom': {'height': 297, 'margins': {'bottom': 20, 'left': 20, 'right': 20, 'top': 20}, 'unit': 'mm', 'width': 210}, 'Thermal_58mm': {'height': 'auto', 'margins': {'bottom': 3, 'left': 3, 'right': 3, 'top': 3}, 'unit': 'mm', 'width': 58}, 'Thermal_80mm': {'height': 'auto', 'margins': {'bottom': 5, 'left': 5, 'right': 5, 'top': 5}, 'unit': 'mm', 'width': 80}}, 'storeFormats': {}}, 'status': 'pending', 'retry_count': 0, 'last_retry': None, 'error_message': None, 'created_at': '2025-10-19T21:03:29.382180'}
2025-10-19 21:11:21,176 - scripts.sync_manager - DEBUG - Attempting UPDATE operation on table `SystemSettings` for record ID: 1
2025-10-19 21:11:21,210 - scripts.sync_manager - DEBUG - Table `SystemSettings` columns: ['id', 'gstin', 'taxPercentage', 'companyName', 'companyAddress', 'companyPhone', 'companyEmail']
2025-10-19 21:11:21,210 - scripts.sync_manager - DEBUG - Filtered data for UPDATE on `SystemSettings`: {}
2025-10-19 21:11:21,210 - scripts.sync_manager - DEBUG - Added record_id 1 to filtered_data for SystemSettings.
2025-10-19 21:11:21,210 - scripts.sync_manager - DEBUG - Executing UPSERT query for `SystemSettings`: 
                        INSERT INTO `SystemSettings` (`id`)
                        VALUES (%s)
                        ON DUPLICATE KEY UPDATE `id` = VALUES(`id`)
                         with values: [1]
2025-10-19 21:11:21,250 - scripts.sync_manager - DEBUG - Handling related tables for SystemSettings with record ID: 1 and change data: {'systemSettings': {'companyAddress': '123 Jewelry Street, Mumbai, Maharashtra 400001', 'companyEmail': 'info@siriartjewellery.com', 'companyName': 'SIRI ART JEWELLERY', 'companyPhone': '+91 98765 43210', 'gstin': '27AAFCV2449G1Z7', 'id': 1, 'taxPercentage': 10}, 'billFormats': {'A4': {'height': 297, 'margins': {'bottom': 20, 'left': 20, 'right': 20, 'top': 20}, 'unit': 'mm', 'width': 210}, 'A5': {'height': 210, 'margins': {'bottom': 15, 'left': 15, 'right': 15, 'top': 15}, 'unit': 'mm', 'width': 148}, 'Custom': {'height': 297, 'margins': {'bottom': 20, 'left': 20, 'right': 20, 'top': 20}, 'unit': 'mm', 'width': 210}, 'Thermal_58mm': {'height': 'auto', 'margins': {'bottom': 3, 'left': 3, 'right': 3, 'top': 3}, 'unit': 'mm', 'width': 58}, 'Thermal_80mm': {'height': 'auto', 'margins': {'bottom': 5, 'left': 5, 'right': 5, 'top': 5}, 'unit': 'mm', 'width': 80}}, 'storeFormats': {}}
2025-10-19 21:11:21,250 - scripts.sync_manager - INFO - UPDATE operation on table `SystemSettings` for record ID: 1 successful.
2025-10-19 21:11:21,290 - scripts.sync_manager - DEBUG - Transaction committed for UPDATE on `SystemSettings` for record ID: 1.
2025-10-19 21:11:21,467 - scripts.sync_manager - DEBUG - Log ID 1 marked as 'completed'.
2025-10-19 21:11:21,484 - scripts.sync_manager - INFO - Logged sync event: SystemSettings_update_success - completed
2025-10-19 21:11:21,484 - scripts.sync_manager - INFO - Successfully processed log ID 1.
2025-10-19 21:11:21,486 - scripts.sync_manager - INFO - Finished processing pending logs. Processed: 1, Failed: 0.
2025-10-19 21:11:21,486 - scripts.sync_manager - INFO - Push sync result: {'status': 'success', 'message': 'Processed 1 logs, 0 failed', 'processed': 1, 'failed': 0}
2025-10-19 21:11:21,874 - scripts.sync_manager - INFO - Starting pull from MySQL sync_table. Last sync timestamp: None (fetching last 1 day)
2025-10-19 21:11:21,921 - scripts.sync_manager - INFO - No new entries found in MySQL sync_table.
2025-10-19 21:11:22,108 - scripts.sync_manager - INFO - Pull sync result: {'status': 'success', 'message': 'No new entries', 'pulled': 0}
2025-10-19 21:11:22,117 - scripts.sync_manager - INFO - Logged sync event: scheduled_sync - completed
2025-10-19 21:11:22,117 - scripts.sync_manager - INFO - Scheduled sync operation completed successfully.
2025-10-19 21:11:22,120 - scripts.sync_manager - INFO - No failed logs to retry.
2025-10-19 21:17:47,050 - scripts.sync_manager - INFO - Initiating scheduled sync operation.
2025-10-19 21:17:47,050 - scripts.sync_manager - INFO - No pending sync logs to process.
2025-10-19 21:17:47,050 - scripts.sync_manager - INFO - Push sync result: {'status': 'success', 'message': 'No pending logs', 'processed': 0, 'failed': 0}
2025-10-19 21:17:47,452 - scripts.sync_manager - INFO - Starting pull from MySQL sync_table. Last sync timestamp: None (fetching last 1 day)
2025-10-19 21:17:47,495 - scripts.sync_manager - INFO - No new entries found in MySQL sync_table.
2025-10-19 21:17:47,683 - scripts.sync_manager - INFO - Pull sync result: {'status': 'success', 'message': 'No new entries', 'pulled': 0}
2025-10-19 21:17:47,716 - scripts.sync_manager - INFO - Logged sync event: scheduled_sync - completed
2025-10-19 21:17:47,716 - scripts.sync_manager - INFO - Scheduled sync operation completed successfully.
2025-10-19 21:17:47,716 - scripts.sync_manager - INFO - No failed logs to retry.
2025-10-19 21:21:36,136 - scripts.sync_manager - INFO - Starting background sync scheduler setup.
2025-10-19 21:21:36,138 - scripts.sync_manager - DEBUG - Scheduled tasks: scheduled_sync (15min), retry_failed_logs (15min), cleanup_old_logs (daily 02:00), _cleanup_log_files (daily 02:00).
2025-10-19 21:21:36,140 - scripts.sync_manager - INFO - Background sync scheduler thread started.
2025-10-19 21:21:36,140 - scripts.sync_manager - INFO - Background sync process started.
2025-10-19 21:21:36,141 - scripts.sync_manager - INFO - Performing initial scheduled sync run.
2025-10-19 21:21:36,143 - scripts.sync_manager - INFO - Initiating scheduled sync operation.
2025-10-19 21:21:36,145 - scripts.sync_manager - INFO - No pending sync logs to process.
2025-10-19 21:21:36,151 - scripts.sync_manager - INFO - Push sync result: {'status': 'success', 'message': 'No pending logs', 'processed': 0, 'failed': 0}
2025-10-19 21:21:36,299 - scripts.sync_manager - INFO - Starting pull from MySQL sync_table. Last sync timestamp: None (fetching last 1 day)
2025-10-19 21:21:36,339 - scripts.sync_manager - INFO - No new entries found in MySQL sync_table.
2025-10-19 21:21:36,529 - scripts.sync_manager - INFO - Pull sync result: {'status': 'success', 'message': 'No new entries', 'pulled': 0}
2025-10-19 21:21:36,534 - scripts.sync_manager - INFO - Logged sync event: scheduled_sync - completed
2025-10-19 21:21:36,534 - scripts.sync_manager - INFO - Scheduled sync operation completed successfully.
2025-10-19 21:21:39,348 - scripts.sync_manager - INFO - Starting background sync scheduler setup.
2025-10-19 21:21:39,348 - scripts.sync_manager - DEBUG - Scheduled tasks: scheduled_sync (15min), retry_failed_logs (15min), cleanup_old_logs (daily 02:00), _cleanup_log_files (daily 02:00).
2025-10-19 21:21:39,348 - scripts.sync_manager - INFO - Background sync scheduler thread started.
2025-10-19 21:21:39,348 - scripts.sync_manager - INFO - Background sync process started.
2025-10-19 21:21:39,348 - scripts.sync_manager - INFO - Performing initial scheduled sync run.
2025-10-19 21:21:39,348 - scripts.sync_manager - INFO - Initiating scheduled sync operation.
2025-10-19 21:21:39,359 - scripts.sync_manager - INFO - No pending sync logs to process.
2025-10-19 21:21:39,362 - scripts.sync_manager - INFO - Push sync result: {'status': 'success', 'message': 'No pending logs', 'processed': 0, 'failed': 0}
2025-10-19 21:21:39,509 - scripts.sync_manager - INFO - Starting pull from MySQL sync_table. Last sync timestamp: None (fetching last 1 day)
2025-10-19 21:21:39,551 - scripts.sync_manager - INFO - No new entries found in MySQL sync_table.
2025-10-19 21:21:39,729 - scripts.sync_manager - INFO - Pull sync result: {'status': 'success', 'message': 'No new entries', 'pulled': 0}
2025-10-19 21:21:39,766 - scripts.sync_manager - INFO - Logged sync event: scheduled_sync - completed
2025-10-19 21:21:39,766 - scripts.sync_manager - INFO - Scheduled sync operation completed successfully.
2025-10-19 21:22:23,955 - scripts.sync_manager - INFO - Starting background sync scheduler setup.
2025-10-19 21:22:23,957 - scripts.sync_manager - DEBUG - Scheduled tasks: scheduled_sync (15min), retry_failed_logs (15min), cleanup_old_logs (daily 02:00), _cleanup_log_files (daily 02:00).
2025-10-19 21:22:23,957 - scripts.sync_manager - INFO - Background sync scheduler thread started.
2025-10-19 21:22:23,957 - scripts.sync_manager - INFO - Background sync process started.
2025-10-19 21:22:23,957 - scripts.sync_manager - INFO - Performing initial scheduled sync run.
2025-10-19 21:22:23,957 - scripts.sync_manager - INFO - Initiating scheduled sync operation.
2025-10-19 21:22:23,965 - scripts.sync_manager - INFO - No pending sync logs to process.
2025-10-19 21:22:23,971 - scripts.sync_manager - INFO - Push sync result: {'status': 'success', 'message': 'No pending logs', 'processed': 0, 'failed': 0}
2025-10-19 21:22:24,120 - scripts.sync_manager - INFO - Starting pull from MySQL sync_table. Last sync timestamp: None (fetching last 1 day)
2025-10-19 21:22:24,155 - scripts.sync_manager - INFO - No new entries found in MySQL sync_table.
2025-10-19 21:22:24,352 - scripts.sync_manager - INFO - Pull sync result: {'status': 'success', 'message': 'No new entries', 'pulled': 0}
2025-10-19 21:22:24,378 - scripts.sync_manager - INFO - Logged sync event: scheduled_sync - completed
2025-10-19 21:22:24,384 - scripts.sync_manager - INFO - Scheduled sync operation completed successfully.
2025-10-19 21:24:13,745 - scripts.sync_manager - INFO - Starting background sync scheduler setup.
2025-10-19 21:24:13,745 - scripts.sync_manager - DEBUG - Scheduled tasks: scheduled_sync (15min), retry_failed_logs (15min), cleanup_old_logs (daily 02:00), _cleanup_log_files (daily 02:00).
2025-10-19 21:24:13,745 - scripts.sync_manager - INFO - Background sync scheduler thread started.
2025-10-19 21:24:13,745 - scripts.sync_manager - INFO - Background sync process started.
2025-10-19 21:24:13,745 - scripts.sync_manager - INFO - Performing initial scheduled sync run.
2025-10-19 21:24:13,752 - scripts.sync_manager - INFO - Initiating scheduled sync operation.
2025-10-19 21:24:13,754 - scripts.sync_manager - INFO - No pending sync logs to process.
2025-10-19 21:24:13,754 - scripts.sync_manager - INFO - Push sync result: {'status': 'success', 'message': 'No pending logs', 'processed': 0, 'failed': 0}
2025-10-19 21:24:13,910 - scripts.sync_manager - INFO - Starting pull from MySQL sync_table. Last sync timestamp: None (fetching last 1 day)
2025-10-19 21:24:13,939 - scripts.sync_manager - INFO - No new entries found in MySQL sync_table.
2025-10-19 21:24:14,137 - scripts.sync_manager - INFO - Pull sync result: {'status': 'success', 'message': 'No new entries', 'pulled': 0}
2025-10-19 21:24:14,163 - scripts.sync_manager - INFO - Logged sync event: scheduled_sync - completed
2025-10-19 21:24:14,166 - scripts.sync_manager - INFO - Scheduled sync operation completed successfully.
2025-10-19 21:24:28,972 - scripts.sync_manager - INFO - Starting background sync scheduler setup.
2025-10-19 21:24:28,972 - scripts.sync_manager - DEBUG - Scheduled tasks: scheduled_sync (15min), retry_failed_logs (15min), cleanup_old_logs (daily 02:00), _cleanup_log_files (daily 02:00).
2025-10-19 21:24:28,972 - scripts.sync_manager - INFO - Background sync scheduler thread started.
2025-10-19 21:24:28,972 - scripts.sync_manager - INFO - Background sync process started.
2025-10-19 21:24:28,972 - scripts.sync_manager - INFO - Performing initial scheduled sync run.
2025-10-19 21:24:28,972 - scripts.sync_manager - INFO - Initiating scheduled sync operation.
2025-10-19 21:24:28,972 - scripts.sync_manager - INFO - No pending sync logs to process.
2025-10-19 21:24:28,972 - scripts.sync_manager - INFO - Push sync result: {'status': 'success', 'message': 'No pending logs', 'processed': 0, 'failed': 0}
2025-10-19 21:24:29,097 - scripts.sync_manager - INFO - Starting pull from MySQL sync_table. Last sync timestamp: None (fetching last 1 day)
2025-10-19 21:24:29,139 - scripts.sync_manager - INFO - No new entries found in MySQL sync_table.
2025-10-19 21:24:29,316 - scripts.sync_manager - INFO - Pull sync result: {'status': 'success', 'message': 'No new entries', 'pulled': 0}
2025-10-19 21:24:29,331 - scripts.sync_manager - INFO - Logged sync event: scheduled_sync - completed
2025-10-19 21:24:29,331 - scripts.sync_manager - INFO - Scheduled sync operation completed successfully.
2025-10-19 21:36:36,551 - scripts.sync_manager - INFO - Initiating scheduled sync operation.
2025-10-19 21:36:36,552 - scripts.sync_manager - INFO - No pending sync logs to process.
2025-10-19 21:36:36,552 - scripts.sync_manager - INFO - Push sync result: {'status': 'success', 'message': 'No pending logs', 'processed': 0, 'failed': 0}
2025-10-19 21:36:36,956 - scripts.sync_manager - INFO - Starting pull from MySQL sync_table. Last sync timestamp: None (fetching last 1 day)
2025-10-19 21:36:36,992 - scripts.sync_manager - INFO - No new entries found in MySQL sync_table.
2025-10-19 21:36:37,159 - scripts.sync_manager - INFO - Pull sync result: {'status': 'success', 'message': 'No new entries', 'pulled': 0}
2025-10-19 21:36:37,183 - scripts.sync_manager - INFO - Logged sync event: scheduled_sync - completed
2025-10-19 21:36:37,183 - scripts.sync_manager - INFO - Scheduled sync operation completed successfully.
2025-10-19 21:36:37,183 - scripts.sync_manager - INFO - No failed logs to retry.
2025-10-19 21:39:29,340 - scripts.sync_manager - INFO - Initiating scheduled sync operation.
2025-10-19 21:39:29,340 - scripts.sync_manager - INFO - No pending sync logs to process.
2025-10-19 21:39:29,340 - scripts.sync_manager - INFO - Push sync result: {'status': 'success', 'message': 'No pending logs', 'processed': 0, 'failed': 0}
2025-10-19 21:39:29,712 - scripts.sync_manager - INFO - Starting pull from MySQL sync_table. Last sync timestamp: None (fetching last 1 day)
2025-10-19 21:39:29,749 - scripts.sync_manager - INFO - No new entries found in MySQL sync_table.
2025-10-19 21:39:29,925 - scripts.sync_manager - INFO - Pull sync result: {'status': 'success', 'message': 'No new entries', 'pulled': 0}
2025-10-19 21:39:29,940 - scripts.sync_manager - INFO - Logged sync event: scheduled_sync - completed
2025-10-19 21:39:29,941 - scripts.sync_manager - INFO - Scheduled sync operation completed successfully.
2025-10-19 21:39:29,941 - scripts.sync_manager - INFO - No failed logs to retry.
2025-10-19 21:39:51,845 - scripts.sync_manager - INFO - Starting background sync scheduler setup.
2025-10-19 21:39:51,845 - scripts.sync_manager - DEBUG - Scheduled tasks: scheduled_sync (15min), retry_failed_logs (15min), cleanup_old_logs (daily 02:00), _cleanup_log_files (daily 02:00).
2025-10-19 21:39:51,845 - scripts.sync_manager - INFO - Background sync scheduler thread started.
2025-10-19 21:39:51,845 - scripts.sync_manager - INFO - Background sync process started.
2025-10-19 21:39:51,845 - scripts.sync_manager - INFO - Performing initial scheduled sync run.
2025-10-19 21:39:51,845 - scripts.sync_manager - INFO - Initiating scheduled sync operation.
2025-10-19 21:39:51,845 - scripts.sync_manager - INFO - No pending sync logs to process.
2025-10-19 21:39:51,851 - scripts.sync_manager - INFO - Push sync result: {'status': 'success', 'message': 'No pending logs', 'processed': 0, 'failed': 0}
2025-10-19 21:39:51,962 - scripts.sync_manager - INFO - Starting pull from MySQL sync_table. Last sync timestamp: None (fetching last 1 day)
2025-10-19 21:39:52,002 - scripts.sync_manager - INFO - No new entries found in MySQL sync_table.
2025-10-19 21:39:52,177 - scripts.sync_manager - INFO - Pull sync result: {'status': 'success', 'message': 'No new entries', 'pulled': 0}
2025-10-19 21:39:52,194 - scripts.sync_manager - INFO - Logged sync event: scheduled_sync - completed
2025-10-19 21:39:52,194 - scripts.sync_manager - INFO - Scheduled sync operation completed successfully.
2025-10-19 21:45:21,773 - backend.scripts.sync_manager - INFO - No pending sync logs to process.
2025-10-19 21:45:47,586 - scripts.sync_manager - INFO - Starting background sync scheduler setup.
2025-10-19 21:45:47,586 - scripts.sync_manager - DEBUG - Scheduled tasks: scheduled_sync (15min), retry_failed_logs (15min), cleanup_old_logs (daily 02:00), _cleanup_log_files (daily 02:00).
2025-10-19 21:45:47,592 - scripts.sync_manager - INFO - Background sync scheduler thread started.
2025-10-19 21:45:47,592 - scripts.sync_manager - INFO - Background sync process started.
2025-10-19 21:45:47,592 - scripts.sync_manager - INFO - Performing initial scheduled sync run.
2025-10-19 21:45:47,592 - scripts.sync_manager - INFO - Initiating scheduled sync operation.
2025-10-19 21:45:47,595 - scripts.sync_manager - INFO - No pending sync logs to process.
2025-10-19 21:45:47,598 - scripts.sync_manager - INFO - Push sync result: {'status': 'success', 'message': 'No pending logs', 'processed': 0, 'failed': 0}
2025-10-19 21:45:47,708 - scripts.sync_manager - INFO - Starting pull from MySQL sync_table. Last sync timestamp: None (fetching last 1 day)
2025-10-19 21:45:47,747 - scripts.sync_manager - INFO - No new entries found in MySQL sync_table.
2025-10-19 21:45:47,920 - scripts.sync_manager - INFO - Pull sync result: {'status': 'success', 'message': 'No new entries', 'pulled': 0}
2025-10-19 21:45:47,943 - scripts.sync_manager - INFO - Logged sync event: scheduled_sync - completed
2025-10-19 21:45:47,943 - scripts.sync_manager - INFO - Scheduled sync operation completed successfully.
2025-10-19 21:47:25,143 - backend.scripts.sync_manager - INFO - Logged CRUD operation: Products - CREATE - 0532c207-53ab-4ce4-be26-afe982042d36
2025-10-19 21:47:25,153 - backend.scripts.sync_manager - INFO - Logged sync event: Products_create_logged - pending
2025-10-19 21:47:25,169 - backend.scripts.sync_manager - INFO - Processing 1 pending sync logs sequentially...
2025-10-19 21:47:25,169 - backend.scripts.sync_manager - INFO - Attempting to process log ID 2: Table `Products`, Type `CREATE`, Record ID `0532c207-53ab-4ce4-be26-afe982042d36`.
2025-10-19 21:47:25,169 - backend.scripts.sync_manager - DEBUG - Log ID 2 details: {'id': 2, 'sync_time': '2025-10-19T21:47:25.143289', 'table_name': 'Products', 'change_type': 'CREATE', 'record_id': '0532c207-53ab-4ce4-be26-afe982042d36', 'change_data': {'id': '0532c207-53ab-4ce4-be26-afe982042d36', 'name': 'Test Product 0532c207', 'price': 123.45, 'updatedAt': '2025-10-19T21:47:25.143289'}, 'status': 'pending', 'retry_count': 0, 'last_retry': None, 'error_message': None, 'created_at': '2025-10-19T21:47:25.143289'}
2025-10-19 21:47:26,748 - backend.scripts.sync_manager - DEBUG - Attempting CREATE operation on table `Products` for record ID: 0532c207-53ab-4ce4-be26-afe982042d36
2025-10-19 21:47:26,785 - backend.scripts.sync_manager - DEBUG - Table `Products` columns: ['id', 'name', 'price', 'stock', 'assignedStoreId', 'selling_price', 'createdAt', 'updatedAt']
2025-10-19 21:47:26,786 - backend.scripts.sync_manager - DEBUG - Filtered data for CREATE on `Products`: {'id': '0532c207-53ab-4ce4-be26-afe982042d36', 'name': 'Test Product 0532c207', 'price': 123.45, 'updatedAt': '2025-10-19T21:47:25.143289'}
2025-10-19 21:47:26,787 - backend.scripts.sync_manager - DEBUG - Executing UPSERT query for `Products`: 
                        INSERT INTO `Products` (`id`, `name`, `price`, `updatedAt`)
                        VALUES (%s, %s, %s, %s)
                        ON DUPLICATE KEY UPDATE `id` = VALUES(`id`), `name` = VALUES(`name`), `price` = VALUES(`price`), `updatedAt` = VALUES(`updatedAt`)
                         with values: ['0532c207-53ab-4ce4-be26-afe982042d36', 'Test Product 0532c207', 123.45, '2025-10-19T21:47:25.143289']
2025-10-19 21:47:26,827 - backend.scripts.sync_manager - DEBUG - Handling related tables for Products with record ID: 0532c207-53ab-4ce4-be26-afe982042d36 and change data: {'id': '0532c207-53ab-4ce4-be26-afe982042d36', 'name': 'Test Product 0532c207', 'price': 123.45, 'updatedAt': '2025-10-19T21:47:25.143289'}
2025-10-19 21:47:26,827 - backend.scripts.sync_manager - INFO - CREATE operation on table `Products` for record ID: 0532c207-53ab-4ce4-be26-afe982042d36 successful.
2025-10-19 21:47:26,865 - backend.scripts.sync_manager - DEBUG - Transaction committed for CREATE on `Products` for record ID: 0532c207-53ab-4ce4-be26-afe982042d36.
2025-10-19 21:47:27,036 - backend.scripts.sync_manager - DEBUG - Log ID 2 marked as 'completed'.
2025-10-19 21:47:27,071 - backend.scripts.sync_manager - INFO - Logged sync event: Products_create_success - completed
2025-10-19 21:47:27,076 - backend.scripts.sync_manager - INFO - Successfully processed log ID 2.
2025-10-19 21:47:27,076 - backend.scripts.sync_manager - INFO - Finished processing pending logs. Processed: 1, Failed: 0.
2025-10-19 21:47:44,679 - scripts.sync_manager - INFO - Starting background sync scheduler setup.
2025-10-19 21:47:44,681 - scripts.sync_manager - DEBUG - Scheduled tasks: scheduled_sync (15min), retry_failed_logs (15min), cleanup_old_logs (daily 02:00), _cleanup_log_files (daily 02:00).
2025-10-19 21:47:44,683 - scripts.sync_manager - INFO - Background sync scheduler thread started.
2025-10-19 21:47:44,683 - scripts.sync_manager - INFO - Background sync process started.
2025-10-19 21:47:44,684 - scripts.sync_manager - INFO - Performing initial scheduled sync run.
2025-10-19 21:47:44,685 - scripts.sync_manager - INFO - Initiating scheduled sync operation.
2025-10-19 21:47:44,710 - scripts.sync_manager - INFO - No pending sync logs to process.
2025-10-19 21:47:44,711 - scripts.sync_manager - INFO - Push sync result: {'status': 'success', 'message': 'No pending logs', 'processed': 0, 'failed': 0}
2025-10-19 21:47:44,824 - scripts.sync_manager - INFO - Starting pull from MySQL sync_table. Last sync timestamp: None (fetching last 1 day)
2025-10-19 21:47:44,862 - scripts.sync_manager - INFO - No new entries found in MySQL sync_table.
2025-10-19 21:47:45,042 - scripts.sync_manager - INFO - Pull sync result: {'status': 'success', 'message': 'No new entries', 'pulled': 0}
2025-10-19 21:47:45,061 - scripts.sync_manager - INFO - Logged sync event: scheduled_sync - completed
2025-10-19 21:47:45,062 - scripts.sync_manager - INFO - Scheduled sync operation completed successfully.
2025-10-19 21:51:37,193 - scripts.sync_manager - INFO - Initiating scheduled sync operation.
2025-10-19 21:51:37,196 - scripts.sync_manager - INFO - No pending sync logs to process.
2025-10-19 21:51:37,197 - scripts.sync_manager - INFO - Push sync result: {'status': 'success', 'message': 'No pending logs', 'processed': 0, 'failed': 0}
2025-10-19 21:51:37,625 - scripts.sync_manager - INFO - Starting pull from MySQL sync_table. Last sync timestamp: None (fetching last 1 day)
2025-10-19 21:51:37,673 - scripts.sync_manager - INFO - No new entries found in MySQL sync_table.
2025-10-19 21:51:37,862 - scripts.sync_manager - INFO - Pull sync result: {'status': 'success', 'message': 'No new entries', 'pulled': 0}
2025-10-19 21:51:37,894 - scripts.sync_manager - INFO - Logged sync event: scheduled_sync - completed
2025-10-19 21:51:37,894 - scripts.sync_manager - INFO - Scheduled sync operation completed successfully.
2025-10-19 21:51:37,903 - scripts.sync_manager - INFO - No failed logs to retry.
2025-10-19 21:54:08,947 - scripts.sync_manager - INFO - Starting background sync scheduler setup.
2025-10-19 21:54:08,949 - scripts.sync_manager - DEBUG - Scheduled tasks: scheduled_sync (15min), retry_failed_logs (15min), cleanup_old_logs (daily 02:00), _cleanup_log_files (daily 02:00).
2025-10-19 21:54:08,949 - scripts.sync_manager - INFO - Background sync scheduler thread started.
2025-10-19 21:54:08,949 - scripts.sync_manager - INFO - Background sync process started.
2025-10-19 21:54:08,949 - scripts.sync_manager - INFO - Performing initial scheduled sync run.
2025-10-19 21:54:08,949 - scripts.sync_manager - INFO - Initiating scheduled sync operation.
2025-10-19 21:54:08,949 - scripts.sync_manager - INFO - No pending sync logs to process.
2025-10-19 21:54:08,956 - scripts.sync_manager - INFO - Push sync result: {'status': 'success', 'message': 'No pending logs', 'processed': 0, 'failed': 0}
2025-10-19 21:54:09,074 - scripts.sync_manager - INFO - Starting pull from MySQL sync_table. Last sync timestamp: None (fetching last 1 day)
2025-10-19 21:54:09,112 - scripts.sync_manager - INFO - No new entries found in MySQL sync_table.
2025-10-19 21:54:09,300 - scripts.sync_manager - INFO - Pull sync result: {'status': 'success', 'message': 'No new entries', 'pulled': 0}
2025-10-19 21:54:09,304 - scripts.sync_manager - INFO - Logged sync event: scheduled_sync - completed
2025-10-19 21:54:09,304 - scripts.sync_manager - INFO - Scheduled sync operation completed successfully.
2025-10-19 21:55:44,826 - backend.scripts.sync_manager - INFO - Logged CRUD operation: Products - CREATE - 970b7698-5db9-4304-9c47-ef36c939d576
2025-10-19 21:55:44,846 - backend.scripts.sync_manager - INFO - Logged sync event: Products_create_logged - pending
2025-10-19 21:55:44,857 - backend.scripts.sync_manager - INFO - Processing 1 pending sync logs sequentially...
2025-10-19 21:55:44,857 - backend.scripts.sync_manager - INFO - Attempting to process log ID 3: Table `Products`, Type `CREATE`, Record ID `970b7698-5db9-4304-9c47-ef36c939d576`.
2025-10-19 21:55:44,859 - backend.scripts.sync_manager - DEBUG - Log ID 3 details: {'id': 3, 'sync_time': '2025-10-19T21:55:44.826202', 'table_name': 'Products', 'change_type': 'CREATE', 'record_id': '970b7698-5db9-4304-9c47-ef36c939d576', 'change_data': {'id': '970b7698-5db9-4304-9c47-ef36c939d576', 'name': 'Test Product 970b7698', 'price': 123.45, 'updatedAt': '2025-10-19T21:55:44.826202'}, 'status': 'pending', 'retry_count': 0, 'last_retry': None, 'error_message': None, 'created_at': '2025-10-19T21:55:44.826202'}
2025-10-19 21:55:46,453 - backend.scripts.sync_manager - DEBUG - Attempting CREATE operation on table `Products` for record ID: 970b7698-5db9-4304-9c47-ef36c939d576
2025-10-19 21:55:46,506 - backend.scripts.sync_manager - DEBUG - Table `Products` columns: ['id', 'name', 'price', 'stock', 'assignedStoreId', 'selling_price', 'createdAt', 'updatedAt']
2025-10-19 21:55:46,508 - backend.scripts.sync_manager - DEBUG - Filtered data for CREATE on `Products`: {'id': '970b7698-5db9-4304-9c47-ef36c939d576', 'name': 'Test Product 970b7698', 'price': 123.45, 'updatedAt': '2025-10-19T21:55:44.826202'}
2025-10-19 21:55:46,510 - backend.scripts.sync_manager - DEBUG - Executing UPSERT query for `Products`: 
                        INSERT INTO `Products` (`id`, `name`, `price`, `updatedAt`)
                        VALUES (%s, %s, %s, %s)
                        ON DUPLICATE KEY UPDATE `id` = VALUES(`id`), `name` = VALUES(`name`), `price` = VALUES(`price`), `updatedAt` = VALUES(`updatedAt`)
                         with values: ['970b7698-5db9-4304-9c47-ef36c939d576', 'Test Product 970b7698', 123.45, '2025-10-19T21:55:44.826202']
2025-10-19 21:55:46,549 - backend.scripts.sync_manager - DEBUG - Handling related tables for Products with record ID: 970b7698-5db9-4304-9c47-ef36c939d576 and change data: {'id': '970b7698-5db9-4304-9c47-ef36c939d576', 'name': 'Test Product 970b7698', 'price': 123.45, 'updatedAt': '2025-10-19T21:55:44.826202'}
2025-10-19 21:55:46,549 - backend.scripts.sync_manager - INFO - CREATE operation on table `Products` for record ID: 970b7698-5db9-4304-9c47-ef36c939d576 successful.
2025-10-19 21:55:46,585 - backend.scripts.sync_manager - DEBUG - Transaction committed for CREATE on `Products` for record ID: 970b7698-5db9-4304-9c47-ef36c939d576.
2025-10-19 21:55:46,780 - backend.scripts.sync_manager - DEBUG - Log ID 3 marked as 'completed'.
2025-10-19 21:55:46,813 - backend.scripts.sync_manager - INFO - Logged sync event: Products_create_success - completed
2025-10-19 21:55:46,813 - backend.scripts.sync_manager - INFO - Successfully processed log ID 3.
2025-10-19 21:55:46,816 - backend.scripts.sync_manager - INFO - Finished processing pending logs. Processed: 1, Failed: 0.
2025-10-19 21:56:02,121 - scripts.sync_manager - INFO - Starting background sync scheduler setup.
2025-10-19 21:56:02,121 - scripts.sync_manager - DEBUG - Scheduled tasks: scheduled_sync (15min), retry_failed_logs (15min), cleanup_old_logs (daily 02:00), _cleanup_log_files (daily 02:00).
2025-10-19 21:56:02,123 - scripts.sync_manager - INFO - Background sync scheduler thread started.
2025-10-19 21:56:02,123 - scripts.sync_manager - INFO - Background sync process started.
2025-10-19 21:56:02,123 - scripts.sync_manager - INFO - Performing initial scheduled sync run.
2025-10-19 21:56:02,128 - scripts.sync_manager - INFO - Initiating scheduled sync operation.
2025-10-19 21:56:02,177 - scripts.sync_manager - INFO - No pending sync logs to process.
2025-10-19 21:56:02,178 - scripts.sync_manager - INFO - Push sync result: {'status': 'success', 'message': 'No pending logs', 'processed': 0, 'failed': 0}
2025-10-19 21:56:02,284 - scripts.sync_manager - INFO - Starting pull from MySQL sync_table. Last sync timestamp: None (fetching last 1 day)
2025-10-19 21:56:02,326 - scripts.sync_manager - INFO - No new entries found in MySQL sync_table.
2025-10-19 21:56:02,501 - scripts.sync_manager - INFO - Pull sync result: {'status': 'success', 'message': 'No new entries', 'pulled': 0}
2025-10-19 21:56:02,537 - scripts.sync_manager - INFO - Logged sync event: scheduled_sync - completed
2025-10-19 21:56:02,538 - scripts.sync_manager - INFO - Scheduled sync operation completed successfully.
2025-10-19 21:57:18,147 - backend.scripts.sync_manager - INFO - Logged CRUD operation: Products - CREATE - 0405f678-4542-40cb-98d8-dcb815b52eb0
2025-10-19 21:57:18,149 - backend.scripts.sync_manager - INFO - Logged sync event: Products_create_logged - pending
2025-10-19 21:57:18,170 - backend.scripts.sync_manager - INFO - Processing 1 pending sync logs sequentially...
2025-10-19 21:57:18,172 - backend.scripts.sync_manager - INFO - Attempting to process log ID 4: Table `Products`, Type `CREATE`, Record ID `0405f678-4542-40cb-98d8-dcb815b52eb0`.
2025-10-19 21:57:18,172 - backend.scripts.sync_manager - DEBUG - Log ID 4 details: {'id': 4, 'sync_time': '2025-10-19T21:57:18.147536', 'table_name': 'Products', 'change_type': 'CREATE', 'record_id': '0405f678-4542-40cb-98d8-dcb815b52eb0', 'change_data': {'id': '0405f678-4542-40cb-98d8-dcb815b52eb0', 'name': 'Test Product 0405f678', 'price': 123.45, 'updatedAt': '2025-10-19T21:57:18.147536'}, 'status': 'pending', 'retry_count': 0, 'last_retry': None, 'error_message': None, 'created_at': '2025-10-19T21:57:18.147536'}
2025-10-19 21:57:19,759 - backend.scripts.sync_manager - DEBUG - Attempting CREATE operation on table `Products` for record ID: 0405f678-4542-40cb-98d8-dcb815b52eb0
2025-10-19 21:57:19,788 - backend.scripts.sync_manager - DEBUG - Table `Products` columns: ['id', 'name', 'price', 'stock', 'assignedStoreId', 'selling_price', 'createdAt', 'updatedAt']
2025-10-19 21:57:19,788 - backend.scripts.sync_manager - DEBUG - Filtered data for CREATE on `Products`: {'id': '0405f678-4542-40cb-98d8-dcb815b52eb0', 'name': 'Test Product 0405f678', 'price': 123.45, 'updatedAt': '2025-10-19T21:57:18.147536'}
2025-10-19 21:57:19,788 - backend.scripts.sync_manager - DEBUG - Executing UPSERT query for `Products`: 
                        INSERT INTO `Products` (`id`, `name`, `price`, `updatedAt`)
                        VALUES (%s, %s, %s, %s)
                        ON DUPLICATE KEY UPDATE `id` = VALUES(`id`), `name` = VALUES(`name`), `price` = VALUES(`price`), `updatedAt` = VALUES(`updatedAt`)
                         with values: ['0405f678-4542-40cb-98d8-dcb815b52eb0', 'Test Product 0405f678', 123.45, '2025-10-19T21:57:18.147536']
2025-10-19 21:57:19,833 - backend.scripts.sync_manager - DEBUG - Handling related tables for Products with record ID: 0405f678-4542-40cb-98d8-dcb815b52eb0 and change data: {'id': '0405f678-4542-40cb-98d8-dcb815b52eb0', 'name': 'Test Product 0405f678', 'price': 123.45, 'updatedAt': '2025-10-19T21:57:18.147536'}
2025-10-19 21:57:19,833 - backend.scripts.sync_manager - INFO - CREATE operation on table `Products` for record ID: 0405f678-4542-40cb-98d8-dcb815b52eb0 successful.
2025-10-19 21:57:19,870 - backend.scripts.sync_manager - DEBUG - Transaction committed for CREATE on `Products` for record ID: 0405f678-4542-40cb-98d8-dcb815b52eb0.
2025-10-19 21:57:20,052 - backend.scripts.sync_manager - DEBUG - Log ID 4 marked as 'completed'.
2025-10-19 21:57:20,080 - backend.scripts.sync_manager - INFO - Logged sync event: Products_create_success - completed
2025-10-19 21:57:20,080 - backend.scripts.sync_manager - INFO - Successfully processed log ID 4.
2025-10-19 21:57:20,083 - backend.scripts.sync_manager - INFO - Finished processing pending logs. Processed: 1, Failed: 0.
2025-10-19 21:57:36,715 - scripts.sync_manager - INFO - Starting background sync scheduler setup.
2025-10-19 21:57:36,716 - scripts.sync_manager - DEBUG - Scheduled tasks: scheduled_sync (15min), retry_failed_logs (15min), cleanup_old_logs (daily 02:00), _cleanup_log_files (daily 02:00).
2025-10-19 21:57:36,716 - scripts.sync_manager - INFO - Background sync scheduler thread started.
2025-10-19 21:57:36,716 - scripts.sync_manager - INFO - Background sync process started.
2025-10-19 21:57:36,717 - scripts.sync_manager - INFO - Performing initial scheduled sync run.
2025-10-19 21:57:36,718 - scripts.sync_manager - INFO - Initiating scheduled sync operation.
2025-10-19 21:57:36,727 - scripts.sync_manager - INFO - No pending sync logs to process.
2025-10-19 21:57:36,728 - scripts.sync_manager - INFO - Push sync result: {'status': 'success', 'message': 'No pending logs', 'processed': 0, 'failed': 0}
2025-10-19 21:57:36,836 - scripts.sync_manager - INFO - Starting pull from MySQL sync_table. Last sync timestamp: None (fetching last 1 day)
2025-10-19 21:57:36,872 - scripts.sync_manager - INFO - No new entries found in MySQL sync_table.
2025-10-19 21:57:37,050 - scripts.sync_manager - INFO - Pull sync result: {'status': 'success', 'message': 'No new entries', 'pulled': 0}
2025-10-19 21:57:37,072 - scripts.sync_manager - INFO - Logged sync event: scheduled_sync - completed
2025-10-19 21:57:37,072 - scripts.sync_manager - INFO - Scheduled sync operation completed successfully.
2025-10-19 21:58:26,941 - scripts.sync_manager - INFO - Logged CRUD operation: SystemSettings - UPDATE - 1
2025-10-19 21:58:26,958 - scripts.sync_manager - INFO - Logged sync event: SystemSettings_update_logged - pending
2025-10-19 22:03:19,430 - scripts.sync_manager - INFO - Starting background sync scheduler setup.
2025-10-19 22:03:19,430 - scripts.sync_manager - DEBUG - Scheduled tasks: scheduled_sync (15min), retry_failed_logs (15min), cleanup_old_logs (daily 02:00), _cleanup_log_files (daily 02:00).
2025-10-19 22:03:19,430 - scripts.sync_manager - INFO - Background sync scheduler thread started.
2025-10-19 22:03:19,430 - scripts.sync_manager - INFO - Background sync process started.
2025-10-19 22:03:19,430 - scripts.sync_manager - INFO - Performing initial scheduled sync run.
2025-10-19 22:03:19,442 - scripts.sync_manager - INFO - Initiating scheduled sync operation.
2025-10-19 22:03:19,495 - scripts.sync_manager - INFO - Processing 1 pending sync logs sequentially...
2025-10-19 22:03:19,497 - scripts.sync_manager - INFO - Attempting to process log ID 5: Table `SystemSettings`, Type `UPDATE`, Record ID `1`.
2025-10-19 22:03:19,499 - scripts.sync_manager - DEBUG - Log ID 5 details: {'id': 5, 'sync_time': '2025-10-19T21:58:26.941001', 'table_name': 'SystemSettings', 'change_type': 'UPDATE', 'record_id': 1, 'change_data': {'systemSettings': {'companyAddress': '123 Jewelry Street, Mumbai, Maharashtra 400001', 'companyEmail': 'info@siriartjewellery.com', 'companyName': 'SIRI ART JEWELLERY', 'companyPhone': '+91 98765 43210', 'gstin': '27AAFCV2449G1Z7', 'id': 1, 'taxPercentage': 13.2}, 'billFormats': {'A4': {'height': 297, 'margins': {'bottom': 20, 'left': 20, 'right': 20, 'top': 20}, 'unit': 'mm', 'width': 210}, 'A5': {'height': 210, 'margins': {'bottom': 15, 'left': 15, 'right': 15, 'top': 15}, 'unit': 'mm', 'width': 148}, 'Custom': {'height': 297, 'margins': {'bottom': 20, 'left': 20, 'right': 20, 'top': 20}, 'unit': 'mm', 'width': 210}, 'Thermal_58mm': {'height': 'auto', 'margins': {'bottom': 3, 'left': 3, 'right': 3, 'top': 3}, 'unit': 'mm', 'width': 58}, 'Thermal_80mm': {'height': 'auto', 'margins': {'bottom': 5, 'left': 5, 'right': 5, 'top': 5}, 'unit': 'mm', 'width': 80}}, 'storeFormats': {}}, 'status': 'pending', 'retry_count': 0, 'last_retry': None, 'error_message': None, 'created_at': '2025-10-19T21:58:26.941001'}
2025-10-19 22:03:19,646 - scripts.sync_manager - DEBUG - Attempting UPDATE operation on table `SystemSettings` for record ID: 1
2025-10-19 22:03:19,684 - scripts.sync_manager - DEBUG - Table `SystemSettings` columns: ['id', 'gstin', 'taxPercentage', 'companyName', 'companyAddress', 'companyPhone', 'companyEmail']
2025-10-19 22:03:19,685 - scripts.sync_manager - DEBUG - Filtered data for UPDATE on `SystemSettings`: {}
2025-10-19 22:03:19,685 - scripts.sync_manager - DEBUG - Added record_id 1 to filtered_data for SystemSettings.
2025-10-19 22:03:19,686 - scripts.sync_manager - DEBUG - Executing UPSERT query for `SystemSettings`: 
                        INSERT INTO `SystemSettings` (`id`)
                        VALUES (%s)
                        ON DUPLICATE KEY UPDATE `id` = VALUES(`id`)
                         with values: [1]
2025-10-19 22:03:19,720 - scripts.sync_manager - DEBUG - Handling related tables for SystemSettings with record ID: 1 and change data: {'systemSettings': {'companyAddress': '123 Jewelry Street, Mumbai, Maharashtra 400001', 'companyEmail': 'info@siriartjewellery.com', 'companyName': 'SIRI ART JEWELLERY', 'companyPhone': '+91 98765 43210', 'gstin': '27AAFCV2449G1Z7', 'id': 1, 'taxPercentage': 13.2}, 'billFormats': {'A4': {'height': 297, 'margins': {'bottom': 20, 'left': 20, 'right': 20, 'top': 20}, 'unit': 'mm', 'width': 210}, 'A5': {'height': 210, 'margins': {'bottom': 15, 'left': 15, 'right': 15, 'top': 15}, 'unit': 'mm', 'width': 148}, 'Custom': {'height': 297, 'margins': {'bottom': 20, 'left': 20, 'right': 20, 'top': 20}, 'unit': 'mm', 'width': 210}, 'Thermal_58mm': {'height': 'auto', 'margins': {'bottom': 3, 'left': 3, 'right': 3, 'top': 3}, 'unit': 'mm', 'width': 58}, 'Thermal_80mm': {'height': 'auto', 'margins': {'bottom': 5, 'left': 5, 'right': 5, 'top': 5}, 'unit': 'mm', 'width': 80}}, 'storeFormats': {}}
2025-10-19 22:03:19,725 - scripts.sync_manager - INFO - UPDATE operation on table `SystemSettings` for record ID: 1 successful.
2025-10-19 22:03:19,764 - scripts.sync_manager - DEBUG - Transaction committed for UPDATE on `SystemSettings` for record ID: 1.
2025-10-19 22:03:19,948 - scripts.sync_manager - DEBUG - Log ID 5 marked as 'completed'.
2025-10-19 22:03:19,984 - scripts.sync_manager - INFO - Logged sync event: SystemSettings_update_success - completed
2025-10-19 22:03:19,985 - scripts.sync_manager - INFO - Successfully processed log ID 5.
2025-10-19 22:03:19,987 - scripts.sync_manager - INFO - Finished processing pending logs. Processed: 1, Failed: 0.
2025-10-19 22:03:19,987 - scripts.sync_manager - INFO - Push sync result: {'status': 'success', 'message': 'Processed 1 logs, 0 failed', 'processed': 1, 'failed': 0}
2025-10-19 22:03:20,103 - scripts.sync_manager - INFO - Starting pull from MySQL sync_table. Last sync timestamp: None (fetching last 1 day)
2025-10-19 22:03:20,132 - scripts.sync_manager - INFO - No new entries found in MySQL sync_table.
2025-10-19 22:03:20,319 - scripts.sync_manager - INFO - Pull sync result: {'status': 'success', 'message': 'No new entries', 'pulled': 0}
2025-10-19 22:03:20,332 - scripts.sync_manager - INFO - Logged sync event: scheduled_sync - completed
2025-10-19 22:03:20,332 - scripts.sync_manager - INFO - Scheduled sync operation completed successfully.
2025-10-19 22:04:28,929 - scripts.sync_manager - INFO - Logged CRUD operation: SystemSettings - UPDATE - 1
2025-10-19 22:04:28,940 - scripts.sync_manager - INFO - Logged sync event: SystemSettings_update_logged - pending
2025-10-19 22:04:28,941 - scripts.sync_manager - INFO - Triggering immediate processing for SystemSettings - UPDATE - 1
2025-10-19 22:04:28,952 - scripts.sync_manager - INFO - Processing 1 pending sync logs sequentially...
2025-10-19 22:04:28,952 - scripts.sync_manager - INFO - Attempting to process log ID 6: Table `SystemSettings`, Type `UPDATE`, Record ID `1`.
2025-10-19 22:04:28,952 - scripts.sync_manager - DEBUG - Log ID 6 details: {'id': 6, 'sync_time': '2025-10-19T22:04:28.928709', 'table_name': 'SystemSettings', 'change_type': 'UPDATE', 'record_id': 1, 'change_data': {'systemSettings': {'companyAddress': '123 Jewelry Street, Mumbai, Maharashtra 400001', 'companyEmail': 'info@siriartjewellery.com', 'companyName': 'SIRI ART JEWELLERY', 'companyPhone': '+91 98765 43210', 'gstin': '27AAFCV2449G1Z7', 'id': 1, 'taxPercentage': 13}, 'billFormats': {'A4': {'height': 297, 'margins': {'bottom': 20, 'left': 20, 'right': 20, 'top': 20}, 'unit': 'mm', 'width': 210}, 'A5': {'height': 210, 'margins': {'bottom': 15, 'left': 15, 'right': 15, 'top': 15}, 'unit': 'mm', 'width': 148}, 'Custom': {'height': 297, 'margins': {'bottom': 20, 'left': 20, 'right': 20, 'top': 20}, 'unit': 'mm', 'width': 210}, 'Thermal_58mm': {'height': 'auto', 'margins': {'bottom': 3, 'left': 3, 'right': 3, 'top': 3}, 'unit': 'mm', 'width': 58}, 'Thermal_80mm': {'height': 'auto', 'margins': {'bottom': 5, 'left': 5, 'right': 5, 'top': 5}, 'unit': 'mm', 'width': 80}}, 'storeFormats': {}}, 'status': 'pending', 'retry_count': 0, 'last_retry': None, 'error_message': None, 'created_at': '2025-10-19T22:04:28.928709'}
2025-10-19 22:04:29,379 - scripts.sync_manager - DEBUG - Attempting UPDATE operation on table `SystemSettings` for record ID: 1
2025-10-19 22:04:29,421 - scripts.sync_manager - DEBUG - Table `SystemSettings` columns: ['id', 'gstin', 'taxPercentage', 'companyName', 'companyAddress', 'companyPhone', 'companyEmail']
2025-10-19 22:04:29,421 - scripts.sync_manager - DEBUG - Filtered data for UPDATE on `SystemSettings`: {}
2025-10-19 22:04:29,421 - scripts.sync_manager - DEBUG - Added record_id 1 to filtered_data for SystemSettings.
2025-10-19 22:04:29,421 - scripts.sync_manager - DEBUG - Executing UPSERT query for `SystemSettings`: 
                        INSERT INTO `SystemSettings` (`id`)
                        VALUES (%s)
                        ON DUPLICATE KEY UPDATE `id` = VALUES(`id`)
                         with values: [1]
2025-10-19 22:04:29,459 - scripts.sync_manager - DEBUG - Handling related tables for SystemSettings with record ID: 1 and change data: {'systemSettings': {'companyAddress': '123 Jewelry Street, Mumbai, Maharashtra 400001', 'companyEmail': 'info@siriartjewellery.com', 'companyName': 'SIRI ART JEWELLERY', 'companyPhone': '+91 98765 43210', 'gstin': '27AAFCV2449G1Z7', 'id': 1, 'taxPercentage': 13}, 'billFormats': {'A4': {'height': 297, 'margins': {'bottom': 20, 'left': 20, 'right': 20, 'top': 20}, 'unit': 'mm', 'width': 210}, 'A5': {'height': 210, 'margins': {'bottom': 15, 'left': 15, 'right': 15, 'top': 15}, 'unit': 'mm', 'width': 148}, 'Custom': {'height': 297, 'margins': {'bottom': 20, 'left': 20, 'right': 20, 'top': 20}, 'unit': 'mm', 'width': 210}, 'Thermal_58mm': {'height': 'auto', 'margins': {'bottom': 3, 'left': 3, 'right': 3, 'top': 3}, 'unit': 'mm', 'width': 58}, 'Thermal_80mm': {'height': 'auto', 'margins': {'bottom': 5, 'left': 5, 'right': 5, 'top': 5}, 'unit': 'mm', 'width': 80}}, 'storeFormats': {}}
2025-10-19 22:04:29,459 - scripts.sync_manager - INFO - UPDATE operation on table `SystemSettings` for record ID: 1 successful.
2025-10-19 22:04:29,496 - scripts.sync_manager - DEBUG - Transaction committed for UPDATE on `SystemSettings` for record ID: 1.
2025-10-19 22:04:29,677 - scripts.sync_manager - DEBUG - Log ID 6 marked as 'completed'.
2025-10-19 22:04:29,687 - scripts.sync_manager - INFO - Logged sync event: SystemSettings_update_success - completed
2025-10-19 22:04:29,687 - scripts.sync_manager - INFO - Successfully processed log ID 6.
2025-10-19 22:04:29,689 - scripts.sync_manager - INFO - Finished processing pending logs. Processed: 1, Failed: 0.
2025-10-19 22:06:37,913 - scripts.sync_manager - INFO - Initiating scheduled sync operation.
2025-10-19 22:06:37,933 - scripts.sync_manager - INFO - No pending sync logs to process.
2025-10-19 22:06:37,933 - scripts.sync_manager - INFO - Push sync result: {'status': 'success', 'message': 'No pending logs', 'processed': 0, 'failed': 0}
2025-10-19 22:06:38,396 - scripts.sync_manager - INFO - Starting pull from MySQL sync_table. Last sync timestamp: None (fetching last 1 day)
2025-10-19 22:06:38,433 - scripts.sync_manager - INFO - No new entries found in MySQL sync_table.
2025-10-19 22:06:38,614 - scripts.sync_manager - INFO - Pull sync result: {'status': 'success', 'message': 'No new entries', 'pulled': 0}
2025-10-19 22:06:38,638 - scripts.sync_manager - INFO - Logged sync event: scheduled_sync - completed
2025-10-19 22:06:38,646 - scripts.sync_manager - INFO - Scheduled sync operation completed successfully.
2025-10-19 22:06:38,647 - scripts.sync_manager - INFO - No failed logs to retry.
2025-10-19 22:08:02,800 - scripts.sync_manager - INFO - Logged CRUD operation: Stores - DELETE - store_2
2025-10-19 22:08:02,822 - scripts.sync_manager - INFO - Logged sync event: Stores_delete_logged - pending
2025-10-19 22:08:02,824 - scripts.sync_manager - INFO - Triggering immediate processing for Stores - DELETE - store_2
2025-10-19 22:08:02,836 - scripts.sync_manager - INFO - Processing 1 pending sync logs sequentially...
2025-10-19 22:08:02,836 - scripts.sync_manager - INFO - Attempting to process log ID 7: Table `Stores`, Type `DELETE`, Record ID `store_2`.
2025-10-19 22:08:02,836 - scripts.sync_manager - DEBUG - Log ID 7 details: {'id': 7, 'sync_time': '2025-10-19T22:08:02.800796', 'table_name': 'Stores', 'change_type': 'DELETE', 'record_id': 'store_2', 'change_data': {'id': 'store_2', 'name': 'Branch Store', 'address': '456 Market Road, City', 'phone': None, 'status': 'active', 'createdAt': None, 'updatedAt': None}, 'status': 'pending', 'retry_count': 0, 'last_retry': None, 'error_message': None, 'created_at': '2025-10-19T22:08:02.800796'}
2025-10-19 22:08:03,319 - scripts.sync_manager - INFO - DELETE operation on table `Stores` for record ID: store_2 successful.
2025-10-19 22:08:03,361 - scripts.sync_manager - DEBUG - Transaction committed for DELETE on `Stores` for record ID: store_2.
2025-10-19 22:08:03,546 - scripts.sync_manager - DEBUG - Log ID 7 marked as 'completed'.
2025-10-19 22:08:03,569 - scripts.sync_manager - INFO - Logged sync event: Stores_delete_success - completed
2025-10-19 22:08:03,569 - scripts.sync_manager - INFO - Successfully processed log ID 7.
2025-10-19 22:08:03,572 - scripts.sync_manager - INFO - Finished processing pending logs. Processed: 1, Failed: 0.
2025-10-19 22:08:32,805 - scripts.sync_manager - INFO - Logged CRUD operation: Stores - DELETE - STR-1758004817814
2025-10-19 22:08:32,816 - scripts.sync_manager - INFO - Logged sync event: Stores_delete_logged - pending
2025-10-19 22:08:32,818 - scripts.sync_manager - INFO - Triggering immediate processing for Stores - DELETE - STR-1758004817814
2025-10-19 22:08:32,827 - scripts.sync_manager - INFO - Processing 1 pending sync logs sequentially...
2025-10-19 22:08:32,829 - scripts.sync_manager - INFO - Attempting to process log ID 8: Table `Stores`, Type `DELETE`, Record ID `STR-1758004817814`.
2025-10-19 22:08:32,829 - scripts.sync_manager - DEBUG - Log ID 8 details: {'id': 8, 'sync_time': '2025-10-19T22:08:32.797968', 'table_name': 'Stores', 'change_type': 'DELETE', 'record_id': 'STR-1758004817814', 'change_data': {'id': 'STR-1758004817814', 'name': 'Test Store', 'address': None, 'phone': None, 'status': 'active', 'createdAt': '2025-09-16T12:10:17', 'updatedAt': '2025-09-20T19:50:14'}, 'status': 'pending', 'retry_count': 0, 'last_retry': None, 'error_message': None, 'created_at': '2025-10-19T22:08:32.797968'}
2025-10-19 22:08:33,343 - scripts.sync_manager - ERROR - Error in database operation for Stores (ID: STR-1758004817814): 1451 (23000): Cannot delete or update a parent row: a foreign key constraint fails (`u408450631_siri`.`UserStores`, CONSTRAINT `UserStores_ibfk_2` FOREIGN KEY (`storeId`) REFERENCES `Stores` (`id`))
Traceback (most recent call last):
  File "C:\Users\Dell\AppData\Local\Programs\Python\Python312\Lib\site-packages\mysql\connector\connection_cext.py", line 697, in cmd_query
    self._cmysql.query(
_mysql_connector.MySQLInterfaceError: Cannot delete or update a parent row: a foreign key constraint fails (`u408450631_siri`.`UserStores`, CONSTRAINT `UserStores_ibfk_2` FOREIGN KEY (`storeId`) REFERENCES `Stores` (`id`))

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "E:\Siri-apps\billing-app\backend\scripts\sync_manager.py", line 260, in apply_change_to_mysql_db
    cursor.execute(f"DELETE FROM `{table_name}` WHERE `id` = %s", (record_id,))
  File "C:\Users\Dell\AppData\Local\Programs\Python\Python312\Lib\site-packages\mysql\connector\cursor_cext.py", line 372, in execute
    result = self._cnx.cmd_query(
             ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dell\AppData\Local\Programs\Python\Python312\Lib\site-packages\mysql\connector\opentelemetry\context_propagation.py", line 111, in wrapper
    result = method(cnx, *args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dell\AppData\Local\Programs\Python\Python312\Lib\site-packages\mysql\connector\connection_cext.py", line 705, in cmd_query
    raise get_mysql_exception(
mysql.connector.errors.IntegrityError: 1451 (23000): Cannot delete or update a parent row: a foreign key constraint fails (`u408450631_siri`.`UserStores`, CONSTRAINT `UserStores_ibfk_2` FOREIGN KEY (`storeId`) REFERENCES `Stores` (`id`))
2025-10-19 22:08:33,553 - scripts.sync_manager - DEBUG - Log ID 8 marked as 'failed'. Retry count: 1
2025-10-19 22:08:33,574 - scripts.sync_manager - INFO - Logged sync event: Stores_delete_failed - failed
2025-10-19 22:08:33,574 - scripts.sync_manager - WARNING - Failed to process log ID 8. Will retry later if attempts remain.
2025-10-19 22:08:33,576 - scripts.sync_manager - INFO - Finished processing pending logs. Processed: 0, Failed: 1.
2025-10-19 22:10:00,009 - scripts.sync_manager - INFO - Starting background sync scheduler setup.
2025-10-19 22:10:00,016 - scripts.sync_manager - DEBUG - Scheduled tasks: scheduled_sync (15min), retry_failed_logs (15min), cleanup_old_logs (daily 02:00), _cleanup_log_files (daily 02:00).
2025-10-19 22:10:00,018 - scripts.sync_manager - INFO - Background sync scheduler thread started.
2025-10-19 22:10:00,018 - scripts.sync_manager - INFO - Background sync process started.
2025-10-19 22:10:00,018 - scripts.sync_manager - INFO - Performing initial scheduled sync run.
2025-10-19 22:10:00,020 - scripts.sync_manager - INFO - Initiating scheduled sync operation.
2025-10-19 22:10:00,035 - scripts.sync_manager - INFO - No pending sync logs to process.
2025-10-19 22:10:00,037 - scripts.sync_manager - INFO - Push sync result: {'status': 'success', 'message': 'No pending logs', 'processed': 0, 'failed': 0}
2025-10-19 22:10:00,140 - scripts.sync_manager - INFO - Starting pull from MySQL sync_table. Last sync timestamp: None (fetching last 1 day)
2025-10-19 22:10:00,188 - scripts.sync_manager - INFO - No new entries found in MySQL sync_table.
2025-10-19 22:10:00,384 - scripts.sync_manager - INFO - Pull sync result: {'status': 'success', 'message': 'No new entries', 'pulled': 0}
2025-10-19 22:10:00,388 - scripts.sync_manager - INFO - Logged sync event: scheduled_sync - completed
2025-10-19 22:10:00,388 - scripts.sync_manager - INFO - Scheduled sync operation completed successfully.
2025-10-19 22:12:29,716 - scripts.sync_manager - INFO - Logged CRUD operation: Stores - CREATE - STR-1760892149713
2025-10-19 22:12:29,736 - scripts.sync_manager - INFO - Logged sync event: Stores_create_logged - pending
2025-10-19 22:12:29,736 - scripts.sync_manager - INFO - Triggering immediate processing for Stores - CREATE - STR-1760892149713
2025-10-19 22:12:29,753 - scripts.sync_manager - INFO - Processing 1 pending sync logs sequentially...
2025-10-19 22:12:29,753 - scripts.sync_manager - INFO - Attempting to process log ID 9: Table `Stores`, Type `CREATE`, Record ID `STR-1760892149713`.
2025-10-19 22:12:29,754 - scripts.sync_manager - DEBUG - Log ID 9 details: {'id': 9, 'sync_time': '2025-10-19T22:12:29.715038', 'table_name': 'Stores', 'change_type': 'CREATE', 'record_id': 'STR-1760892149713', 'change_data': {'name': 'testing store', 'address': 'Nv Gardens, Ashok Nagar,Mypadu Road', 'phone': '06300936015', 'email': 'MAHENDRAREDDY965@GMAIL.COM', 'manager': '', 'status': 'active', 'id': 'STR-1760892149713', 'createdAt': '2025-10-19T22:12:29.713923'}, 'status': 'pending', 'retry_count': 0, 'last_retry': None, 'error_message': None, 'created_at': '2025-10-19T22:12:29.715038'}
2025-10-19 22:12:30,175 - scripts.sync_manager - DEBUG - Attempting CREATE operation on table `Stores` for record ID: STR-1760892149713
2025-10-19 22:12:30,225 - scripts.sync_manager - DEBUG - Table `Stores` columns: ['id', 'name', 'address', 'phone', 'status', 'createdAt', 'updatedAt']
2025-10-19 22:12:30,226 - scripts.sync_manager - DEBUG - Filtered data for CREATE on `Stores`: {'name': 'testing store', 'address': 'Nv Gardens, Ashok Nagar,Mypadu Road', 'phone': '06300936015', 'status': 'active', 'id': 'STR-1760892149713', 'createdAt': '2025-10-19T22:12:29.713923'}
2025-10-19 22:12:30,226 - scripts.sync_manager - DEBUG - Executing UPSERT query for `Stores`: 
                        INSERT INTO `Stores` (`name`, `address`, `phone`, `status`, `id`, `createdAt`)
                        VALUES (%s, %s, %s, %s, %s, %s)
                        ON DUPLICATE KEY UPDATE `name` = VALUES(`name`), `address` = VALUES(`address`), `phone` = VALUES(`phone`), `status` = VALUES(`status`), `id` = VALUES(`id`), `createdAt` = VALUES(`createdAt`)
                         with values: ['testing store', 'Nv Gardens, Ashok Nagar,Mypadu Road', '06300936015', 'active', 'STR-1760892149713', '2025-10-19T22:12:29.713923']
2025-10-19 22:12:30,263 - scripts.sync_manager - DEBUG - Handling related tables for Stores with record ID: STR-1760892149713 and change data: {'name': 'testing store', 'address': 'Nv Gardens, Ashok Nagar,Mypadu Road', 'phone': '06300936015', 'email': 'MAHENDRAREDDY965@GMAIL.COM', 'manager': '', 'status': 'active', 'id': 'STR-1760892149713', 'createdAt': '2025-10-19T22:12:29.713923'}
2025-10-19 22:12:30,266 - scripts.sync_manager - INFO - CREATE operation on table `Stores` for record ID: STR-1760892149713 successful.
2025-10-19 22:12:30,312 - scripts.sync_manager - DEBUG - Transaction committed for CREATE on `Stores` for record ID: STR-1760892149713.
2025-10-19 22:12:30,508 - scripts.sync_manager - DEBUG - Log ID 9 marked as 'completed'.
2025-10-19 22:12:30,550 - scripts.sync_manager - INFO - Logged sync event: Stores_create_success - completed
2025-10-19 22:12:30,550 - scripts.sync_manager - INFO - Successfully processed log ID 9.
2025-10-19 22:12:30,556 - scripts.sync_manager - INFO - Finished processing pending logs. Processed: 1, Failed: 0.
2025-10-19 22:12:49,799 - scripts.sync_manager - INFO - Logged CRUD operation: Stores - DELETE - STR-1760892149713
2025-10-19 22:12:49,814 - scripts.sync_manager - INFO - Logged sync event: Stores_delete_logged - pending
2025-10-19 22:12:49,814 - scripts.sync_manager - INFO - Triggering immediate processing for Stores - DELETE - STR-1760892149713
2025-10-19 22:12:49,829 - scripts.sync_manager - INFO - Processing 1 pending sync logs sequentially...
2025-10-19 22:12:49,830 - scripts.sync_manager - INFO - Attempting to process log ID 10: Table `Stores`, Type `DELETE`, Record ID `STR-1760892149713`.
2025-10-19 22:12:49,830 - scripts.sync_manager - DEBUG - Log ID 10 details: {'id': 10, 'sync_time': '2025-10-19T22:12:49.799636', 'table_name': 'Stores', 'change_type': 'DELETE', 'record_id': 'STR-1760892149713', 'change_data': {'name': 'testing store', 'address': 'Nv Gardens, Ashok Nagar,Mypadu Road', 'phone': '06300936015', 'email': 'MAHENDRAREDDY965@GMAIL.COM', 'manager': '', 'status': 'active', 'id': 'STR-1760892149713', 'createdAt': '2025-10-19T22:12:29.713923'}, 'status': 'pending', 'retry_count': 0, 'last_retry': None, 'error_message': None, 'created_at': '2025-10-19T22:12:49.799636'}
2025-10-19 22:12:50,324 - scripts.sync_manager - INFO - DELETE operation on table `Stores` for record ID: STR-1760892149713 successful.
2025-10-19 22:12:50,370 - scripts.sync_manager - DEBUG - Transaction committed for DELETE on `Stores` for record ID: STR-1760892149713.
2025-10-19 22:12:50,559 - scripts.sync_manager - DEBUG - Log ID 10 marked as 'completed'.
2025-10-19 22:12:50,594 - scripts.sync_manager - INFO - Logged sync event: Stores_delete_success - completed
2025-10-19 22:12:50,595 - scripts.sync_manager - INFO - Successfully processed log ID 10.
2025-10-19 22:12:50,598 - scripts.sync_manager - INFO - Finished processing pending logs. Processed: 1, Failed: 0.
2025-10-19 22:14:33,346 - scripts.sync_manager - INFO - Logged CRUD operation: Products - CREATE - d225d717-ce2c-48c7-895c-50ca86887f3d
2025-10-19 22:14:33,357 - scripts.sync_manager - INFO - Logged sync event: Products_create_logged - pending
2025-10-19 22:14:33,358 - scripts.sync_manager - INFO - Triggering immediate processing for Products - CREATE - d225d717-ce2c-48c7-895c-50ca86887f3d
2025-10-19 22:14:33,362 - scripts.sync_manager - INFO - Processing 1 pending sync logs sequentially...
2025-10-19 22:14:33,362 - scripts.sync_manager - INFO - Attempting to process log ID 11: Table `Products`, Type `CREATE`, Record ID `d225d717-ce2c-48c7-895c-50ca86887f3d`.
2025-10-19 22:14:33,362 - scripts.sync_manager - DEBUG - Log ID 11 details: {'id': 11, 'sync_time': '2025-10-19T22:14:33.344987', 'table_name': 'Products', 'change_type': 'CREATE', 'record_id': 'd225d717-ce2c-48c7-895c-50ca86887f3d', 'change_data': {'name': 'testing', 'price': 500, 'stock': 10, 'tax': None, 'barcodes': ['1760892271553301'], 'batchId': 'c2d5df1e-07a8-458a-bbd0-3b0e362adcb6', 'id': 'd225d717-ce2c-48c7-895c-50ca86887f3d', 'createdAt': '2025-10-19T22:14:33.313847', 'updatedAt': '2025-10-19T22:14:33.313847'}, 'status': 'pending', 'retry_count': 0, 'last_retry': None, 'error_message': None, 'created_at': '2025-10-19T22:14:33.344987'}
2025-10-19 22:14:33,787 - scripts.sync_manager - DEBUG - Attempting CREATE operation on table `Products` for record ID: d225d717-ce2c-48c7-895c-50ca86887f3d
2025-10-19 22:14:33,826 - scripts.sync_manager - DEBUG - Table `Products` columns: ['id', 'name', 'price', 'stock', 'assignedStoreId', 'selling_price', 'createdAt', 'updatedAt']
2025-10-19 22:14:33,826 - scripts.sync_manager - DEBUG - Filtered data for CREATE on `Products`: {'name': 'testing', 'price': 500, 'stock': 10, 'id': 'd225d717-ce2c-48c7-895c-50ca86887f3d', 'createdAt': '2025-10-19T22:14:33.313847', 'updatedAt': '2025-10-19T22:14:33.313847'}
2025-10-19 22:14:33,826 - scripts.sync_manager - DEBUG - Executing UPSERT query for `Products`: 
                        INSERT INTO `Products` (`name`, `price`, `stock`, `id`, `createdAt`, `updatedAt`)
                        VALUES (%s, %s, %s, %s, %s, %s)
                        ON DUPLICATE KEY UPDATE `name` = VALUES(`name`), `price` = VALUES(`price`), `stock` = VALUES(`stock`), `id` = VALUES(`id`), `createdAt` = VALUES(`createdAt`), `updatedAt` = VALUES(`updatedAt`)
                         with values: ['testing', 500, 10, 'd225d717-ce2c-48c7-895c-50ca86887f3d', '2025-10-19T22:14:33.313847', '2025-10-19T22:14:33.313847']
2025-10-19 22:14:33,864 - scripts.sync_manager - DEBUG - Handling related tables for Products with record ID: d225d717-ce2c-48c7-895c-50ca86887f3d and change data: {'name': 'testing', 'price': 500, 'stock': 10, 'tax': None, 'barcodes': ['1760892271553301'], 'batchId': 'c2d5df1e-07a8-458a-bbd0-3b0e362adcb6', 'id': 'd225d717-ce2c-48c7-895c-50ca86887f3d', 'createdAt': '2025-10-19T22:14:33.313847', 'updatedAt': '2025-10-19T22:14:33.313847'}
2025-10-19 22:14:33,864 - scripts.sync_manager - DEBUG - Processing barcodes for product ID d225d717-ce2c-48c7-895c-50ca86887f3d: ['1760892271553301']
2025-10-19 22:14:33,900 - scripts.sync_manager - DEBUG - Existing barcodes: set(), New barcodes: {'1760892271553301'}
2025-10-19 22:14:33,900 - scripts.sync_manager - DEBUG - Adding new barcode 1760892271553301 for product ID d225d717-ce2c-48c7-895c-50ca86887f3d
2025-10-19 22:14:33,938 - scripts.sync_manager - DEBUG - Finished barcode maintenance for product ID d225d717-ce2c-48c7-895c-50ca86887f3d
2025-10-19 22:14:33,939 - scripts.sync_manager - INFO - CREATE operation on table `Products` for record ID: d225d717-ce2c-48c7-895c-50ca86887f3d successful.
2025-10-19 22:14:33,974 - scripts.sync_manager - DEBUG - Transaction committed for CREATE on `Products` for record ID: d225d717-ce2c-48c7-895c-50ca86887f3d.
2025-10-19 22:14:34,155 - scripts.sync_manager - DEBUG - Log ID 11 marked as 'completed'.
2025-10-19 22:14:34,164 - scripts.sync_manager - INFO - Logged sync event: Products_create_success - completed
2025-10-19 22:14:34,164 - scripts.sync_manager - INFO - Successfully processed log ID 11.
2025-10-19 22:14:34,164 - scripts.sync_manager - INFO - Finished processing pending logs. Processed: 1, Failed: 0.
2025-10-19 22:19:00,976 - scripts.sync_manager - INFO - Logged CRUD operation: Users - CREATE - 1c4e640a-58a1-41b3-ba6c-6343c0b058c3
2025-10-19 22:19:00,985 - scripts.sync_manager - INFO - Logged sync event: Users_create_logged - pending
2025-10-19 22:19:00,985 - scripts.sync_manager - INFO - Triggering immediate processing for Users - CREATE - 1c4e640a-58a1-41b3-ba6c-6343c0b058c3
2025-10-19 22:19:01,007 - scripts.sync_manager - INFO - Processing 1 pending sync logs sequentially...
2025-10-19 22:19:01,007 - scripts.sync_manager - INFO - Attempting to process log ID 12: Table `Users`, Type `CREATE`, Record ID `1c4e640a-58a1-41b3-ba6c-6343c0b058c3`.
2025-10-19 22:19:01,007 - scripts.sync_manager - DEBUG - Log ID 12 details: {'id': 12, 'sync_time': '2025-10-19T22:19:00.974070', 'table_name': 'Users', 'change_type': 'CREATE', 'record_id': '1c4e640a-58a1-41b3-ba6c-6343c0b058c3', 'change_data': {'name': 'A.NECKLACE', 'email': '19jn1a0596@gmail.com', 'password': 'AB8.>D2S', 'role': 'billing_user', 'assignedStores': ['store3'], 'status': 'active', 'id': '1c4e640a-58a1-41b3-ba6c-6343c0b058c3', 'createdAt': '2025-10-19T22:19:00.958955', 'updatedAt': '2025-10-19T22:19:00.958955'}, 'status': 'pending', 'retry_count': 0, 'last_retry': None, 'error_message': None, 'created_at': '2025-10-19T22:19:00.974070'}
2025-10-19 22:19:01,409 - scripts.sync_manager - DEBUG - Attempting CREATE operation on table `Users` for record ID: 1c4e640a-58a1-41b3-ba6c-6343c0b058c3
2025-10-19 22:19:01,448 - scripts.sync_manager - DEBUG - Table `Users` columns: ['id', 'name', 'email', 'password', 'role', 'status', 'sessionDuration', 'createdAt', 'updatedAt', 'lastLogin', 'lastLogout', 'totalSessionDuration']
2025-10-19 22:19:01,448 - scripts.sync_manager - DEBUG - Filtered data for CREATE on `Users`: {'name': 'A.NECKLACE', 'email': '19jn1a0596@gmail.com', 'password': 'AB8.>D2S', 'role': 'billing_user', 'status': 'active', 'id': '1c4e640a-58a1-41b3-ba6c-6343c0b058c3', 'createdAt': '2025-10-19T22:19:00.958955', 'updatedAt': '2025-10-19T22:19:00.958955'}
2025-10-19 22:19:01,448 - scripts.sync_manager - DEBUG - Executing UPSERT query for `Users`: 
                        INSERT INTO `Users` (`name`, `email`, `password`, `role`, `status`, `id`, `createdAt`, `updatedAt`)
                        VALUES (%s, %s, %s, %s, %s, %s, %s, %s)
                        ON DUPLICATE KEY UPDATE `name` = VALUES(`name`), `email` = VALUES(`email`), `password` = VALUES(`password`), `role` = VALUES(`role`), `status` = VALUES(`status`), `id` = VALUES(`id`), `createdAt` = VALUES(`createdAt`), `updatedAt` = VALUES(`updatedAt`)
                         with values: ['A.NECKLACE', '19jn1a0596@gmail.com', 'AB8.>D2S', 'billing_user', 'active', '1c4e640a-58a1-41b3-ba6c-6343c0b058c3', '2025-10-19T22:19:00.958955', '2025-10-19T22:19:00.958955']
2025-10-19 22:19:01,484 - scripts.sync_manager - DEBUG - Handling related tables for Users with record ID: 1c4e640a-58a1-41b3-ba6c-6343c0b058c3 and change data: {'name': 'A.NECKLACE', 'email': '19jn1a0596@gmail.com', 'password': 'AB8.>D2S', 'role': 'billing_user', 'assignedStores': ['store3'], 'status': 'active', 'id': '1c4e640a-58a1-41b3-ba6c-6343c0b058c3', 'createdAt': '2025-10-19T22:19:00.958955', 'updatedAt': '2025-10-19T22:19:00.958955'}
2025-10-19 22:19:01,485 - scripts.sync_manager - INFO - CREATE operation on table `Users` for record ID: 1c4e640a-58a1-41b3-ba6c-6343c0b058c3 successful.
2025-10-19 22:19:01,520 - scripts.sync_manager - DEBUG - Transaction committed for CREATE on `Users` for record ID: 1c4e640a-58a1-41b3-ba6c-6343c0b058c3.
2025-10-19 22:19:01,703 - scripts.sync_manager - DEBUG - Log ID 12 marked as 'completed'.
2025-10-19 22:19:01,750 - scripts.sync_manager - INFO - Logged sync event: Users_create_success - completed
2025-10-19 22:19:01,751 - scripts.sync_manager - INFO - Successfully processed log ID 12.
2025-10-19 22:19:01,755 - scripts.sync_manager - INFO - Finished processing pending logs. Processed: 1, Failed: 0.
2025-10-19 22:19:24,639 - scripts.sync_manager - INFO - Logged CRUD operation: Users - DELETE - 1c4e640a-58a1-41b3-ba6c-6343c0b058c3
2025-10-19 22:19:24,656 - scripts.sync_manager - INFO - Logged sync event: Users_delete_logged - pending
2025-10-19 22:19:24,656 - scripts.sync_manager - INFO - Triggering immediate processing for Users - DELETE - 1c4e640a-58a1-41b3-ba6c-6343c0b058c3
2025-10-19 22:19:24,669 - scripts.sync_manager - INFO - Processing 1 pending sync logs sequentially...
2025-10-19 22:19:24,671 - scripts.sync_manager - INFO - Attempting to process log ID 13: Table `Users`, Type `DELETE`, Record ID `1c4e640a-58a1-41b3-ba6c-6343c0b058c3`.
2025-10-19 22:19:24,671 - scripts.sync_manager - DEBUG - Log ID 13 details: {'id': 13, 'sync_time': '2025-10-19T22:19:24.639767', 'table_name': 'Users', 'change_type': 'DELETE', 'record_id': '1c4e640a-58a1-41b3-ba6c-6343c0b058c3', 'change_data': {'name': 'A.NECKLACE', 'email': '19jn1a0596@gmail.com', 'password': 'AB8.>D2S', 'role': 'billing_user', 'assignedStores': ['store3'], 'status': 'active', 'id': '1c4e640a-58a1-41b3-ba6c-6343c0b058c3', 'createdAt': '2025-10-19T22:19:00.958955', 'updatedAt': '2025-10-19T22:19:00.958955'}, 'status': 'pending', 'retry_count': 0, 'last_retry': None, 'error_message': None, 'created_at': '2025-10-19T22:19:24.639767'}
2025-10-19 22:19:25,168 - scripts.sync_manager - INFO - DELETE operation on table `Users` for record ID: 1c4e640a-58a1-41b3-ba6c-6343c0b058c3 successful.
2025-10-19 22:19:25,202 - scripts.sync_manager - DEBUG - Transaction committed for DELETE on `Users` for record ID: 1c4e640a-58a1-41b3-ba6c-6343c0b058c3.
2025-10-19 22:19:25,394 - scripts.sync_manager - DEBUG - Log ID 13 marked as 'completed'.
2025-10-19 22:19:25,430 - scripts.sync_manager - INFO - Logged sync event: Users_delete_success - completed
2025-10-19 22:19:25,430 - scripts.sync_manager - INFO - Successfully processed log ID 13.
2025-10-19 22:19:25,437 - scripts.sync_manager - INFO - Finished processing pending logs. Processed: 1, Failed: 0.
2025-10-19 22:21:38,656 - scripts.sync_manager - INFO - Initiating scheduled sync operation.
2025-10-19 22:21:38,684 - scripts.sync_manager - INFO - No pending sync logs to process.
2025-10-19 22:21:38,684 - scripts.sync_manager - INFO - Push sync result: {'status': 'success', 'message': 'No pending logs', 'processed': 0, 'failed': 0}
2025-10-19 22:21:39,091 - scripts.sync_manager - INFO - Starting pull from MySQL sync_table. Last sync timestamp: None (fetching last 1 day)
2025-10-19 22:21:39,137 - scripts.sync_manager - INFO - No new entries found in MySQL sync_table.
2025-10-19 22:21:39,320 - scripts.sync_manager - INFO - Pull sync result: {'status': 'success', 'message': 'No new entries', 'pulled': 0}
2025-10-19 22:21:39,364 - scripts.sync_manager - INFO - Logged sync event: scheduled_sync - completed
2025-10-19 22:21:39,364 - scripts.sync_manager - INFO - Scheduled sync operation completed successfully.
2025-10-19 22:21:39,364 - scripts.sync_manager - INFO - Attempting to retry 1 failed sync logs...
2025-10-19 22:21:39,364 - scripts.sync_manager - DEBUG - Log ID 8 status reset to 'pending' for retry. Current retry count: 1.
2025-10-19 22:21:39,369 - scripts.sync_manager - INFO - Successfully reset 1 failed logs to 'pending'. Now processing them.
2025-10-19 22:21:39,380 - scripts.sync_manager - INFO - Processing 1 pending sync logs sequentially...
2025-10-19 22:21:39,380 - scripts.sync_manager - INFO - Attempting to process log ID 8: Table `Stores`, Type `DELETE`, Record ID `STR-1758004817814`.
2025-10-19 22:21:39,380 - scripts.sync_manager - DEBUG - Log ID 8 details: {'id': 8, 'sync_time': '2025-10-19T22:08:32.797968', 'table_name': 'Stores', 'change_type': 'DELETE', 'record_id': 'STR-1758004817814', 'change_data': {'id': 'STR-1758004817814', 'name': 'Test Store', 'address': None, 'phone': None, 'status': 'active', 'createdAt': '2025-09-16T12:10:17', 'updatedAt': '2025-09-20T19:50:14'}, 'status': 'pending', 'retry_count': 1, 'last_retry': '2025-10-19T22:08:33.552009', 'error_message': 'Database operation failed', 'created_at': '2025-10-19T22:08:32.797968'}
2025-10-19 22:21:39,918 - scripts.sync_manager - ERROR - Error in database operation for Stores (ID: STR-1758004817814): 1451 (23000): Cannot delete or update a parent row: a foreign key constraint fails (`u408450631_siri`.`UserStores`, CONSTRAINT `UserStores_ibfk_2` FOREIGN KEY (`storeId`) REFERENCES `Stores` (`id`))
Traceback (most recent call last):
  File "C:\Users\Dell\AppData\Local\Programs\Python\Python312\Lib\site-packages\mysql\connector\connection_cext.py", line 697, in cmd_query
    self._cmysql.query(
_mysql_connector.MySQLInterfaceError: Cannot delete or update a parent row: a foreign key constraint fails (`u408450631_siri`.`UserStores`, CONSTRAINT `UserStores_ibfk_2` FOREIGN KEY (`storeId`) REFERENCES `Stores` (`id`))

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "E:\Siri-apps\billing-app\backend\scripts\sync_manager.py", line 256, in apply_change_to_mysql_db
    cursor.execute("DELETE FROM `ProductBarcodes` WHERE `productId` = %s", (record_id,))
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dell\AppData\Local\Programs\Python\Python312\Lib\site-packages\mysql\connector\cursor_cext.py", line 372, in execute
    result = self._cnx.cmd_query(
             ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dell\AppData\Local\Programs\Python\Python312\Lib\site-packages\mysql\connector\opentelemetry\context_propagation.py", line 111, in wrapper
    result = method(cnx, *args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dell\AppData\Local\Programs\Python\Python312\Lib\site-packages\mysql\connector\connection_cext.py", line 705, in cmd_query
    raise get_mysql_exception(
mysql.connector.errors.IntegrityError: 1451 (23000): Cannot delete or update a parent row: a foreign key constraint fails (`u408450631_siri`.`UserStores`, CONSTRAINT `UserStores_ibfk_2` FOREIGN KEY (`storeId`) REFERENCES `Stores` (`id`))
2025-10-19 22:21:40,111 - scripts.sync_manager - DEBUG - Log ID 8 marked as 'failed'. Retry count: 2
2025-10-19 22:21:40,146 - scripts.sync_manager - INFO - Logged sync event: Stores_delete_failed - failed
2025-10-19 22:21:40,146 - scripts.sync_manager - WARNING - Failed to process log ID 8. Will retry later if attempts remain.
2025-10-19 22:21:40,148 - scripts.sync_manager - INFO - Finished processing pending logs. Processed: 0, Failed: 1.
2025-10-19 22:25:00,405 - scripts.sync_manager - INFO - Initiating scheduled sync operation.
2025-10-19 22:25:00,423 - scripts.sync_manager - INFO - No pending sync logs to process.
2025-10-19 22:25:00,423 - scripts.sync_manager - INFO - Push sync result: {'status': 'success', 'message': 'No pending logs', 'processed': 0, 'failed': 0}
2025-10-19 22:25:00,777 - scripts.sync_manager - INFO - Starting pull from MySQL sync_table. Last sync timestamp: None (fetching last 1 day)
2025-10-19 22:25:00,811 - scripts.sync_manager - INFO - No new entries found in MySQL sync_table.
2025-10-19 22:25:00,994 - scripts.sync_manager - INFO - Pull sync result: {'status': 'success', 'message': 'No new entries', 'pulled': 0}
2025-10-19 22:25:01,009 - scripts.sync_manager - INFO - Logged sync event: scheduled_sync - completed
2025-10-19 22:25:01,009 - scripts.sync_manager - INFO - Scheduled sync operation completed successfully.
2025-10-19 22:25:01,010 - scripts.sync_manager - INFO - Attempting to retry 1 failed sync logs...
2025-10-19 22:25:01,010 - scripts.sync_manager - DEBUG - Log ID 8 status reset to 'pending' for retry. Current retry count: 2.
2025-10-19 22:25:01,010 - scripts.sync_manager - INFO - Successfully reset 1 failed logs to 'pending'. Now processing them.
2025-10-19 22:25:01,025 - scripts.sync_manager - INFO - Processing 1 pending sync logs sequentially...
2025-10-19 22:25:01,025 - scripts.sync_manager - INFO - Attempting to process log ID 8: Table `Stores`, Type `DELETE`, Record ID `STR-1758004817814`.
2025-10-19 22:25:01,025 - scripts.sync_manager - DEBUG - Log ID 8 details: {'id': 8, 'sync_time': '2025-10-19T22:08:32.797968', 'table_name': 'Stores', 'change_type': 'DELETE', 'record_id': 'STR-1758004817814', 'change_data': {'id': 'STR-1758004817814', 'name': 'Test Store', 'address': None, 'phone': None, 'status': 'active', 'createdAt': '2025-09-16T12:10:17', 'updatedAt': '2025-09-20T19:50:14'}, 'status': 'pending', 'retry_count': 2, 'last_retry': '2025-10-19T22:21:40.111374', 'error_message': 'Database operation failed', 'created_at': '2025-10-19T22:08:32.797968'}
2025-10-19 22:25:01,518 - scripts.sync_manager - INFO - DELETE operation on table `Stores` for record ID: STR-1758004817814 successful.
2025-10-19 22:25:01,554 - scripts.sync_manager - DEBUG - Transaction committed for DELETE on `Stores` for record ID: STR-1758004817814.
2025-10-19 22:25:01,725 - scripts.sync_manager - DEBUG - Log ID 8 marked as 'completed'.
2025-10-19 22:25:01,749 - scripts.sync_manager - INFO - Logged sync event: Stores_delete_success - completed
2025-10-19 22:25:01,749 - scripts.sync_manager - INFO - Successfully processed log ID 8.
2025-10-19 22:25:01,753 - scripts.sync_manager - INFO - Finished processing pending logs. Processed: 1, Failed: 0.
2025-10-19 22:36:40,156 - scripts.sync_manager - INFO - Initiating scheduled sync operation.
2025-10-19 22:36:40,194 - scripts.sync_manager - INFO - No pending sync logs to process.
2025-10-19 22:36:40,194 - scripts.sync_manager - INFO - Push sync result: {'status': 'success', 'message': 'No pending logs', 'processed': 0, 'failed': 0}
2025-10-19 22:36:40,628 - scripts.sync_manager - INFO - Starting pull from MySQL sync_table. Last sync timestamp: None (fetching last 1 day)
2025-10-19 22:36:40,660 - scripts.sync_manager - INFO - No new entries found in MySQL sync_table.
2025-10-19 22:36:40,859 - scripts.sync_manager - INFO - Pull sync result: {'status': 'success', 'message': 'No new entries', 'pulled': 0}
2025-10-19 22:36:40,897 - scripts.sync_manager - INFO - Logged sync event: scheduled_sync - completed
2025-10-19 22:36:40,897 - scripts.sync_manager - INFO - Scheduled sync operation completed successfully.
2025-10-19 22:36:40,907 - scripts.sync_manager - INFO - No failed logs to retry.
2025-10-19 22:37:41,982 - scripts.sync_manager - INFO - Starting background sync scheduler setup.
2025-10-19 22:37:41,990 - scripts.sync_manager - DEBUG - Scheduled tasks: scheduled_sync (15min), retry_failed_logs (15min), cleanup_old_logs (daily 02:00), _cleanup_log_files (daily 02:00).
2025-10-19 22:37:41,991 - scripts.sync_manager - INFO - Background sync scheduler thread started.
2025-10-19 22:37:41,991 - scripts.sync_manager - INFO - Background sync process started.
2025-10-19 22:37:41,992 - scripts.sync_manager - INFO - Performing initial scheduled sync run.
2025-10-19 22:37:41,992 - scripts.sync_manager - INFO - Initiating scheduled sync operation.
2025-10-19 22:37:41,992 - scripts.sync_manager - INFO - No pending sync logs to process.
2025-10-19 22:37:41,994 - scripts.sync_manager - INFO - Push sync result: {'status': 'success', 'message': 'No pending logs', 'processed': 0, 'failed': 0}
2025-10-19 22:37:42,110 - scripts.sync_manager - INFO - Starting pull from MySQL sync_table. Last sync timestamp: None (fetching last 1 day)
2025-10-19 22:37:42,149 - scripts.sync_manager - INFO - No new entries found in MySQL sync_table.
2025-10-19 22:37:42,342 - scripts.sync_manager - INFO - Pull sync result: {'status': 'success', 'message': 'No new entries', 'pulled': 0}
2025-10-19 22:37:42,387 - scripts.sync_manager - INFO - Logged sync event: scheduled_sync - completed
2025-10-19 22:37:42,387 - scripts.sync_manager - INFO - Scheduled sync operation completed successfully.
2025-10-19 22:51:08,917 - scripts.sync_manager - INFO - Logged CRUD operation: Products - DELETE - d225d717-ce2c-48c7-895c-50ca86887f3d
2025-10-19 22:51:08,935 - scripts.sync_manager - INFO - Logged sync event: Products_delete_logged - pending
2025-10-19 22:51:08,937 - scripts.sync_manager - INFO - Triggering immediate processing for Products - DELETE - d225d717-ce2c-48c7-895c-50ca86887f3d
2025-10-19 22:51:08,954 - scripts.sync_manager - INFO - Processing 1 pending sync logs sequentially...
2025-10-19 22:51:08,954 - scripts.sync_manager - INFO - Attempting to process log ID 14: Table `Products`, Type `DELETE`, Record ID `d225d717-ce2c-48c7-895c-50ca86887f3d`.
2025-10-19 22:51:08,954 - scripts.sync_manager - DEBUG - Log ID 14 details: {'id': 14, 'sync_time': '2025-10-19T22:51:08.915035', 'table_name': 'Products', 'change_type': 'DELETE', 'record_id': 'd225d717-ce2c-48c7-895c-50ca86887f3d', 'change_data': {'name': 'testing', 'price': 500, 'stock': 10, 'tax': None, 'barcodes': ['1760892271553301'], 'batchId': 'c2d5df1e-07a8-458a-bbd0-3b0e362adcb6', 'id': 'd225d717-ce2c-48c7-895c-50ca86887f3d', 'createdAt': '2025-10-19T22:14:33.313847', 'updatedAt': '2025-10-19T22:14:33.313847'}, 'status': 'pending', 'retry_count': 0, 'last_retry': None, 'error_message': None, 'created_at': '2025-10-19T22:51:08.915035'}
2025-10-19 22:51:09,463 - scripts.sync_manager - INFO - DELETE operation on table `Products` for record ID: d225d717-ce2c-48c7-895c-50ca86887f3d successful.
2025-10-19 22:51:09,502 - scripts.sync_manager - DEBUG - Transaction committed for DELETE on `Products` for record ID: d225d717-ce2c-48c7-895c-50ca86887f3d.
2025-10-19 22:51:09,695 - scripts.sync_manager - DEBUG - Log ID 14 marked as 'completed'.
2025-10-19 22:51:09,695 - scripts.sync_manager - INFO - Logged sync event: Products_delete_success - completed
2025-10-19 22:51:09,708 - scripts.sync_manager - INFO - Successfully processed log ID 14.
2025-10-19 22:51:09,709 - scripts.sync_manager - INFO - Finished processing pending logs. Processed: 1, Failed: 0.
2025-10-19 22:51:40,915 - scripts.sync_manager - INFO - Initiating scheduled sync operation.
2025-10-19 22:51:40,928 - scripts.sync_manager - INFO - No pending sync logs to process.
2025-10-19 22:51:40,928 - scripts.sync_manager - INFO - Push sync result: {'status': 'success', 'message': 'No pending logs', 'processed': 0, 'failed': 0}
2025-10-19 22:51:41,370 - scripts.sync_manager - INFO - Starting pull from MySQL sync_table. Last sync timestamp: None (fetching last 1 day)
2025-10-19 22:51:41,414 - scripts.sync_manager - INFO - No new entries found in MySQL sync_table.
2025-10-19 22:51:41,612 - scripts.sync_manager - INFO - Pull sync result: {'status': 'success', 'message': 'No new entries', 'pulled': 0}
2025-10-19 22:51:41,623 - scripts.sync_manager - INFO - Logged sync event: scheduled_sync - completed
2025-10-19 22:51:41,624 - scripts.sync_manager - INFO - Scheduled sync operation completed successfully.
2025-10-19 22:51:41,624 - scripts.sync_manager - INFO - No failed logs to retry.
2025-10-19 22:51:51,201 - scripts.sync_manager - INFO - Logged CRUD operation: Products - CREATE - b876faa0-7cf7-489d-a078-a6ad790b5c71
2025-10-19 22:51:51,220 - scripts.sync_manager - INFO - Logged sync event: Products_create_logged - pending
2025-10-19 22:51:51,222 - scripts.sync_manager - INFO - Triggering immediate processing for Products - CREATE - b876faa0-7cf7-489d-a078-a6ad790b5c71
2025-10-19 22:51:51,233 - scripts.sync_manager - INFO - Processing 1 pending sync logs sequentially...
2025-10-19 22:51:51,233 - scripts.sync_manager - INFO - Attempting to process log ID 15: Table `Products`, Type `CREATE`, Record ID `b876faa0-7cf7-489d-a078-a6ad790b5c71`.
2025-10-19 22:51:51,233 - scripts.sync_manager - DEBUG - Log ID 15 details: {'id': 15, 'sync_time': '2025-10-19T22:51:51.201169', 'table_name': 'Products', 'change_type': 'CREATE', 'record_id': 'b876faa0-7cf7-489d-a078-a6ad790b5c71', 'change_data': {'name': 'testing', 'price': 250, 'stock': 25, 'tax': None, 'barcodes': ['1760894509489441'], 'batchId': 'c2d5df1e-07a8-458a-bbd0-3b0e362adcb6', 'id': 'b876faa0-7cf7-489d-a078-a6ad790b5c71', 'createdAt': '2025-10-19T22:51:51.187254', 'updatedAt': '2025-10-19T22:51:51.187254'}, 'status': 'pending', 'retry_count': 0, 'last_retry': None, 'error_message': None, 'created_at': '2025-10-19T22:51:51.201169'}
2025-10-19 22:51:51,647 - scripts.sync_manager - DEBUG - Attempting CREATE operation on table `Products` for record ID: b876faa0-7cf7-489d-a078-a6ad790b5c71
2025-10-19 22:51:51,685 - scripts.sync_manager - DEBUG - Table `Products` columns: ['id', 'name', 'price', 'stock', 'assignedStoreId', 'selling_price', 'createdAt', 'updatedAt']
2025-10-19 22:51:51,685 - scripts.sync_manager - DEBUG - Filtered data for CREATE on `Products`: {'name': 'testing', 'price': 250, 'stock': 25, 'id': 'b876faa0-7cf7-489d-a078-a6ad790b5c71', 'createdAt': '2025-10-19T22:51:51.187254', 'updatedAt': '2025-10-19T22:51:51.187254'}
2025-10-19 22:51:51,686 - scripts.sync_manager - DEBUG - Executing UPSERT query for `Products`: 
                        INSERT INTO `Products` (`name`, `price`, `stock`, `id`, `createdAt`, `updatedAt`)
                        VALUES (%s, %s, %s, %s, %s, %s)
                        ON DUPLICATE KEY UPDATE `name` = VALUES(`name`), `price` = VALUES(`price`), `stock` = VALUES(`stock`), `id` = VALUES(`id`), `createdAt` = VALUES(`createdAt`), `updatedAt` = VALUES(`updatedAt`)
                         with values: ['testing', 250, 25, 'b876faa0-7cf7-489d-a078-a6ad790b5c71', '2025-10-19T22:51:51.187254', '2025-10-19T22:51:51.187254']
2025-10-19 22:51:51,722 - scripts.sync_manager - DEBUG - Handling related tables for Products with record ID: b876faa0-7cf7-489d-a078-a6ad790b5c71 and change data: {'name': 'testing', 'price': 250, 'stock': 25, 'tax': None, 'barcodes': ['1760894509489441'], 'batchId': 'c2d5df1e-07a8-458a-bbd0-3b0e362adcb6', 'id': 'b876faa0-7cf7-489d-a078-a6ad790b5c71', 'createdAt': '2025-10-19T22:51:51.187254', 'updatedAt': '2025-10-19T22:51:51.187254'}
2025-10-19 22:51:51,723 - scripts.sync_manager - DEBUG - Processing barcodes for product ID b876faa0-7cf7-489d-a078-a6ad790b5c71: ['1760894509489441']
2025-10-19 22:51:51,759 - scripts.sync_manager - DEBUG - Existing barcodes: set(), New barcodes: {'1760894509489441'}
2025-10-19 22:51:51,759 - scripts.sync_manager - DEBUG - Adding new barcode 1760894509489441 for product ID b876faa0-7cf7-489d-a078-a6ad790b5c71
2025-10-19 22:51:51,796 - scripts.sync_manager - DEBUG - Finished barcode maintenance for product ID b876faa0-7cf7-489d-a078-a6ad790b5c71
2025-10-19 22:51:51,796 - scripts.sync_manager - INFO - CREATE operation on table `Products` for record ID: b876faa0-7cf7-489d-a078-a6ad790b5c71 successful.
2025-10-19 22:51:51,833 - scripts.sync_manager - DEBUG - Transaction committed for CREATE on `Products` for record ID: b876faa0-7cf7-489d-a078-a6ad790b5c71.
2025-10-19 22:51:52,014 - scripts.sync_manager - DEBUG - Log ID 15 marked as 'completed'.
2025-10-19 22:51:52,028 - scripts.sync_manager - INFO - Logged sync event: Products_create_success - completed
2025-10-19 22:51:52,029 - scripts.sync_manager - INFO - Successfully processed log ID 15.
2025-10-19 22:51:52,031 - scripts.sync_manager - INFO - Finished processing pending logs. Processed: 1, Failed: 0.
2025-10-19 22:52:38,939 - scripts.sync_manager - INFO - Logged CRUD operation: Products - DELETE - b876faa0-7cf7-489d-a078-a6ad790b5c71
2025-10-19 22:52:38,955 - scripts.sync_manager - INFO - Logged sync event: Products_delete_logged - pending
2025-10-19 22:52:38,955 - scripts.sync_manager - INFO - Triggering immediate processing for Products - DELETE - b876faa0-7cf7-489d-a078-a6ad790b5c71
2025-10-19 22:52:38,969 - scripts.sync_manager - INFO - Processing 1 pending sync logs sequentially...
2025-10-19 22:52:38,969 - scripts.sync_manager - INFO - Attempting to process log ID 16: Table `Products`, Type `DELETE`, Record ID `b876faa0-7cf7-489d-a078-a6ad790b5c71`.
2025-10-19 22:52:38,969 - scripts.sync_manager - DEBUG - Log ID 16 details: {'id': 16, 'sync_time': '2025-10-19T22:52:38.939319', 'table_name': 'Products', 'change_type': 'DELETE', 'record_id': 'b876faa0-7cf7-489d-a078-a6ad790b5c71', 'change_data': {'name': 'testing', 'price': 250, 'stock': 25, 'tax': None, 'barcodes': ['1760894509489441'], 'batchId': 'c2d5df1e-07a8-458a-bbd0-3b0e362adcb6', 'id': 'b876faa0-7cf7-489d-a078-a6ad790b5c71', 'createdAt': '2025-10-19T22:51:51.187254', 'updatedAt': '2025-10-19T22:51:51.187254'}, 'status': 'pending', 'retry_count': 0, 'last_retry': None, 'error_message': None, 'created_at': '2025-10-19T22:52:38.939319'}
2025-10-19 22:52:39,471 - scripts.sync_manager - INFO - DELETE operation on table `Products` for record ID: b876faa0-7cf7-489d-a078-a6ad790b5c71 successful.
2025-10-19 22:52:39,507 - scripts.sync_manager - DEBUG - Transaction committed for DELETE on `Products` for record ID: b876faa0-7cf7-489d-a078-a6ad790b5c71.
2025-10-19 22:52:39,690 - scripts.sync_manager - DEBUG - Log ID 16 marked as 'completed'.
2025-10-19 22:52:39,701 - scripts.sync_manager - INFO - Logged sync event: Products_delete_success - completed
2025-10-19 22:52:39,701 - scripts.sync_manager - INFO - Successfully processed log ID 16.
2025-10-19 22:52:39,703 - scripts.sync_manager - INFO - Finished processing pending logs. Processed: 1, Failed: 0.
2025-10-19 22:52:42,396 - scripts.sync_manager - INFO - Initiating scheduled sync operation.
2025-10-19 22:52:42,428 - scripts.sync_manager - INFO - No pending sync logs to process.
2025-10-19 22:52:42,430 - scripts.sync_manager - INFO - Push sync result: {'status': 'success', 'message': 'No pending logs', 'processed': 0, 'failed': 0}
2025-10-19 22:52:42,813 - scripts.sync_manager - INFO - Starting pull from MySQL sync_table. Last sync timestamp: None (fetching last 1 day)
2025-10-19 22:52:42,851 - scripts.sync_manager - INFO - No new entries found in MySQL sync_table.
2025-10-19 22:52:43,031 - scripts.sync_manager - INFO - Pull sync result: {'status': 'success', 'message': 'No new entries', 'pulled': 0}
2025-10-19 22:52:43,051 - scripts.sync_manager - INFO - Logged sync event: scheduled_sync - completed
2025-10-19 22:52:43,051 - scripts.sync_manager - INFO - Scheduled sync operation completed successfully.
2025-10-19 22:52:43,052 - scripts.sync_manager - INFO - No failed logs to retry.
2025-10-19 22:54:11,515 - scripts.sync_manager - INFO - Logged CRUD operation: SystemSettings - UPDATE - 1
2025-10-19 22:54:11,537 - scripts.sync_manager - INFO - Logged sync event: SystemSettings_update_logged - pending
2025-10-19 22:54:11,538 - scripts.sync_manager - INFO - Triggering immediate processing for SystemSettings - UPDATE - 1
2025-10-19 22:54:11,550 - scripts.sync_manager - INFO - Processing 1 pending sync logs sequentially...
2025-10-19 22:54:11,550 - scripts.sync_manager - INFO - Attempting to process log ID 17: Table `SystemSettings`, Type `UPDATE`, Record ID `1`.
2025-10-19 22:54:11,551 - scripts.sync_manager - DEBUG - Log ID 17 details: {'id': 17, 'sync_time': '2025-10-19T22:54:11.514705', 'table_name': 'SystemSettings', 'change_type': 'UPDATE', 'record_id': 1, 'change_data': {'systemSettings': {'companyAddress': '123 Jewelry Street, Mumbai, Maharashtra 400001', 'companyEmail': 'info@siriartjewellery.com', 'companyName': 'SIRI ART JEWELLERY', 'companyPhone': '+91 98765 43210', 'gstin': '27AAFCV2449G1Z7', 'id': 1, 'taxPercentage': 11.1}, 'billFormats': {'A4': {'height': 297, 'margins': {'bottom': 20, 'left': 20, 'right': 20, 'top': 20}, 'unit': 'mm', 'width': 210}, 'A5': {'height': 210, 'margins': {'bottom': 15, 'left': 15, 'right': 15, 'top': 15}, 'unit': 'mm', 'width': 148}, 'Custom': {'height': 297, 'margins': {'bottom': 20, 'left': 20, 'right': 20, 'top': 20}, 'unit': 'mm', 'width': 210}, 'Thermal_58mm': {'height': 'auto', 'margins': {'bottom': 3, 'left': 3, 'right': 3, 'top': 3}, 'unit': 'mm', 'width': 58}, 'Thermal_80mm': {'height': 'auto', 'margins': {'bottom': 5, 'left': 5, 'right': 5, 'top': 5}, 'unit': 'mm', 'width': 80}}, 'storeFormats': {}}, 'status': 'pending', 'retry_count': 0, 'last_retry': None, 'error_message': None, 'created_at': '2025-10-19T22:54:11.514705'}
2025-10-19 22:54:11,956 - scripts.sync_manager - DEBUG - Attempting UPDATE operation on table `SystemSettings` for record ID: 1
2025-10-19 22:54:11,985 - scripts.sync_manager - DEBUG - Table `SystemSettings` columns: ['id', 'gstin', 'taxPercentage', 'companyName', 'companyAddress', 'companyPhone', 'companyEmail']
2025-10-19 22:54:11,985 - scripts.sync_manager - DEBUG - Filtered data for UPDATE on `SystemSettings`: {}
2025-10-19 22:54:11,985 - scripts.sync_manager - DEBUG - Added record_id 1 to filtered_data for SystemSettings.
2025-10-19 22:54:11,985 - scripts.sync_manager - DEBUG - Executing UPSERT query for `SystemSettings`: 
                        INSERT INTO `SystemSettings` (`id`)
                        VALUES (%s)
                        ON DUPLICATE KEY UPDATE `id` = VALUES(`id`)
                         with values: [1]
2025-10-19 22:54:12,031 - scripts.sync_manager - DEBUG - Handling related tables for SystemSettings with record ID: 1 and change data: {'systemSettings': {'companyAddress': '123 Jewelry Street, Mumbai, Maharashtra 400001', 'companyEmail': 'info@siriartjewellery.com', 'companyName': 'SIRI ART JEWELLERY', 'companyPhone': '+91 98765 43210', 'gstin': '27AAFCV2449G1Z7', 'id': 1, 'taxPercentage': 11.1}, 'billFormats': {'A4': {'height': 297, 'margins': {'bottom': 20, 'left': 20, 'right': 20, 'top': 20}, 'unit': 'mm', 'width': 210}, 'A5': {'height': 210, 'margins': {'bottom': 15, 'left': 15, 'right': 15, 'top': 15}, 'unit': 'mm', 'width': 148}, 'Custom': {'height': 297, 'margins': {'bottom': 20, 'left': 20, 'right': 20, 'top': 20}, 'unit': 'mm', 'width': 210}, 'Thermal_58mm': {'height': 'auto', 'margins': {'bottom': 3, 'left': 3, 'right': 3, 'top': 3}, 'unit': 'mm', 'width': 58}, 'Thermal_80mm': {'height': 'auto', 'margins': {'bottom': 5, 'left': 5, 'right': 5, 'top': 5}, 'unit': 'mm', 'width': 80}}, 'storeFormats': {}}
2025-10-19 22:54:12,034 - scripts.sync_manager - INFO - UPDATE operation on table `SystemSettings` for record ID: 1 successful.
2025-10-19 22:54:12,071 - scripts.sync_manager - DEBUG - Transaction committed for UPDATE on `SystemSettings` for record ID: 1.
2025-10-19 22:54:12,251 - scripts.sync_manager - DEBUG - Log ID 17 marked as 'completed'.
2025-10-19 22:54:12,296 - scripts.sync_manager - INFO - Logged sync event: SystemSettings_update_success - completed
2025-10-19 22:54:12,297 - scripts.sync_manager - INFO - Successfully processed log ID 17.
2025-10-19 22:54:12,306 - scripts.sync_manager - INFO - Finished processing pending logs. Processed: 1, Failed: 0.
2025-10-19 22:54:43,297 - scripts.sync_manager - INFO - Logged CRUD operation: SystemSettings - UPDATE - 1
2025-10-19 22:54:43,310 - scripts.sync_manager - INFO - Logged sync event: SystemSettings_update_logged - pending
2025-10-19 22:54:43,312 - scripts.sync_manager - INFO - Triggering immediate processing for SystemSettings - UPDATE - 1
2025-10-19 22:54:43,323 - scripts.sync_manager - INFO - Processing 1 pending sync logs sequentially...
2025-10-19 22:54:43,323 - scripts.sync_manager - INFO - Attempting to process log ID 18: Table `SystemSettings`, Type `UPDATE`, Record ID `1`.
2025-10-19 22:54:43,324 - scripts.sync_manager - DEBUG - Log ID 18 details: {'id': 18, 'sync_time': '2025-10-19T22:54:43.294704', 'table_name': 'SystemSettings', 'change_type': 'UPDATE', 'record_id': 1, 'change_data': {'systemSettings': {'companyAddress': '123 Jewelry Street, Mumbai, Maharashtra 400001', 'companyEmail': 'info@siriartjewellery.com', 'companyName': 'SIRI ART JEWELLERY', 'companyPhone': '+91 889771771', 'gstin': '27AAFCV2449G1Z7', 'id': 1, 'taxPercentage': 11.1}, 'billFormats': {'A4': {'height': 297, 'margins': {'bottom': 20, 'left': 20, 'right': 20, 'top': 20}, 'unit': 'mm', 'width': 210}, 'A5': {'height': 210, 'margins': {'bottom': 15, 'left': 15, 'right': 15, 'top': 15}, 'unit': 'mm', 'width': 148}, 'Custom': {'height': 297, 'margins': {'bottom': 20, 'left': 20, 'right': 20, 'top': 20}, 'unit': 'mm', 'width': 210}, 'Thermal_58mm': {'height': 'auto', 'margins': {'bottom': 3, 'left': 3, 'right': 3, 'top': 3}, 'unit': 'mm', 'width': 58}, 'Thermal_80mm': {'height': 'auto', 'margins': {'bottom': 5, 'left': 5, 'right': 5, 'top': 5}, 'unit': 'mm', 'width': 80}}, 'storeFormats': {}}, 'status': 'pending', 'retry_count': 0, 'last_retry': None, 'error_message': None, 'created_at': '2025-10-19T22:54:43.294704'}
2025-10-19 22:54:43,741 - scripts.sync_manager - DEBUG - Attempting UPDATE operation on table `SystemSettings` for record ID: 1
2025-10-19 22:54:43,768 - scripts.sync_manager - DEBUG - Table `SystemSettings` columns: ['id', 'gstin', 'taxPercentage', 'companyName', 'companyAddress', 'companyPhone', 'companyEmail']
2025-10-19 22:54:43,768 - scripts.sync_manager - DEBUG - Filtered data for UPDATE on `SystemSettings`: {}
2025-10-19 22:54:43,768 - scripts.sync_manager - DEBUG - Added record_id 1 to filtered_data for SystemSettings.
2025-10-19 22:54:43,768 - scripts.sync_manager - DEBUG - Executing UPSERT query for `SystemSettings`: 
                        INSERT INTO `SystemSettings` (`id`)
                        VALUES (%s)
                        ON DUPLICATE KEY UPDATE `id` = VALUES(`id`)
                         with values: [1]
2025-10-19 22:54:43,815 - scripts.sync_manager - DEBUG - Handling related tables for SystemSettings with record ID: 1 and change data: {'systemSettings': {'companyAddress': '123 Jewelry Street, Mumbai, Maharashtra 400001', 'companyEmail': 'info@siriartjewellery.com', 'companyName': 'SIRI ART JEWELLERY', 'companyPhone': '+91 889771771', 'gstin': '27AAFCV2449G1Z7', 'id': 1, 'taxPercentage': 11.1}, 'billFormats': {'A4': {'height': 297, 'margins': {'bottom': 20, 'left': 20, 'right': 20, 'top': 20}, 'unit': 'mm', 'width': 210}, 'A5': {'height': 210, 'margins': {'bottom': 15, 'left': 15, 'right': 15, 'top': 15}, 'unit': 'mm', 'width': 148}, 'Custom': {'height': 297, 'margins': {'bottom': 20, 'left': 20, 'right': 20, 'top': 20}, 'unit': 'mm', 'width': 210}, 'Thermal_58mm': {'height': 'auto', 'margins': {'bottom': 3, 'left': 3, 'right': 3, 'top': 3}, 'unit': 'mm', 'width': 58}, 'Thermal_80mm': {'height': 'auto', 'margins': {'bottom': 5, 'left': 5, 'right': 5, 'top': 5}, 'unit': 'mm', 'width': 80}}, 'storeFormats': {}}
2025-10-19 22:54:43,816 - scripts.sync_manager - INFO - UPDATE operation on table `SystemSettings` for record ID: 1 successful.
2025-10-19 22:54:43,851 - scripts.sync_manager - DEBUG - Transaction committed for UPDATE on `SystemSettings` for record ID: 1.
2025-10-19 22:54:44,046 - scripts.sync_manager - DEBUG - Log ID 18 marked as 'completed'.
2025-10-19 22:54:44,069 - scripts.sync_manager - INFO - Logged sync event: SystemSettings_update_success - completed
2025-10-19 22:54:44,069 - scripts.sync_manager - INFO - Successfully processed log ID 18.
2025-10-19 22:54:44,073 - scripts.sync_manager - INFO - Finished processing pending logs. Processed: 1, Failed: 0.
2025-10-19 22:57:03,220 - scripts.sync_manager - INFO - Logged CRUD operation: Products - CREATE - 4d74028c-927f-4ae9-a8c9-24eee3c8874d
2025-10-19 22:57:03,241 - scripts.sync_manager - INFO - Logged sync event: Products_create_logged - pending
2025-10-19 22:57:03,241 - scripts.sync_manager - INFO - Triggering immediate processing for Products - CREATE - 4d74028c-927f-4ae9-a8c9-24eee3c8874d
2025-10-19 22:57:03,257 - scripts.sync_manager - INFO - Processing 1 pending sync logs sequentially...
2025-10-19 22:57:03,257 - scripts.sync_manager - INFO - Attempting to process log ID 19: Table `Products`, Type `CREATE`, Record ID `4d74028c-927f-4ae9-a8c9-24eee3c8874d`.
2025-10-19 22:57:03,257 - scripts.sync_manager - DEBUG - Log ID 19 details: {'id': 19, 'sync_time': '2025-10-19T22:57:03.220931', 'table_name': 'Products', 'change_type': 'CREATE', 'record_id': '4d74028c-927f-4ae9-a8c9-24eee3c8874d', 'change_data': {'name': 'proven testing sets ', 'price': 105040, 'stock': 15424, 'tax': None, 'barcodes': ['1760894821648803'], 'batchId': 'c2d5df1e-07a8-458a-bbd0-3b0e362adcb6', 'id': '4d74028c-927f-4ae9-a8c9-24eee3c8874d', 'createdAt': '2025-10-19T22:57:03.193300', 'updatedAt': '2025-10-19T22:57:03.193300'}, 'status': 'pending', 'retry_count': 0, 'last_retry': None, 'error_message': None, 'created_at': '2025-10-19T22:57:03.220931'}
2025-10-19 22:57:03,730 - scripts.sync_manager - DEBUG - Attempting CREATE operation on table `Products` for record ID: 4d74028c-927f-4ae9-a8c9-24eee3c8874d
2025-10-19 22:57:03,773 - scripts.sync_manager - DEBUG - Table `Products` columns: ['id', 'name', 'price', 'stock', 'assignedStoreId', 'selling_price', 'createdAt', 'updatedAt']
2025-10-19 22:57:03,773 - scripts.sync_manager - DEBUG - Filtered data for CREATE on `Products`: {'name': 'proven testing sets ', 'price': 105040, 'stock': 15424, 'id': '4d74028c-927f-4ae9-a8c9-24eee3c8874d', 'createdAt': '2025-10-19T22:57:03.193300', 'updatedAt': '2025-10-19T22:57:03.193300'}
2025-10-19 22:57:03,773 - scripts.sync_manager - DEBUG - Executing UPSERT query for `Products`: 
                        INSERT INTO `Products` (`name`, `price`, `stock`, `id`, `createdAt`, `updatedAt`)
                        VALUES (%s, %s, %s, %s, %s, %s)
                        ON DUPLICATE KEY UPDATE `name` = VALUES(`name`), `price` = VALUES(`price`), `stock` = VALUES(`stock`), `id` = VALUES(`id`), `createdAt` = VALUES(`createdAt`), `updatedAt` = VALUES(`updatedAt`)
                         with values: ['proven testing sets ', 105040, 15424, '4d74028c-927f-4ae9-a8c9-24eee3c8874d', '2025-10-19T22:57:03.193300', '2025-10-19T22:57:03.193300']
2025-10-19 22:57:03,822 - scripts.sync_manager - DEBUG - Handling related tables for Products with record ID: 4d74028c-927f-4ae9-a8c9-24eee3c8874d and change data: {'name': 'proven testing sets ', 'price': 105040, 'stock': 15424, 'tax': None, 'barcodes': ['1760894821648803'], 'batchId': 'c2d5df1e-07a8-458a-bbd0-3b0e362adcb6', 'id': '4d74028c-927f-4ae9-a8c9-24eee3c8874d', 'createdAt': '2025-10-19T22:57:03.193300', 'updatedAt': '2025-10-19T22:57:03.193300'}
2025-10-19 22:57:03,822 - scripts.sync_manager - DEBUG - Processing barcodes for product ID 4d74028c-927f-4ae9-a8c9-24eee3c8874d: ['1760894821648803']
2025-10-19 22:57:03,862 - scripts.sync_manager - DEBUG - Existing barcodes: set(), New barcodes: {'1760894821648803'}
2025-10-19 22:57:03,862 - scripts.sync_manager - DEBUG - Adding new barcode 1760894821648803 for product ID 4d74028c-927f-4ae9-a8c9-24eee3c8874d
2025-10-19 22:57:03,903 - scripts.sync_manager - DEBUG - Finished barcode maintenance for product ID 4d74028c-927f-4ae9-a8c9-24eee3c8874d
2025-10-19 22:57:03,903 - scripts.sync_manager - INFO - CREATE operation on table `Products` for record ID: 4d74028c-927f-4ae9-a8c9-24eee3c8874d successful.
2025-10-19 22:57:03,939 - scripts.sync_manager - DEBUG - Transaction committed for CREATE on `Products` for record ID: 4d74028c-927f-4ae9-a8c9-24eee3c8874d.
2025-10-19 22:57:04,129 - scripts.sync_manager - DEBUG - Log ID 19 marked as 'completed'.
2025-10-19 22:57:04,142 - scripts.sync_manager - INFO - Logged sync event: Products_create_success - completed
2025-10-19 22:57:04,143 - scripts.sync_manager - INFO - Successfully processed log ID 19.
2025-10-19 22:57:04,145 - scripts.sync_manager - INFO - Finished processing pending logs. Processed: 1, Failed: 0.
2025-10-19 22:59:30,572 - scripts.sync_manager - INFO - Logged CRUD operation: Products - UPDATE - 030da3ec-16f9-45ce-ad8c-4c99578f20e3
2025-10-19 22:59:30,583 - scripts.sync_manager - INFO - Logged sync event: Products_update_logged - pending
2025-10-19 22:59:30,583 - scripts.sync_manager - INFO - Triggering immediate processing for Products - UPDATE - 030da3ec-16f9-45ce-ad8c-4c99578f20e3
2025-10-19 22:59:30,592 - scripts.sync_manager - INFO - Processing 1 pending sync logs sequentially...
2025-10-19 22:59:30,592 - scripts.sync_manager - INFO - Attempting to process log ID 20: Table `Products`, Type `UPDATE`, Record ID `030da3ec-16f9-45ce-ad8c-4c99578f20e3`.
2025-10-19 22:59:30,592 - scripts.sync_manager - DEBUG - Log ID 20 details: {'id': 20, 'sync_time': '2025-10-19T22:59:30.567487', 'table_name': 'Products', 'change_type': 'UPDATE', 'record_id': '030da3ec-16f9-45ce-ad8c-4c99578f20e3', 'change_data': {'id': '030da3ec-16f9-45ce-ad8c-4c99578f20e3', 'name': 'V. Belt', 'price': 3100.0, 'stock': 0, 'assignedStoreId': None, 'selling_price': None, 'createdAt': '2025-09-20T12:58:02', 'updatedAt': '2025-10-19T22:59:30.543583', 'barcodes': ['1758353281834799']}, 'status': 'pending', 'retry_count': 0, 'last_retry': None, 'error_message': None, 'created_at': '2025-10-19T22:59:30.567487'}
2025-10-19 22:59:31,037 - scripts.sync_manager - DEBUG - Attempting UPDATE operation on table `Products` for record ID: 030da3ec-16f9-45ce-ad8c-4c99578f20e3
2025-10-19 22:59:31,075 - scripts.sync_manager - DEBUG - Table `Products` columns: ['id', 'name', 'price', 'stock', 'assignedStoreId', 'selling_price', 'createdAt', 'updatedAt']
2025-10-19 22:59:31,075 - scripts.sync_manager - DEBUG - Filtered data for UPDATE on `Products`: {'id': '030da3ec-16f9-45ce-ad8c-4c99578f20e3', 'name': 'V. Belt', 'price': 3100.0, 'stock': 0, 'assignedStoreId': None, 'selling_price': None, 'createdAt': '2025-09-20T12:58:02', 'updatedAt': '2025-10-19T22:59:30.543583'}
2025-10-19 22:59:31,075 - scripts.sync_manager - DEBUG - Executing UPSERT query for `Products`: 
                        INSERT INTO `Products` (`id`, `name`, `price`, `stock`, `assignedStoreId`, `selling_price`, `createdAt`, `updatedAt`)
                        VALUES (%s, %s, %s, %s, %s, %s, %s, %s)
                        ON DUPLICATE KEY UPDATE `id` = VALUES(`id`), `name` = VALUES(`name`), `price` = VALUES(`price`), `stock` = VALUES(`stock`), `assignedStoreId` = VALUES(`assignedStoreId`), `selling_price` = VALUES(`selling_price`), `createdAt` = VALUES(`createdAt`), `updatedAt` = VALUES(`updatedAt`)
                         with values: ['030da3ec-16f9-45ce-ad8c-4c99578f20e3', 'V. Belt', 3100.0, 0, None, None, '2025-09-20T12:58:02', '2025-10-19T22:59:30.543583']
2025-10-19 22:59:31,123 - scripts.sync_manager - DEBUG - Handling related tables for Products with record ID: 030da3ec-16f9-45ce-ad8c-4c99578f20e3 and change data: {'id': '030da3ec-16f9-45ce-ad8c-4c99578f20e3', 'name': 'V. Belt', 'price': 3100.0, 'stock': 0, 'assignedStoreId': None, 'selling_price': None, 'createdAt': '2025-09-20T12:58:02', 'updatedAt': '2025-10-19T22:59:30.543583', 'barcodes': ['1758353281834799']}
2025-10-19 22:59:31,124 - scripts.sync_manager - DEBUG - Processing barcodes for product ID 030da3ec-16f9-45ce-ad8c-4c99578f20e3: ['1758353281834799']
2025-10-19 22:59:31,159 - scripts.sync_manager - DEBUG - Existing barcodes: {'1758353281834799'}, New barcodes: {'1758353281834799'}
2025-10-19 22:59:31,159 - scripts.sync_manager - DEBUG - Finished barcode maintenance for product ID 030da3ec-16f9-45ce-ad8c-4c99578f20e3
2025-10-19 22:59:31,159 - scripts.sync_manager - INFO - UPDATE operation on table `Products` for record ID: 030da3ec-16f9-45ce-ad8c-4c99578f20e3 successful.
2025-10-19 22:59:31,197 - scripts.sync_manager - DEBUG - Transaction committed for UPDATE on `Products` for record ID: 030da3ec-16f9-45ce-ad8c-4c99578f20e3.
2025-10-19 22:59:31,381 - scripts.sync_manager - DEBUG - Log ID 20 marked as 'completed'.
2025-10-19 22:59:31,398 - scripts.sync_manager - INFO - Logged sync event: Products_update_success - completed
2025-10-19 22:59:31,399 - scripts.sync_manager - INFO - Successfully processed log ID 20.
2025-10-19 22:59:31,404 - scripts.sync_manager - INFO - Finished processing pending logs. Processed: 1, Failed: 0.
2025-10-19 22:59:31,424 - scripts.sync_manager - INFO - Logged CRUD operation: Bills - CREATE - 1760894970535
2025-10-19 22:59:31,436 - scripts.sync_manager - INFO - Logged sync event: Bills_create_logged - pending
2025-10-19 22:59:31,438 - scripts.sync_manager - INFO - Triggering immediate processing for Bills - CREATE - 1760894970535
2025-10-19 22:59:31,455 - scripts.sync_manager - INFO - Processing 1 pending sync logs sequentially...
2025-10-19 22:59:31,455 - scripts.sync_manager - INFO - Attempting to process log ID 21: Table `Bills`, Type `CREATE`, Record ID `1760894970535`.
2025-10-19 22:59:31,456 - scripts.sync_manager - DEBUG - Log ID 21 details: {'id': 21, 'sync_time': '2025-10-19T22:59:31.418456', 'table_name': 'Bills', 'change_type': 'CREATE', 'record_id': '1760894970535', 'change_data': {'id': '1760894970535', 'customerName': 'primetest', 'customerEmail': '', 'customerPhone': '', 'items': [{'productId': '030da3ec-16f9-45ce-ad8c-4c99578f20e3', 'productName': 'V. Belt', 'price': 3100, 'quantity': 1, 'total': 3100}], 'subtotal': 3100, 'tax': 310, 'discountPercentage': 10, 'discountAmount': 310, 'total': 3100, 'date': '2025-10-19T17:29:30.535Z', 'status': 'Paid'}, 'status': 'pending', 'retry_count': 0, 'last_retry': None, 'error_message': None, 'created_at': '2025-10-19T22:59:31.418456'}
2025-10-19 22:59:31,869 - scripts.sync_manager - DEBUG - Attempting CREATE operation on table `Bills` for record ID: 1760894970535
2025-10-19 22:59:31,906 - scripts.sync_manager - DEBUG - Table `Bills` columns: ['id', 'storeId', 'storeName', 'storeAddress', 'customerName', 'customerPhone', 'customerEmail', 'customerAddress', 'customerId', 'subtotal', 'taxPercentage', 'taxAmount', 'discountPercentage', 'discountAmount', 'total', 'paymentMethod', 'timestamp', 'notes', 'gstin', 'companyName', 'companyAddress', 'companyPhone', 'companyEmail', 'billFormat', 'createdBy']
2025-10-19 22:59:31,906 - scripts.sync_manager - DEBUG - Filtered data for CREATE on `Bills`: {'id': '1760894970535', 'customerName': 'primetest', 'customerEmail': '', 'customerPhone': '', 'subtotal': 3100, 'discountPercentage': 10, 'discountAmount': 310, 'total': 3100}
2025-10-19 22:59:31,906 - scripts.sync_manager - DEBUG - Executing UPSERT query for `Bills`: 
                        INSERT INTO `Bills` (`id`, `customerName`, `customerEmail`, `customerPhone`, `subtotal`, `discountPercentage`, `discountAmount`, `total`)
                        VALUES (%s, %s, %s, %s, %s, %s, %s, %s)
                        ON DUPLICATE KEY UPDATE `id` = VALUES(`id`), `customerName` = VALUES(`customerName`), `customerEmail` = VALUES(`customerEmail`), `customerPhone` = VALUES(`customerPhone`), `subtotal` = VALUES(`subtotal`), `discountPercentage` = VALUES(`discountPercentage`), `discountAmount` = VALUES(`discountAmount`), `total` = VALUES(`total`)
                         with values: ['1760894970535', 'primetest', '', '', 3100, 10, 310, 3100]
2025-10-19 22:59:31,957 - scripts.sync_manager - DEBUG - Handling related tables for Bills with record ID: 1760894970535 and change data: {'id': '1760894970535', 'customerName': 'primetest', 'customerEmail': '', 'customerPhone': '', 'items': [{'productId': '030da3ec-16f9-45ce-ad8c-4c99578f20e3', 'productName': 'V. Belt', 'price': 3100, 'quantity': 1, 'total': 3100}], 'subtotal': 3100, 'tax': 310, 'discountPercentage': 10, 'discountAmount': 310, 'total': 3100, 'date': '2025-10-19T17:29:30.535Z', 'status': 'Paid'}
2025-10-19 22:59:31,957 - scripts.sync_manager - DEBUG - Processing bill items for bill ID 1760894970535: [{'productId': '030da3ec-16f9-45ce-ad8c-4c99578f20e3', 'productName': 'V. Belt', 'price': 3100, 'quantity': 1, 'total': 3100}]
2025-10-19 22:59:31,957 - scripts.sync_manager - DEBUG - Deleting existing bill items for bill ID 1760894970535
2025-10-19 22:59:32,082 - scripts.sync_manager - ERROR - Error in database operation for Bills (ID: 1760894970535): 0
Traceback (most recent call last):
  File "E:\Siri-apps\billing-app\backend\scripts\sync_manager.py", line 301, in apply_change_to_mysql_db
    self._handle_related_tables(cursor, table_name, record_id, change_data)
  File "E:\Siri-apps\billing-app\backend\scripts\sync_manager.py", line 359, in _handle_related_tables
    bill_item_columns = [row[0] for row in cursor.fetchall()]
                         ~~~^^^
KeyError: 0
2025-10-19 22:59:32,267 - scripts.sync_manager - DEBUG - Log ID 21 marked as 'failed'. Retry count: 1
2025-10-19 22:59:32,281 - scripts.sync_manager - INFO - Logged sync event: Bills_create_failed - failed
2025-10-19 22:59:32,281 - scripts.sync_manager - WARNING - Failed to process log ID 21. Will retry later if attempts remain.
2025-10-19 22:59:32,281 - scripts.sync_manager - INFO - Finished processing pending logs. Processed: 0, Failed: 1.
2025-10-19 23:04:18,257 - scripts.sync_manager - INFO - Starting background sync scheduler setup.
2025-10-19 23:04:18,258 - scripts.sync_manager - DEBUG - Scheduled tasks: scheduled_sync (15min), retry_failed_logs (15min), cleanup_old_logs (daily 02:00), _cleanup_log_files (daily 02:00).
2025-10-19 23:04:18,260 - scripts.sync_manager - INFO - Background sync scheduler thread started.
2025-10-19 23:04:18,260 - scripts.sync_manager - INFO - Background sync process started.
2025-10-19 23:04:18,261 - scripts.sync_manager - INFO - Performing initial scheduled sync run.
2025-10-19 23:04:18,263 - scripts.sync_manager - INFO - Initiating scheduled sync operation.
2025-10-19 23:04:18,290 - scripts.sync_manager - INFO - No pending sync logs to process.
2025-10-19 23:04:18,290 - scripts.sync_manager - INFO - Push sync result: {'status': 'success', 'message': 'No pending logs', 'processed': 0, 'failed': 0}
2025-10-19 23:04:18,396 - scripts.sync_manager - INFO - Starting pull from MySQL sync_table. Last sync timestamp: None (fetching last 1 day)
2025-10-19 23:04:18,434 - scripts.sync_manager - INFO - No new entries found in MySQL sync_table.
2025-10-19 23:04:18,600 - scripts.sync_manager - INFO - Pull sync result: {'status': 'success', 'message': 'No new entries', 'pulled': 0}
2025-10-19 23:04:18,645 - scripts.sync_manager - INFO - Logged sync event: scheduled_sync - completed
2025-10-19 23:04:18,646 - scripts.sync_manager - INFO - Scheduled sync operation completed successfully.
2025-10-19 23:06:01,787 - scripts.sync_manager - INFO - Logged CRUD operation: Products - UPDATE - 030da3ec-16f9-45ce-ad8c-4c99578f20e3
2025-10-19 23:06:01,802 - scripts.sync_manager - INFO - Logged sync event: Products_update_logged - pending
2025-10-19 23:06:01,802 - scripts.sync_manager - INFO - Triggering immediate processing for Products - UPDATE - 030da3ec-16f9-45ce-ad8c-4c99578f20e3
2025-10-19 23:06:01,817 - scripts.sync_manager - INFO - Processing 1 pending sync logs sequentially...
2025-10-19 23:06:01,822 - scripts.sync_manager - INFO - Attempting to process log ID 22: Table `Products`, Type `UPDATE`, Record ID `030da3ec-16f9-45ce-ad8c-4c99578f20e3`.
2025-10-19 23:06:01,822 - scripts.sync_manager - DEBUG - Log ID 22 details: {'id': 22, 'sync_time': '2025-10-19T23:06:01.787687', 'table_name': 'Products', 'change_type': 'UPDATE', 'record_id': '030da3ec-16f9-45ce-ad8c-4c99578f20e3', 'change_data': {'id': '030da3ec-16f9-45ce-ad8c-4c99578f20e3', 'name': 'V. Belt', 'price': 3100.0, 'stock': 1, 'assignedStoreId': None, 'selling_price': None, 'createdAt': '2025-09-20T12:58:02', 'updatedAt': '2025-10-19T23:06:01.774220', 'barcodes': ['1758353281834799']}, 'status': 'pending', 'retry_count': 0, 'last_retry': None, 'error_message': None, 'created_at': '2025-10-19T23:06:01.787687'}
2025-10-19 23:06:02,238 - scripts.sync_manager - DEBUG - Attempting UPDATE operation on table `Products` for record ID: 030da3ec-16f9-45ce-ad8c-4c99578f20e3
2025-10-19 23:06:02,280 - scripts.sync_manager - DEBUG - Table `Products` columns: ['id', 'name', 'price', 'stock', 'assignedStoreId', 'selling_price', 'createdAt', 'updatedAt']
2025-10-19 23:06:02,281 - scripts.sync_manager - DEBUG - Filtered data for UPDATE on `Products`: {'id': '030da3ec-16f9-45ce-ad8c-4c99578f20e3', 'name': 'V. Belt', 'price': 3100.0, 'stock': 1, 'assignedStoreId': None, 'selling_price': None, 'createdAt': '2025-09-20T12:58:02', 'updatedAt': '2025-10-19T23:06:01.774220'}
2025-10-19 23:06:02,283 - scripts.sync_manager - DEBUG - Executing UPSERT query for `Products`: 
                        INSERT INTO `Products` (`id`, `name`, `price`, `stock`, `assignedStoreId`, `selling_price`, `createdAt`, `updatedAt`)
                        VALUES (%s, %s, %s, %s, %s, %s, %s, %s)
                        ON DUPLICATE KEY UPDATE `id` = VALUES(`id`), `name` = VALUES(`name`), `price` = VALUES(`price`), `stock` = VALUES(`stock`), `assignedStoreId` = VALUES(`assignedStoreId`), `selling_price` = VALUES(`selling_price`), `createdAt` = VALUES(`createdAt`), `updatedAt` = VALUES(`updatedAt`)
                         with values: ['030da3ec-16f9-45ce-ad8c-4c99578f20e3', 'V. Belt', 3100.0, 1, None, None, '2025-09-20T12:58:02', '2025-10-19T23:06:01.774220']
2025-10-19 23:06:02,321 - scripts.sync_manager - DEBUG - Handling related tables for Products with record ID: 030da3ec-16f9-45ce-ad8c-4c99578f20e3 and change data: {'id': '030da3ec-16f9-45ce-ad8c-4c99578f20e3', 'name': 'V. Belt', 'price': 3100.0, 'stock': 1, 'assignedStoreId': None, 'selling_price': None, 'createdAt': '2025-09-20T12:58:02', 'updatedAt': '2025-10-19T23:06:01.774220', 'barcodes': ['1758353281834799']}
2025-10-19 23:06:02,321 - scripts.sync_manager - DEBUG - Processing barcodes for product ID 030da3ec-16f9-45ce-ad8c-4c99578f20e3: ['1758353281834799']
2025-10-19 23:06:02,353 - scripts.sync_manager - DEBUG - Existing barcodes: {'1758353281834799'}, New barcodes: {'1758353281834799'}
2025-10-19 23:06:02,353 - scripts.sync_manager - DEBUG - Finished barcode maintenance for product ID 030da3ec-16f9-45ce-ad8c-4c99578f20e3
2025-10-19 23:06:02,353 - scripts.sync_manager - INFO - UPDATE operation on table `Products` for record ID: 030da3ec-16f9-45ce-ad8c-4c99578f20e3 successful.
2025-10-19 23:06:02,396 - scripts.sync_manager - DEBUG - Transaction committed for UPDATE on `Products` for record ID: 030da3ec-16f9-45ce-ad8c-4c99578f20e3.
2025-10-19 23:06:02,588 - scripts.sync_manager - DEBUG - Log ID 22 marked as 'completed'.
2025-10-19 23:06:02,618 - scripts.sync_manager - INFO - Logged sync event: Products_update_success - completed
2025-10-19 23:06:02,618 - scripts.sync_manager - INFO - Successfully processed log ID 22.
2025-10-19 23:06:02,623 - scripts.sync_manager - INFO - Finished processing pending logs. Processed: 1, Failed: 0.
2025-10-19 23:06:02,635 - scripts.sync_manager - INFO - Logged CRUD operation: Bills - DELETE - 1760894970535
2025-10-19 23:06:02,653 - scripts.sync_manager - INFO - Logged sync event: Bills_delete_logged - pending
2025-10-19 23:06:02,653 - scripts.sync_manager - INFO - Triggering immediate processing for Bills - DELETE - 1760894970535
2025-10-19 23:06:02,668 - scripts.sync_manager - INFO - Processing 1 pending sync logs sequentially...
2025-10-19 23:06:02,668 - scripts.sync_manager - INFO - Attempting to process log ID 23: Table `Bills`, Type `DELETE`, Record ID `1760894970535`.
2025-10-19 23:06:02,668 - scripts.sync_manager - DEBUG - Log ID 23 details: {'id': 23, 'sync_time': '2025-10-19T23:06:02.635933', 'table_name': 'Bills', 'change_type': 'DELETE', 'record_id': '1760894970535', 'change_data': {'id': '1760894970535', 'customerName': 'primetest', 'customerEmail': '', 'customerPhone': '', 'items': [{'productId': '030da3ec-16f9-45ce-ad8c-4c99578f20e3', 'productName': 'V. Belt', 'price': 3100, 'quantity': 1, 'total': 3100}], 'subtotal': 3100, 'tax': 310, 'discountPercentage': 10, 'discountAmount': 310, 'total': 3100, 'date': '2025-10-19T17:29:30.535Z', 'status': 'Paid'}, 'status': 'pending', 'retry_count': 0, 'last_retry': None, 'error_message': None, 'created_at': '2025-10-19T23:06:02.635933'}
2025-10-19 23:06:03,148 - scripts.sync_manager - INFO - DELETE operation on table `Bills` for record ID: 1760894970535 successful.
2025-10-19 23:06:03,185 - scripts.sync_manager - DEBUG - Transaction committed for DELETE on `Bills` for record ID: 1760894970535.
2025-10-19 23:06:03,366 - scripts.sync_manager - DEBUG - Log ID 23 marked as 'completed'.
2025-10-19 23:06:03,388 - scripts.sync_manager - INFO - Logged sync event: Bills_delete_success - completed
2025-10-19 23:06:03,388 - scripts.sync_manager - INFO - Successfully processed log ID 23.
2025-10-19 23:06:03,391 - scripts.sync_manager - INFO - Finished processing pending logs. Processed: 1, Failed: 0.
2025-10-19 23:06:32,700 - scripts.sync_manager - INFO - Logged CRUD operation: Products - DELETE - 4d74028c-927f-4ae9-a8c9-24eee3c8874d
2025-10-19 23:06:32,711 - scripts.sync_manager - INFO - Logged sync event: Products_delete_logged - pending
2025-10-19 23:06:32,711 - scripts.sync_manager - INFO - Triggering immediate processing for Products - DELETE - 4d74028c-927f-4ae9-a8c9-24eee3c8874d
2025-10-19 23:06:32,725 - scripts.sync_manager - INFO - Processing 1 pending sync logs sequentially...
2025-10-19 23:06:32,725 - scripts.sync_manager - INFO - Attempting to process log ID 24: Table `Products`, Type `DELETE`, Record ID `4d74028c-927f-4ae9-a8c9-24eee3c8874d`.
2025-10-19 23:06:32,725 - scripts.sync_manager - DEBUG - Log ID 24 details: {'id': 24, 'sync_time': '2025-10-19T23:06:32.697061', 'table_name': 'Products', 'change_type': 'DELETE', 'record_id': '4d74028c-927f-4ae9-a8c9-24eee3c8874d', 'change_data': {'name': 'proven testing sets ', 'price': 105040, 'stock': 15424, 'tax': None, 'barcodes': ['1760894821648803'], 'batchId': 'c2d5df1e-07a8-458a-bbd0-3b0e362adcb6', 'id': '4d74028c-927f-4ae9-a8c9-24eee3c8874d', 'createdAt': '2025-10-19T22:57:03.193300', 'updatedAt': '2025-10-19T22:57:03.193300'}, 'status': 'pending', 'retry_count': 0, 'last_retry': None, 'error_message': None, 'created_at': '2025-10-19T23:06:32.697061'}
2025-10-19 23:06:33,214 - scripts.sync_manager - INFO - DELETE operation on table `Products` for record ID: 4d74028c-927f-4ae9-a8c9-24eee3c8874d successful.
2025-10-19 23:06:33,251 - scripts.sync_manager - DEBUG - Transaction committed for DELETE on `Products` for record ID: 4d74028c-927f-4ae9-a8c9-24eee3c8874d.
2025-10-19 23:06:33,430 - scripts.sync_manager - DEBUG - Log ID 24 marked as 'completed'.
2025-10-19 23:06:33,441 - scripts.sync_manager - INFO - Logged sync event: Products_delete_success - completed
2025-10-19 23:06:33,442 - scripts.sync_manager - INFO - Successfully processed log ID 24.
2025-10-19 23:06:33,444 - scripts.sync_manager - INFO - Finished processing pending logs. Processed: 1, Failed: 0.
2025-10-19 23:06:41,632 - scripts.sync_manager - INFO - Initiating scheduled sync operation.
2025-10-19 23:06:41,680 - scripts.sync_manager - INFO - No pending sync logs to process.
2025-10-19 23:06:41,681 - scripts.sync_manager - INFO - Push sync result: {'status': 'success', 'message': 'No pending logs', 'processed': 0, 'failed': 0}
2025-10-19 23:06:42,100 - scripts.sync_manager - INFO - Starting pull from MySQL sync_table. Last sync timestamp: None (fetching last 1 day)
2025-10-19 23:06:42,130 - scripts.sync_manager - INFO - No new entries found in MySQL sync_table.
2025-10-19 23:06:42,315 - scripts.sync_manager - INFO - Pull sync result: {'status': 'success', 'message': 'No new entries', 'pulled': 0}
2025-10-19 23:06:42,355 - scripts.sync_manager - INFO - Logged sync event: scheduled_sync - completed
2025-10-19 23:06:42,358 - scripts.sync_manager - INFO - Scheduled sync operation completed successfully.
2025-10-19 23:06:42,360 - scripts.sync_manager - INFO - Attempting to retry 1 failed sync logs...
2025-10-19 23:06:42,361 - scripts.sync_manager - DEBUG - Log ID 21 status reset to 'pending' for retry. Current retry count: 1.
2025-10-19 23:06:42,371 - scripts.sync_manager - INFO - Successfully reset 1 failed logs to 'pending'. Now processing them.
2025-10-19 23:06:42,388 - scripts.sync_manager - INFO - Processing 1 pending sync logs sequentially...
2025-10-19 23:06:42,388 - scripts.sync_manager - INFO - Attempting to process log ID 21: Table `Bills`, Type `CREATE`, Record ID `1760894970535`.
2025-10-19 23:06:42,388 - scripts.sync_manager - DEBUG - Log ID 21 details: {'id': 21, 'sync_time': '2025-10-19T22:59:31.418456', 'table_name': 'Bills', 'change_type': 'CREATE', 'record_id': '1760894970535', 'change_data': {'id': '1760894970535', 'customerName': 'primetest', 'customerEmail': '', 'customerPhone': '', 'items': [{'productId': '030da3ec-16f9-45ce-ad8c-4c99578f20e3', 'productName': 'V. Belt', 'price': 3100, 'quantity': 1, 'total': 3100}], 'subtotal': 3100, 'tax': 310, 'discountPercentage': 10, 'discountAmount': 310, 'total': 3100, 'date': '2025-10-19T17:29:30.535Z', 'status': 'Paid'}, 'status': 'pending', 'retry_count': 1, 'last_retry': '2025-10-19T22:59:32.267227', 'error_message': 'Database operation failed', 'created_at': '2025-10-19T22:59:31.418456'}
2025-10-19 23:06:42,834 - scripts.sync_manager - DEBUG - Attempting CREATE operation on table `Bills` for record ID: 1760894970535
2025-10-19 23:06:42,873 - scripts.sync_manager - DEBUG - Table `Bills` columns: ['id', 'storeId', 'storeName', 'storeAddress', 'customerName', 'customerPhone', 'customerEmail', 'customerAddress', 'customerId', 'subtotal', 'taxPercentage', 'taxAmount', 'discountPercentage', 'discountAmount', 'total', 'paymentMethod', 'timestamp', 'notes', 'gstin', 'companyName', 'companyAddress', 'companyPhone', 'companyEmail', 'billFormat', 'createdBy']
2025-10-19 23:06:42,873 - scripts.sync_manager - DEBUG - Filtered data for CREATE on `Bills`: {'id': '1760894970535', 'customerName': 'primetest', 'customerEmail': '', 'customerPhone': '', 'subtotal': 3100, 'discountPercentage': 10, 'discountAmount': 310, 'total': 3100}
2025-10-19 23:06:42,873 - scripts.sync_manager - DEBUG - Executing UPSERT query for `Bills`: 
                        INSERT INTO `Bills` (`id`, `customerName`, `customerEmail`, `customerPhone`, `subtotal`, `discountPercentage`, `discountAmount`, `total`)
                        VALUES (%s, %s, %s, %s, %s, %s, %s, %s)
                        ON DUPLICATE KEY UPDATE `id` = VALUES(`id`), `customerName` = VALUES(`customerName`), `customerEmail` = VALUES(`customerEmail`), `customerPhone` = VALUES(`customerPhone`), `subtotal` = VALUES(`subtotal`), `discountPercentage` = VALUES(`discountPercentage`), `discountAmount` = VALUES(`discountAmount`), `total` = VALUES(`total`)
                         with values: ['1760894970535', 'primetest', '', '', 3100, 10, 310, 3100]
2025-10-19 23:06:42,910 - scripts.sync_manager - DEBUG - Handling related tables for Bills with record ID: 1760894970535 and change data: {'id': '1760894970535', 'customerName': 'primetest', 'customerEmail': '', 'customerPhone': '', 'items': [{'productId': '030da3ec-16f9-45ce-ad8c-4c99578f20e3', 'productName': 'V. Belt', 'price': 3100, 'quantity': 1, 'total': 3100}], 'subtotal': 3100, 'tax': 310, 'discountPercentage': 10, 'discountAmount': 310, 'total': 3100, 'date': '2025-10-19T17:29:30.535Z', 'status': 'Paid'}
2025-10-19 23:06:42,910 - scripts.sync_manager - DEBUG - Processing bill items for bill ID 1760894970535: [{'productId': '030da3ec-16f9-45ce-ad8c-4c99578f20e3', 'productName': 'V. Belt', 'price': 3100, 'quantity': 1, 'total': 3100}]
2025-10-19 23:06:42,910 - scripts.sync_manager - DEBUG - Deleting existing bill items for bill ID 1760894970535
2025-10-19 23:06:43,020 - scripts.sync_manager - ERROR - Error in database operation for Bills (ID: 1760894970535): 0
Traceback (most recent call last):
  File "E:\Siri-apps\billing-app\backend\scripts\sync_manager.py", line 295, in apply_change_to_mysql_db
    """
  File "E:\Siri-apps\billing-app\backend\scripts\sync_manager.py", line 353, in _handle_related_tables
    logger.debug(f"Processing bill items for bill ID {record_id}: {bill_items}")
                         ^^^^^^
KeyError: 0
2025-10-19 23:06:43,202 - scripts.sync_manager - DEBUG - Log ID 21 marked as 'failed'. Retry count: 2
2025-10-19 23:06:43,213 - scripts.sync_manager - INFO - Logged sync event: Bills_create_failed - failed
2025-10-19 23:06:43,215 - scripts.sync_manager - WARNING - Failed to process log ID 21. Will retry later if attempts remain.
2025-10-19 23:06:43,216 - scripts.sync_manager - INFO - Finished processing pending logs. Processed: 0, Failed: 1.
2025-10-19 23:08:39,263 - scripts.sync_manager - INFO - Logged CRUD operation: Products - CREATE - e8f0a7e5-8ef3-459c-b852-44305121e0fc
2025-10-19 23:08:39,273 - scripts.sync_manager - INFO - Logged sync event: Products_create_logged - pending
2025-10-19 23:08:39,273 - scripts.sync_manager - INFO - Triggering immediate processing for Products - CREATE - e8f0a7e5-8ef3-459c-b852-44305121e0fc
2025-10-19 23:08:39,291 - scripts.sync_manager - INFO - Processing 1 pending sync logs sequentially...
2025-10-19 23:08:39,291 - scripts.sync_manager - INFO - Attempting to process log ID 25: Table `Products`, Type `CREATE`, Record ID `e8f0a7e5-8ef3-459c-b852-44305121e0fc`.
2025-10-19 23:08:39,291 - scripts.sync_manager - DEBUG - Log ID 25 details: {'id': 25, 'sync_time': '2025-10-19T23:08:39.255792', 'table_name': 'Products', 'change_type': 'CREATE', 'record_id': 'e8f0a7e5-8ef3-459c-b852-44305121e0fc', 'change_data': {'name': 'testing', 'price': 8756433, 'stock': 432456, 'tax': None, 'barcodes': ['1760895517686865'], 'batchId': 'c2d5df1e-07a8-458a-bbd0-3b0e362adcb6', 'id': 'e8f0a7e5-8ef3-459c-b852-44305121e0fc', 'createdAt': '2025-10-19T23:08:39.231693', 'updatedAt': '2025-10-19T23:08:39.231693'}, 'status': 'pending', 'retry_count': 0, 'last_retry': None, 'error_message': None, 'created_at': '2025-10-19T23:08:39.255792'}
2025-10-19 23:08:39,716 - scripts.sync_manager - DEBUG - Attempting CREATE operation on table `Products` for record ID: e8f0a7e5-8ef3-459c-b852-44305121e0fc
2025-10-19 23:08:39,754 - scripts.sync_manager - DEBUG - Table `Products` columns: ['id', 'name', 'price', 'stock', 'assignedStoreId', 'selling_price', 'createdAt', 'updatedAt']
2025-10-19 23:08:39,754 - scripts.sync_manager - DEBUG - Filtered data for CREATE on `Products`: {'name': 'testing', 'price': 8756433, 'stock': 432456, 'id': 'e8f0a7e5-8ef3-459c-b852-44305121e0fc', 'createdAt': '2025-10-19T23:08:39.231693', 'updatedAt': '2025-10-19T23:08:39.231693'}
2025-10-19 23:08:39,756 - scripts.sync_manager - DEBUG - Executing UPSERT query for `Products`: 
                        INSERT INTO `Products` (`name`, `price`, `stock`, `id`, `createdAt`, `updatedAt`)
                        VALUES (%s, %s, %s, %s, %s, %s)
                        ON DUPLICATE KEY UPDATE `name` = VALUES(`name`), `price` = VALUES(`price`), `stock` = VALUES(`stock`), `id` = VALUES(`id`), `createdAt` = VALUES(`createdAt`), `updatedAt` = VALUES(`updatedAt`)
                         with values: ['testing', 8756433, 432456, 'e8f0a7e5-8ef3-459c-b852-44305121e0fc', '2025-10-19T23:08:39.231693', '2025-10-19T23:08:39.231693']
2025-10-19 23:08:39,793 - scripts.sync_manager - DEBUG - Handling related tables for Products with record ID: e8f0a7e5-8ef3-459c-b852-44305121e0fc and change data: {'name': 'testing', 'price': 8756433, 'stock': 432456, 'tax': None, 'barcodes': ['1760895517686865'], 'batchId': 'c2d5df1e-07a8-458a-bbd0-3b0e362adcb6', 'id': 'e8f0a7e5-8ef3-459c-b852-44305121e0fc', 'createdAt': '2025-10-19T23:08:39.231693', 'updatedAt': '2025-10-19T23:08:39.231693'}
2025-10-19 23:08:39,794 - scripts.sync_manager - DEBUG - Processing barcodes for product ID e8f0a7e5-8ef3-459c-b852-44305121e0fc: ['1760895517686865']
2025-10-19 23:08:39,834 - scripts.sync_manager - DEBUG - Existing barcodes: set(), New barcodes: {'1760895517686865'}
2025-10-19 23:08:39,835 - scripts.sync_manager - DEBUG - Adding new barcode 1760895517686865 for product ID e8f0a7e5-8ef3-459c-b852-44305121e0fc
2025-10-19 23:08:39,871 - scripts.sync_manager - DEBUG - Finished barcode maintenance for product ID e8f0a7e5-8ef3-459c-b852-44305121e0fc
2025-10-19 23:08:39,872 - scripts.sync_manager - INFO - CREATE operation on table `Products` for record ID: e8f0a7e5-8ef3-459c-b852-44305121e0fc successful.
2025-10-19 23:08:39,910 - scripts.sync_manager - DEBUG - Transaction committed for CREATE on `Products` for record ID: e8f0a7e5-8ef3-459c-b852-44305121e0fc.
2025-10-19 23:08:40,093 - scripts.sync_manager - DEBUG - Log ID 25 marked as 'completed'.
2025-10-19 23:08:40,105 - scripts.sync_manager - INFO - Logged sync event: Products_create_success - completed
2025-10-19 23:08:40,106 - scripts.sync_manager - INFO - Successfully processed log ID 25.
2025-10-19 23:08:40,107 - scripts.sync_manager - INFO - Finished processing pending logs. Processed: 1, Failed: 0.
2025-10-19 23:11:34,351 - scripts.sync_manager - INFO - Logged CRUD operation: SystemSettings - UPDATE - 1
2025-10-19 23:11:34,365 - scripts.sync_manager - INFO - Logged sync event: SystemSettings_update_logged - pending
2025-10-19 23:11:34,365 - scripts.sync_manager - INFO - Triggering immediate processing for SystemSettings - UPDATE - 1
2025-10-19 23:11:34,375 - scripts.sync_manager - INFO - Processing 1 pending sync logs sequentially...
2025-10-19 23:11:34,376 - scripts.sync_manager - INFO - Attempting to process log ID 26: Table `SystemSettings`, Type `UPDATE`, Record ID `1`.
2025-10-19 23:11:34,376 - scripts.sync_manager - DEBUG - Log ID 26 details: {'id': 26, 'sync_time': '2025-10-19T23:11:34.349651', 'table_name': 'SystemSettings', 'change_type': 'UPDATE', 'record_id': 1, 'change_data': {'systemSettings': {'companyAddress': '123 Jewelry Street, Mumbai, Maharashtra 400001', 'companyEmail': 'info@siriartjewellery.com', 'companyName': 'SIRI ART JEWELLERY', 'companyPhone': '+91 889771771', 'gstin': '27AAFCV2449G1Z7', 'id': 1, 'taxPercentage': 9.6}, 'billFormats': {'A4': {'height': 297, 'margins': {'bottom': 20, 'left': 20, 'right': 20, 'top': 20}, 'unit': 'mm', 'width': 210}, 'A5': {'height': 210, 'margins': {'bottom': 15, 'left': 15, 'right': 15, 'top': 15}, 'unit': 'mm', 'width': 148}, 'Custom': {'height': 297, 'margins': {'bottom': 20, 'left': 20, 'right': 20, 'top': 20}, 'unit': 'mm', 'width': 210}, 'Thermal_58mm': {'height': 'auto', 'margins': {'bottom': 3, 'left': 3, 'right': 3, 'top': 3}, 'unit': 'mm', 'width': 58}, 'Thermal_80mm': {'height': 'auto', 'margins': {'bottom': 5, 'left': 5, 'right': 5, 'top': 5}, 'unit': 'mm', 'width': 80}}, 'storeFormats': {}}, 'status': 'pending', 'retry_count': 0, 'last_retry': None, 'error_message': None, 'created_at': '2025-10-19T23:11:34.349651'}
2025-10-19 23:11:34,776 - scripts.sync_manager - DEBUG - Attempting UPDATE operation on table `SystemSettings` for record ID: 1
2025-10-19 23:11:34,813 - scripts.sync_manager - DEBUG - Table `SystemSettings` columns: ['id', 'gstin', 'taxPercentage', 'companyName', 'companyAddress', 'companyPhone', 'companyEmail']
2025-10-19 23:11:34,813 - scripts.sync_manager - DEBUG - Filtered data for UPDATE on `SystemSettings`: {}
2025-10-19 23:11:34,813 - scripts.sync_manager - DEBUG - Added record_id 1 to filtered_data for SystemSettings.
2025-10-19 23:11:34,813 - scripts.sync_manager - DEBUG - Executing UPSERT query for `SystemSettings`: 
                        INSERT INTO `SystemSettings` (`id`)
                        VALUES (%s)
                        ON DUPLICATE KEY UPDATE `id` = VALUES(`id`)
                         with values: [1]
2025-10-19 23:11:34,847 - scripts.sync_manager - DEBUG - Handling related tables for SystemSettings with record ID: 1 and change data: {'systemSettings': {'companyAddress': '123 Jewelry Street, Mumbai, Maharashtra 400001', 'companyEmail': 'info@siriartjewellery.com', 'companyName': 'SIRI ART JEWELLERY', 'companyPhone': '+91 889771771', 'gstin': '27AAFCV2449G1Z7', 'id': 1, 'taxPercentage': 9.6}, 'billFormats': {'A4': {'height': 297, 'margins': {'bottom': 20, 'left': 20, 'right': 20, 'top': 20}, 'unit': 'mm', 'width': 210}, 'A5': {'height': 210, 'margins': {'bottom': 15, 'left': 15, 'right': 15, 'top': 15}, 'unit': 'mm', 'width': 148}, 'Custom': {'height': 297, 'margins': {'bottom': 20, 'left': 20, 'right': 20, 'top': 20}, 'unit': 'mm', 'width': 210}, 'Thermal_58mm': {'height': 'auto', 'margins': {'bottom': 3, 'left': 3, 'right': 3, 'top': 3}, 'unit': 'mm', 'width': 58}, 'Thermal_80mm': {'height': 'auto', 'margins': {'bottom': 5, 'left': 5, 'right': 5, 'top': 5}, 'unit': 'mm', 'width': 80}}, 'storeFormats': {}}
2025-10-19 23:11:34,847 - scripts.sync_manager - INFO - UPDATE operation on table `SystemSettings` for record ID: 1 successful.
2025-10-19 23:11:34,886 - scripts.sync_manager - DEBUG - Transaction committed for UPDATE on `SystemSettings` for record ID: 1.
2025-10-19 23:11:35,063 - scripts.sync_manager - DEBUG - Log ID 26 marked as 'completed'.
2025-10-19 23:11:35,112 - scripts.sync_manager - INFO - Logged sync event: SystemSettings_update_success - completed
2025-10-19 23:11:35,112 - scripts.sync_manager - INFO - Successfully processed log ID 26.
2025-10-19 23:11:35,125 - scripts.sync_manager - INFO - Finished processing pending logs. Processed: 1, Failed: 0.
2025-10-19 23:19:18,654 - scripts.sync_manager - INFO - Initiating scheduled sync operation.
2025-10-19 23:19:18,700 - scripts.sync_manager - INFO - No pending sync logs to process.
2025-10-19 23:19:18,700 - scripts.sync_manager - INFO - Push sync result: {'status': 'success', 'message': 'No pending logs', 'processed': 0, 'failed': 0}
2025-10-19 23:19:19,100 - scripts.sync_manager - INFO - Starting pull from MySQL sync_table. Last sync timestamp: None (fetching last 1 day)
2025-10-19 23:19:19,132 - scripts.sync_manager - INFO - No new entries found in MySQL sync_table.
2025-10-19 23:19:19,322 - scripts.sync_manager - INFO - Pull sync result: {'status': 'success', 'message': 'No new entries', 'pulled': 0}
2025-10-19 23:19:19,366 - scripts.sync_manager - INFO - Logged sync event: scheduled_sync - completed
2025-10-19 23:19:19,366 - scripts.sync_manager - INFO - Scheduled sync operation completed successfully.
2025-10-19 23:19:19,366 - scripts.sync_manager - INFO - Attempting to retry 1 failed sync logs...
2025-10-19 23:19:19,366 - scripts.sync_manager - DEBUG - Log ID 21 status reset to 'pending' for retry. Current retry count: 2.
2025-10-19 23:19:19,366 - scripts.sync_manager - INFO - Successfully reset 1 failed logs to 'pending'. Now processing them.
2025-10-19 23:19:19,399 - scripts.sync_manager - INFO - Processing 1 pending sync logs sequentially...
2025-10-19 23:19:19,399 - scripts.sync_manager - INFO - Attempting to process log ID 21: Table `Bills`, Type `CREATE`, Record ID `1760894970535`.
2025-10-19 23:19:19,399 - scripts.sync_manager - DEBUG - Log ID 21 details: {'id': 21, 'sync_time': '2025-10-19T22:59:31.418456', 'table_name': 'Bills', 'change_type': 'CREATE', 'record_id': '1760894970535', 'change_data': {'id': '1760894970535', 'customerName': 'primetest', 'customerEmail': '', 'customerPhone': '', 'items': [{'productId': '030da3ec-16f9-45ce-ad8c-4c99578f20e3', 'productName': 'V. Belt', 'price': 3100, 'quantity': 1, 'total': 3100}], 'subtotal': 3100, 'tax': 310, 'discountPercentage': 10, 'discountAmount': 310, 'total': 3100, 'date': '2025-10-19T17:29:30.535Z', 'status': 'Paid'}, 'status': 'pending', 'retry_count': 2, 'last_retry': '2025-10-19T23:06:43.202216', 'error_message': 'Database operation failed', 'created_at': '2025-10-19T22:59:31.418456'}
2025-10-19 23:19:19,817 - scripts.sync_manager - DEBUG - Attempting CREATE operation on table `Bills` for record ID: 1760894970535
2025-10-19 23:19:19,850 - scripts.sync_manager - DEBUG - Table `Bills` columns: ['id', 'storeId', 'storeName', 'storeAddress', 'customerName', 'customerPhone', 'customerEmail', 'customerAddress', 'customerId', 'subtotal', 'taxPercentage', 'taxAmount', 'discountPercentage', 'discountAmount', 'total', 'paymentMethod', 'timestamp', 'notes', 'gstin', 'companyName', 'companyAddress', 'companyPhone', 'companyEmail', 'billFormat', 'createdBy']
2025-10-19 23:19:19,850 - scripts.sync_manager - DEBUG - Filtered data for CREATE on `Bills`: {'id': '1760894970535', 'customerName': 'primetest', 'customerEmail': '', 'customerPhone': '', 'subtotal': 3100, 'discountPercentage': 10, 'discountAmount': 310, 'total': 3100}
2025-10-19 23:19:19,850 - scripts.sync_manager - DEBUG - Executing UPSERT query for `Bills`: 
                        INSERT INTO `Bills` (`id`, `customerName`, `customerEmail`, `customerPhone`, `subtotal`, `discountPercentage`, `discountAmount`, `total`)
                        VALUES (%s, %s, %s, %s, %s, %s, %s, %s)
                        ON DUPLICATE KEY UPDATE `id` = VALUES(`id`), `customerName` = VALUES(`customerName`), `customerEmail` = VALUES(`customerEmail`), `customerPhone` = VALUES(`customerPhone`), `subtotal` = VALUES(`subtotal`), `discountPercentage` = VALUES(`discountPercentage`), `discountAmount` = VALUES(`discountAmount`), `total` = VALUES(`total`)
                         with values: ['1760894970535', 'primetest', '', '', 3100, 10, 310, 3100]
2025-10-19 23:19:19,890 - scripts.sync_manager - DEBUG - Handling related tables for Bills with record ID: 1760894970535 and change data: {'id': '1760894970535', 'customerName': 'primetest', 'customerEmail': '', 'customerPhone': '', 'items': [{'productId': '030da3ec-16f9-45ce-ad8c-4c99578f20e3', 'productName': 'V. Belt', 'price': 3100, 'quantity': 1, 'total': 3100}], 'subtotal': 3100, 'tax': 310, 'discountPercentage': 10, 'discountAmount': 310, 'total': 3100, 'date': '2025-10-19T17:29:30.535Z', 'status': 'Paid'}
2025-10-19 23:19:19,890 - scripts.sync_manager - DEBUG - Processing bill items for bill ID 1760894970535: [{'productId': '030da3ec-16f9-45ce-ad8c-4c99578f20e3', 'productName': 'V. Belt', 'price': 3100, 'quantity': 1, 'total': 3100}]
2025-10-19 23:19:19,890 - scripts.sync_manager - DEBUG - Deleting existing bill items for bill ID 1760894970535
2025-10-19 23:19:19,967 - scripts.sync_manager - DEBUG - BillItems table columns: ['id', 'billId', 'productId', 'productName', 'quantity', 'price', 'total', 'tax', 'gstRate', 'barcodes']
2025-10-19 23:19:19,967 - scripts.sync_manager - DEBUG - Inserting bill item for bill ID 1760894970535: INSERT INTO `BillItems` (`productId`, `productName`, `price`, `quantity`, `total`, `billId`) VALUES (%s, %s, %s, %s, %s, %s) with values ['030da3ec-16f9-45ce-ad8c-4c99578f20e3', 'V. Belt', 3100, 1, 3100, '1760894970535']
2025-10-19 23:19:20,000 - scripts.sync_manager - DEBUG - Finished bill item maintenance for bill ID 1760894970535
2025-10-19 23:19:20,000 - scripts.sync_manager - INFO - CREATE operation on table `Bills` for record ID: 1760894970535 successful.
2025-10-19 23:19:20,037 - scripts.sync_manager - DEBUG - Transaction committed for CREATE on `Bills` for record ID: 1760894970535.
2025-10-19 23:19:20,213 - scripts.sync_manager - DEBUG - Log ID 21 marked as 'completed'.
2025-10-19 23:19:20,257 - scripts.sync_manager - INFO - Logged sync event: Bills_create_success - completed
2025-10-19 23:19:20,257 - scripts.sync_manager - INFO - Successfully processed log ID 21.
2025-10-19 23:19:20,261 - scripts.sync_manager - INFO - Finished processing pending logs. Processed: 1, Failed: 0.
2025-10-19 23:21:43,225 - scripts.sync_manager - INFO - Initiating scheduled sync operation.
2025-10-19 23:21:43,269 - scripts.sync_manager - INFO - No pending sync logs to process.
2025-10-19 23:21:43,269 - scripts.sync_manager - INFO - Push sync result: {'status': 'success', 'message': 'No pending logs', 'processed': 0, 'failed': 0}
2025-10-19 23:21:43,683 - scripts.sync_manager - INFO - Starting pull from MySQL sync_table. Last sync timestamp: None (fetching last 1 day)
2025-10-19 23:21:43,731 - scripts.sync_manager - INFO - No new entries found in MySQL sync_table.
2025-10-19 23:21:43,907 - scripts.sync_manager - INFO - Pull sync result: {'status': 'success', 'message': 'No new entries', 'pulled': 0}
2025-10-19 23:21:43,957 - scripts.sync_manager - INFO - Logged sync event: scheduled_sync - completed
2025-10-19 23:21:43,957 - scripts.sync_manager - INFO - Scheduled sync operation completed successfully.
2025-10-19 23:21:43,957 - scripts.sync_manager - INFO - No failed logs to retry.
2025-10-19 23:34:20,273 - scripts.sync_manager - INFO - Initiating scheduled sync operation.
2025-10-19 23:34:20,276 - scripts.sync_manager - INFO - No pending sync logs to process.
2025-10-19 23:34:20,278 - scripts.sync_manager - INFO - Push sync result: {'status': 'success', 'message': 'No pending logs', 'processed': 0, 'failed': 0}
2025-10-19 23:34:20,680 - scripts.sync_manager - INFO - Starting pull from MySQL sync_table. Last sync timestamp: None (fetching last 1 day)
2025-10-19 23:34:20,720 - scripts.sync_manager - INFO - No new entries found in MySQL sync_table.
2025-10-19 23:34:20,920 - scripts.sync_manager - INFO - Pull sync result: {'status': 'success', 'message': 'No new entries', 'pulled': 0}
2025-10-19 23:34:20,953 - scripts.sync_manager - INFO - Logged sync event: scheduled_sync - completed
2025-10-19 23:34:20,967 - scripts.sync_manager - INFO - Scheduled sync operation completed successfully.
2025-10-19 23:34:20,967 - scripts.sync_manager - INFO - No failed logs to retry.
2025-10-19 23:36:43,967 - scripts.sync_manager - INFO - Initiating scheduled sync operation.
2025-10-19 23:36:43,967 - scripts.sync_manager - INFO - No pending sync logs to process.
2025-10-19 23:36:43,967 - scripts.sync_manager - INFO - Push sync result: {'status': 'success', 'message': 'No pending logs', 'processed': 0, 'failed': 0}
2025-10-19 23:36:44,380 - scripts.sync_manager - INFO - Starting pull from MySQL sync_table. Last sync timestamp: None (fetching last 1 day)
2025-10-19 23:36:44,410 - scripts.sync_manager - INFO - No new entries found in MySQL sync_table.
2025-10-19 23:36:44,585 - scripts.sync_manager - INFO - Pull sync result: {'status': 'success', 'message': 'No new entries', 'pulled': 0}
2025-10-19 23:36:44,613 - scripts.sync_manager - INFO - Logged sync event: scheduled_sync - completed
2025-10-19 23:36:44,613 - scripts.sync_manager - INFO - Scheduled sync operation completed successfully.
2025-10-19 23:36:44,615 - scripts.sync_manager - INFO - No failed logs to retry.
2025-10-19 23:49:20,974 - scripts.sync_manager - INFO - Initiating scheduled sync operation.
2025-10-19 23:49:20,975 - scripts.sync_manager - INFO - No pending sync logs to process.
2025-10-19 23:49:20,975 - scripts.sync_manager - INFO - Push sync result: {'status': 'success', 'message': 'No pending logs', 'processed': 0, 'failed': 0}
2025-10-19 23:49:21,340 - scripts.sync_manager - INFO - Starting pull from MySQL sync_table. Last sync timestamp: None (fetching last 1 day)
2025-10-19 23:49:21,372 - scripts.sync_manager - INFO - No new entries found in MySQL sync_table.
2025-10-19 23:49:21,546 - scripts.sync_manager - INFO - Pull sync result: {'status': 'success', 'message': 'No new entries', 'pulled': 0}
2025-10-19 23:49:21,565 - scripts.sync_manager - INFO - Logged sync event: scheduled_sync - completed
2025-10-19 23:49:21,565 - scripts.sync_manager - INFO - Scheduled sync operation completed successfully.
2025-10-19 23:49:21,565 - scripts.sync_manager - INFO - No failed logs to retry.
2025-10-19 23:51:44,622 - scripts.sync_manager - INFO - Initiating scheduled sync operation.
2025-10-19 23:51:44,622 - scripts.sync_manager - INFO - No pending sync logs to process.
2025-10-19 23:51:44,623 - scripts.sync_manager - INFO - Push sync result: {'status': 'success', 'message': 'No pending logs', 'processed': 0, 'failed': 0}
2025-10-19 23:51:45,037 - scripts.sync_manager - INFO - Starting pull from MySQL sync_table. Last sync timestamp: None (fetching last 1 day)
2025-10-19 23:51:45,079 - scripts.sync_manager - INFO - No new entries found in MySQL sync_table.
2025-10-19 23:51:45,256 - scripts.sync_manager - INFO - Pull sync result: {'status': 'success', 'message': 'No new entries', 'pulled': 0}
2025-10-19 23:51:45,272 - scripts.sync_manager - INFO - Logged sync event: scheduled_sync - completed
2025-10-19 23:51:45,272 - scripts.sync_manager - INFO - Scheduled sync operation completed successfully.
2025-10-19 23:51:45,282 - scripts.sync_manager - INFO - No failed logs to retry.
2025-10-20 00:04:21,574 - scripts.sync_manager - INFO - Initiating scheduled sync operation.
2025-10-20 00:04:21,577 - scripts.sync_manager - INFO - No pending sync logs to process.
2025-10-20 00:04:21,577 - scripts.sync_manager - INFO - Push sync result: {'status': 'success', 'message': 'No pending logs', 'processed': 0, 'failed': 0}
2025-10-20 00:04:21,956 - scripts.sync_manager - INFO - Starting pull from MySQL sync_table. Last sync timestamp: None (fetching last 1 day)
2025-10-20 00:04:22,007 - scripts.sync_manager - INFO - No new entries found in MySQL sync_table.
2025-10-20 00:04:22,202 - scripts.sync_manager - INFO - Pull sync result: {'status': 'success', 'message': 'No new entries', 'pulled': 0}
2025-10-20 00:04:22,228 - scripts.sync_manager - INFO - Logged sync event: scheduled_sync - completed
2025-10-20 00:04:22,228 - scripts.sync_manager - INFO - Scheduled sync operation completed successfully.
2025-10-20 00:04:22,228 - scripts.sync_manager - INFO - No failed logs to retry.
2025-10-20 00:06:45,290 - scripts.sync_manager - INFO - Initiating scheduled sync operation.
2025-10-20 00:06:45,290 - scripts.sync_manager - INFO - No pending sync logs to process.
2025-10-20 00:06:45,290 - scripts.sync_manager - INFO - Push sync result: {'status': 'success', 'message': 'No pending logs', 'processed': 0, 'failed': 0}
2025-10-20 00:06:45,711 - scripts.sync_manager - INFO - Starting pull from MySQL sync_table. Last sync timestamp: None (fetching last 1 day)
2025-10-20 00:06:45,755 - scripts.sync_manager - INFO - No new entries found in MySQL sync_table.
2025-10-20 00:06:45,927 - scripts.sync_manager - INFO - Pull sync result: {'status': 'success', 'message': 'No new entries', 'pulled': 0}
2025-10-20 00:06:45,953 - scripts.sync_manager - INFO - Logged sync event: scheduled_sync - completed
2025-10-20 00:06:45,953 - scripts.sync_manager - INFO - Scheduled sync operation completed successfully.
2025-10-20 00:06:45,953 - scripts.sync_manager - INFO - No failed logs to retry.
2025-10-20 00:19:22,237 - scripts.sync_manager - INFO - Initiating scheduled sync operation.
2025-10-20 00:19:22,253 - scripts.sync_manager - INFO - No pending sync logs to process.
2025-10-20 00:19:22,253 - scripts.sync_manager - INFO - Push sync result: {'status': 'success', 'message': 'No pending logs', 'processed': 0, 'failed': 0}
2025-10-20 00:19:22,633 - scripts.sync_manager - INFO - Starting pull from MySQL sync_table. Last sync timestamp: None (fetching last 1 day)
2025-10-20 00:19:22,669 - scripts.sync_manager - INFO - No new entries found in MySQL sync_table.
2025-10-20 00:19:22,836 - scripts.sync_manager - INFO - Pull sync result: {'status': 'success', 'message': 'No new entries', 'pulled': 0}
2025-10-20 00:19:22,877 - scripts.sync_manager - INFO - Logged sync event: scheduled_sync - completed
2025-10-20 00:19:22,881 - scripts.sync_manager - INFO - Scheduled sync operation completed successfully.
2025-10-20 00:19:22,884 - scripts.sync_manager - INFO - No failed logs to retry.
2025-10-20 00:21:45,963 - scripts.sync_manager - INFO - Initiating scheduled sync operation.
2025-10-20 00:21:45,963 - scripts.sync_manager - INFO - No pending sync logs to process.
2025-10-20 00:21:45,963 - scripts.sync_manager - INFO - Push sync result: {'status': 'success', 'message': 'No pending logs', 'processed': 0, 'failed': 0}
2025-10-20 00:21:46,366 - scripts.sync_manager - INFO - Starting pull from MySQL sync_table. Last sync timestamp: None (fetching last 1 day)
2025-10-20 00:21:46,402 - scripts.sync_manager - INFO - No new entries found in MySQL sync_table.
2025-10-20 00:21:46,581 - scripts.sync_manager - INFO - Pull sync result: {'status': 'success', 'message': 'No new entries', 'pulled': 0}
2025-10-20 00:21:46,622 - scripts.sync_manager - INFO - Logged sync event: scheduled_sync - completed
2025-10-20 00:21:46,622 - scripts.sync_manager - INFO - Scheduled sync operation completed successfully.
2025-10-20 00:21:46,622 - scripts.sync_manager - INFO - No failed logs to retry.
2025-10-20 00:36:46,636 - scripts.sync_manager - INFO - Initiating scheduled sync operation.
2025-10-20 00:36:46,674 - scripts.sync_manager - INFO - No pending sync logs to process.
2025-10-20 00:36:46,751 - scripts.sync_manager - INFO - Push sync result: {'status': 'success', 'message': 'No pending logs', 'processed': 0, 'failed': 0}
2025-10-20 00:36:47,209 - scripts.sync_manager - INFO - Starting pull from MySQL sync_table. Last sync timestamp: None (fetching last 1 day)
2025-10-20 00:36:47,240 - scripts.sync_manager - INFO - No new entries found in MySQL sync_table.
2025-10-20 00:36:47,425 - scripts.sync_manager - INFO - Pull sync result: {'status': 'success', 'message': 'No new entries', 'pulled': 0}
2025-10-20 00:36:47,439 - scripts.sync_manager - INFO - Logged sync event: scheduled_sync - completed
2025-10-20 00:36:47,440 - scripts.sync_manager - INFO - Scheduled sync operation completed successfully.
2025-10-20 00:36:47,441 - scripts.sync_manager - INFO - No failed logs to retry.
2025-10-20 00:51:47,450 - scripts.sync_manager - INFO - Initiating scheduled sync operation.
2025-10-20 00:51:47,450 - scripts.sync_manager - INFO - No pending sync logs to process.
2025-10-20 00:51:47,450 - scripts.sync_manager - INFO - Push sync result: {'status': 'success', 'message': 'No pending logs', 'processed': 0, 'failed': 0}
2025-10-20 00:51:47,845 - scripts.sync_manager - INFO - Starting pull from MySQL sync_table. Last sync timestamp: None (fetching last 1 day)
2025-10-20 00:51:47,883 - scripts.sync_manager - INFO - No new entries found in MySQL sync_table.
2025-10-20 00:51:48,056 - scripts.sync_manager - INFO - Pull sync result: {'status': 'success', 'message': 'No new entries', 'pulled': 0}
2025-10-20 00:51:48,073 - scripts.sync_manager - INFO - Logged sync event: scheduled_sync - completed
2025-10-20 00:51:48,073 - scripts.sync_manager - INFO - Scheduled sync operation completed successfully.
2025-10-20 00:51:48,074 - scripts.sync_manager - INFO - No failed logs to retry.
2025-10-20 01:06:48,082 - scripts.sync_manager - INFO - Initiating scheduled sync operation.
2025-10-20 01:06:48,082 - scripts.sync_manager - INFO - No pending sync logs to process.
2025-10-20 01:06:48,082 - scripts.sync_manager - INFO - Push sync result: {'status': 'success', 'message': 'No pending logs', 'processed': 0, 'failed': 0}
2025-10-20 01:06:48,505 - scripts.sync_manager - INFO - Starting pull from MySQL sync_table. Last sync timestamp: None (fetching last 1 day)
2025-10-20 01:06:48,544 - scripts.sync_manager - INFO - No new entries found in MySQL sync_table.
2025-10-20 01:06:48,731 - scripts.sync_manager - INFO - Pull sync result: {'status': 'success', 'message': 'No new entries', 'pulled': 0}
2025-10-20 01:06:48,777 - scripts.sync_manager - INFO - Logged sync event: scheduled_sync - completed
2025-10-20 01:06:48,777 - scripts.sync_manager - INFO - Scheduled sync operation completed successfully.
2025-10-20 01:06:48,779 - scripts.sync_manager - INFO - No failed logs to retry.
