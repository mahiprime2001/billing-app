(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[754],{47507:(e,t,s)=>{"use strict";s.d(t,{bq:()=>x,eb:()=>f,gC:()=>j,l6:()=>c,yv:()=>u});var r=s(95155),a=s(12115),l=s(4729),n=s(24033),d=s(12108),i=s(5917),o=s(25016);let c=l.bL;l.YJ;let u=l.WT,x=a.forwardRef((e,t)=>{let{className:s,children:a,...d}=e;return(0,r.jsxs)(l.l9,{ref:t,className:(0,o.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",s),...d,children:[a,(0,r.jsx)(l.In,{asChild:!0,children:(0,r.jsx)(n.A,{className:"h-4 w-4 opacity-50"})})]})});x.displayName=l.l9.displayName;let h=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(l.PP,{ref:t,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",s),...a,children:(0,r.jsx)(d.A,{className:"h-4 w-4"})})});h.displayName=l.PP.displayName;let m=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(l.wn,{ref:t,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",s),...a,children:(0,r.jsx)(n.A,{className:"h-4 w-4"})})});m.displayName=l.wn.displayName;let j=a.forwardRef((e,t)=>{let{className:s,children:a,position:n="popper",...d}=e;return(0,r.jsx)(l.ZL,{children:(0,r.jsxs)(l.UC,{ref:t,className:(0,o.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===n&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:n,...d,children:[(0,r.jsx)(h,{}),(0,r.jsx)(l.LM,{className:(0,o.cn)("p-1","popper"===n&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:a}),(0,r.jsx)(m,{})]})})});j.displayName=l.UC.displayName,a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(l.JU,{ref:t,className:(0,o.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",s),...a})}).displayName=l.JU.displayName;let f=a.forwardRef((e,t)=>{let{className:s,children:a,...n}=e;return(0,r.jsxs)(l.q7,{ref:t,className:(0,o.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...n,children:[(0,r.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(l.VF,{children:(0,r.jsx)(i.A,{className:"h-4 w-4"})})}),(0,r.jsx)(l.p4,{children:a})]})});f.displayName=l.q7.displayName,a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(l.wv,{ref:t,className:(0,o.cn)("-mx-1 my-1 h-px bg-muted",s),...a})}).displayName=l.wv.displayName},63290:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>z});var r=s(95155),a=s(12115),l=s(20063),n=s(10832),d=s(83209),i=s(67812),o=s(97003),c=s(47507),u=s(96633),x=s(90923),h=s(26265),m=s(73850),j=s(68425),f=s(47734),p=s(73697),y=s(33420),g=s(94621),v=s(98128),N=s(37665),b=s(55556),w=s(10281),A=s(56373),R=s(69386),k=s(80019),I=s(57095),S=s(62319),B=s(26411),F=s(32909),C=s(88230),Z=s(17887),P=s(1524),D=s(26921),W=s(89559),E=s(39867),T=s(80534),K=s(50906),q=s(91761),_=s(10512),H=s(26617),U=s(91169),L=s(52056),X=s(16485),M=s(6180),O=s(79956),V=s(71163);let Q=["#0088FE","#00C49F","#FFBB28","#FF8042","#8884D8","#82CA9D","#FFC658","#FF7C7C"],G=e=>{let{title:t,value:s,change:a,icon:l,trend:n}=e;return(0,r.jsxs)(d.Zp,{children:[(0,r.jsxs)(d.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,r.jsx)(d.ZB,{className:"text-sm font-medium",children:t}),l]}),(0,r.jsxs)(d.Wu,{children:[(0,r.jsx)("div",{className:"text-2xl font-bold",children:s}),void 0!==a&&(0,r.jsxs)("p",{className:"text-xs ".concat(a>=0?"text-green-600":"text-red-600"),children:["up"===n?(0,r.jsx)(P.A,{className:"inline h-4 w-4"}):(0,r.jsx)(D.A,{className:"inline h-4 w-4"}),a>=0?"+":"",a,"%"]})]})]})};function z(){let e=(0,l.useRouter)(),[t,s]=(0,a.useState)([]),[P,D]=(0,a.useState)([]),[z,$]=(0,a.useState)([]),[J,Y]=(0,a.useState)([]),[ee,et]=(0,a.useState)([]),[es,er]=(0,a.useState)([]),[ea,el]=(0,a.useState)([]),[en,ed]=(0,a.useState)([]),[ei,eo]=(0,a.useState)("all"),[ec,eu]=(0,a.useState)(30),[ex,eh]=(0,a.useState)("overview"),[em,ej]=(0,a.useState)("chart"),[ef,ep]=(0,a.useState)(!0),[ey,eg]=(0,a.useState)(!1),ev="http://127.0.0.1:8080",eN=(0,a.useCallback)(e=>{let t=P.find(t=>t.id===e);return(null==t?void 0:t.name)||"Unknown Store"},[P]);(0,a.useEffect)(()=>{let t=localStorage.getItem("adminLoggedIn"),s=localStorage.getItem("adminUser");if("true"!==t||!s)return void e.push("/login");eg(!0)},[e]);let eb=(0,a.useCallback)(async()=>{ep(!0);try{console.log("\uD83D\uDD04 Fetching data from backend...");let[e,t,r,a]=await Promise.all([fetch("".concat(ev,"/api/bills")).then(e=>e.json()),fetch("".concat(ev,"/api/stores")).then(e=>e.json()),fetch("".concat(ev,"/api/products")).then(e=>e.json()),fetch("".concat(ev,"/api/returns")).then(e=>e.json())]),l=Array.isArray(e)?e:[],n=Array.isArray(t)?t:[],d=Array.isArray(r)?r:[],i=Array.isArray(a)?a:[],o=l.map(e=>({id:e.id,storeId:e.storeId||e.store_id||e.storeid,storeName:e.storeName||e.store_name,customerId:e.customerId||e.customer_id||e.customerid,subtotal:Number(e.subtotal||e.sub_total||0),taxAmount:Number(e.taxAmount||e.tax_amount||e.tax||0),discountAmount:Number(e.discountAmount||e.discount_amount||e.discountamount||0),total:Number(e.total||0),createdAt:e.createdAt||e.created_at||e.timestamp||e.date,timestamp:e.timestamp||e.created_at||e.date,paymentMethod:e.paymentMethod||e.payment_method||e.paymentmethod,items:(e.items||[]).map(e=>({productId:e.productId||e.product_id||e.productid,productName:e.productName||e.product_name||e.productname||"Unknown Product",quantity:Number(e.quantity||0),price:Number(e.price||0),total:Number(e.total||0)}))}));console.log("✅ Setting state with:",{bills:o.length,stores:n.length,products:d.length,returns:i.length}),console.log("✅ Normalized bill sample:",o[0]),s(o),D(n),$(d),Y(i),ep(!1)}catch(e){console.error("❌ Error fetching data:",e),ep(!1)}},[ev]),ew=(0,a.useCallback)(()=>{if(console.log("\uD83E\uDDEE Starting analytics calculation..."),console.log("Input data:",{bills:t.length,stores:P.length,products:z.length}),!t||0===t.length){console.log("⚠️ No bills to analyze"),et([]),er([]),ed([]);return}let e=new Date,s=new Date(e.getTime()-24*ec*36e5),r=t.filter(e=>{let t=new Date(e.createdAt||e.timestamp);if(isNaN(t.getTime()))return!1;let r=t>=s,a="all"===ei||e.storeId===ei;return r&&a});console.log("\uD83D\uDCC5 Filtered ".concat(r.length," bills from last ").concat(ec," days"));let a=(0,M.k)({start:(0,O.e)(e,ec),end:e}),l=new Map;a.forEach(e=>{let t=(0,V.GP)(e,"yyyy-MM-dd");l.set(t,{date:t,revenue:0,bills:0,items:0})}),r.forEach(e=>{let t=new Date(e.createdAt||e.timestamp),s=(0,V.GP)(t,"yyyy-MM-dd");if(l.has(s)){let t=l.get(s);t.revenue+=e.total||0,t.bills+=1,Array.isArray(e.items)&&e.items.forEach(e=>{t.items+=e.quantity||0})}});let n=Array.from(l.values());ed(n);let d=new Map;P.forEach(e=>{e&&e.id&&d.set(e.id,{storeId:e.id,storeName:e.name||"Unknown Store",totalRevenue:0,totalBills:0,totalItems:0,averageBillValue:0,topProducts:[]})}),r.forEach(e=>{if(e&&e.storeId&&d.has(e.storeId)){let t=d.get(e.storeId);t.totalRevenue+=e.total||0,t.totalBills+=1,Array.isArray(e.items)&&e.items.forEach(e=>{if(!e)return;t.totalItems+=e.quantity||0;let s=t.topProducts.find(t=>t.productId===e.productId);s?(s.quantity+=e.quantity||0,s.revenue+=e.total||0):t.topProducts.push({productId:e.productId||"",productName:e.productName||"Unknown Product",quantity:e.quantity||0,revenue:e.total||0})})}}),d.forEach(e=>{e.averageBillValue=e.totalBills>0?e.totalRevenue/e.totalBills:0,e.topProducts.sort((e,t)=>t.revenue-e.revenue)});let i=Array.from(d.values());et(i);let o=new Map;z.forEach(e=>{e&&e.id&&o.set(e.id,{productId:e.id,productName:e.name||"Unknown Product",totalQuantitySold:0,totalRevenue:0,averagePrice:e.price||0,totalBills:0,topStores:[]})}),r.forEach(e=>{e&&Array.isArray(e.items)&&e.items.forEach(t=>{if(t&&t.productId&&o.has(t.productId)){let s=o.get(t.productId);s.totalQuantitySold+=t.quantity||0,s.totalRevenue+=t.total||0,s.totalBills+=1;let r=s.topStores.find(t=>t.storeId===e.storeId);r?(r.quantity+=t.quantity||0,r.revenue+=t.total||0):s.topStores.push({storeId:e.storeId||"",storeName:eN(e.storeId),quantity:t.quantity||0,revenue:t.total||0})}})}),o.forEach(e=>{e.topStores.sort((e,t)=>t.revenue-e.revenue)});let c=Array.from(o.values());er(c);let u=[],x=z.filter(e=>e.stock>0&&e.stock<10);x.length>0&&u.push({type:"warning",category:"Inventory",title:"Low Stock Alert",message:"".concat(x.length," products are running low on stock"),priority:"high"});let h=z.filter(e=>0===e.stock);h.length>0&&u.push({type:"error",category:"Inventory",title:"Out of Stock",message:"".concat(h.length," products are out of stock"),priority:"critical"});let m=J.filter(e=>"pending"===e.status);m.length>0&&u.push({type:"info",category:"Returns",title:"Pending Returns",message:"".concat(m.length," returns awaiting approval"),priority:"medium"});let j=P.filter(e=>"inactive"===e.status);j.length>0&&u.push({type:"warning",category:"Stores",title:"Inactive Stores",message:"".concat(j.length," stores are currently inactive"),priority:"medium"}),el(u),console.log("✅ Analytics calculated:",{stores:i.length,products:c.length,alerts:u.length,dailyStats:n.length})},[t,P,z,J,ec,ei,eN]);if((0,a.useEffect)(()=>{ey&&eb()},[ey,eb]),(0,a.useEffect)(()=>{ew()},[ew]),!ey||ef)return(0,r.jsx)(n.default,{children:(0,r.jsx)("div",{className:"flex h-screen items-center justify-center",children:(0,r.jsx)(W.A,{className:"h-8 w-8 animate-spin"})})});let eA=ee.reduce((e,t)=>e+t.totalRevenue,0),eR=ee.reduce((e,t)=>e+t.totalBills,0),ek=ee.reduce((e,t)=>e+t.totalItems,0),eI=new Set(t.map(e=>e.customerId).filter(Boolean)).size;return(0,r.jsx)(n.default,{children:(0,r.jsxs)("div",{className:"space-y-6 p-6 max-w-full overflow-x-auto",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold",children:"Advanced Analytics Dashboard"}),(0,r.jsx)("p",{className:"text-muted-foreground",children:"Comprehensive business intelligence and insights"})]}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsxs)(o.$,{onClick:eb,variant:"outline",children:[(0,r.jsx)(W.A,{className:"mr-2 h-4 w-4"}),"Refresh"]}),(0,r.jsxs)(o.$,{children:[(0,r.jsx)(E.A,{className:"mr-2 h-4 w-4"}),"Export Report"]})]})]}),(0,r.jsxs)("div",{className:"flex gap-4",children:[(0,r.jsxs)(c.l6,{value:ec.toString(),onValueChange:e=>eu(Number(e)),children:[(0,r.jsx)(c.bq,{className:"w-[180px]",children:(0,r.jsx)(c.yv,{})}),(0,r.jsxs)(c.gC,{children:[(0,r.jsx)(c.eb,{value:"7",children:"Last 7 Days"}),(0,r.jsx)(c.eb,{value:"30",children:"Last 30 Days"}),(0,r.jsx)(c.eb,{value:"90",children:"Last 90 Days"}),(0,r.jsx)(c.eb,{value:"365",children:"Last Year"})]})]}),(0,r.jsxs)(c.l6,{value:ei,onValueChange:eo,children:[(0,r.jsx)(c.bq,{className:"w-[180px]",children:(0,r.jsx)(c.yv,{})}),(0,r.jsxs)(c.gC,{children:[(0,r.jsx)(c.eb,{value:"all",children:"All Stores"}),P.map(e=>(0,r.jsx)(c.eb,{value:e.id,children:e.name},e.id))]})]}),(0,r.jsxs)("div",{className:"ml-auto flex gap-2",children:[(0,r.jsxs)(o.$,{variant:"chart"===em?"default":"outline",onClick:()=>ej("chart"),children:[(0,r.jsx)(T.A,{className:"mr-2 h-4 w-4"}),"Chart"]}),(0,r.jsxs)(o.$,{variant:"table"===em?"default":"outline",onClick:()=>ej("table"),children:[(0,r.jsx)(K.A,{className:"mr-2 h-4 w-4"}),"Table"]})]})]}),(0,r.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[(0,r.jsx)(G,{title:"Total Revenue",value:"₹".concat(eA.toFixed(2)),change:12.5,icon:(0,r.jsx)(q.A,{className:"h-4 w-4 text-muted-foreground"}),trend:"up"}),(0,r.jsx)(G,{title:"Total Bills",value:eR,change:8.2,icon:(0,r.jsx)(_.A,{className:"h-4 w-4 text-muted-foreground"}),trend:"up"}),(0,r.jsx)(G,{title:"Items Sold",value:ek,change:-3.1,icon:(0,r.jsx)(H.A,{className:"h-4 w-4 text-muted-foreground"}),trend:"down"}),(0,r.jsx)(G,{title:"Unique Customers",value:eI,change:15.3,icon:(0,r.jsx)(U.A,{className:"h-4 w-4 text-muted-foreground"}),trend:"up"})]}),ea.length>0&&(0,r.jsxs)(d.Zp,{children:[(0,r.jsx)(d.aR,{children:(0,r.jsxs)(d.ZB,{children:["Business Alerts (",ea.length,")"]})}),(0,r.jsx)(d.Wu,{children:(0,r.jsx)("div",{className:"space-y-2",children:ea.slice(0,5).map((e,t)=>(0,r.jsxs)("div",{className:"flex items-center justify-between rounded-lg border p-3",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)(L.A,{className:"h-5 w-5 ".concat("error"===e.type?"text-red-500":"warning"===e.type?"text-yellow-500":"text-blue-500")}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-medium",children:e.title}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:e.message})]})]}),(0,r.jsx)(i.E,{children:e.priority})]},t))})})]}),(0,r.jsxs)(d.Zp,{children:[(0,r.jsx)(d.aR,{children:(0,r.jsxs)(d.ZB,{className:"flex items-center gap-2",children:[(0,r.jsx)(X.A,{className:"h-5 w-5"}),"Daily Revenue Trend"]})}),(0,r.jsx)(d.Wu,{children:(0,r.jsx)(h.u,{width:"100%",height:300,children:(0,r.jsxs)(m.Q,{data:en,children:[(0,r.jsx)("defs",{children:(0,r.jsxs)("linearGradient",{id:"colorRevenue",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,r.jsx)("stop",{offset:"5%",stopColor:"#8884d8",stopOpacity:.8}),(0,r.jsx)("stop",{offset:"95%",stopColor:"#8884d8",stopOpacity:0})]})}),(0,r.jsx)(j.d,{strokeDasharray:"3 3"}),(0,r.jsx)(f.W,{dataKey:"date"}),(0,r.jsx)(p.h,{}),(0,r.jsx)(y.m,{formatter:e=>"₹".concat(Number(e).toFixed(2))}),(0,r.jsx)(g.Gk,{type:"monotone",dataKey:"revenue",stroke:"#8884d8",fillOpacity:1,fill:"url(#colorRevenue)"})]})})})]}),(0,r.jsxs)(x.tU,{value:ex,onValueChange:eh,children:[(0,r.jsxs)(x.j7,{children:[(0,r.jsx)(x.Xi,{value:"overview",children:"Overview"}),(0,r.jsx)(x.Xi,{value:"stores",children:"Stores"}),(0,r.jsx)(x.Xi,{value:"products",children:"Products"}),(0,r.jsx)(x.Xi,{value:"trends",children:"Trends"}),(0,r.jsx)(x.Xi,{value:"returns",children:"Returns"}),(0,r.jsx)(x.Xi,{value:"inventory",children:"Inventory"})]}),(0,r.jsxs)(x.av,{value:"overview",className:"space-y-4",children:[(0,r.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,r.jsxs)(d.Zp,{children:[(0,r.jsx)(d.aR,{children:(0,r.jsx)(d.ZB,{children:"Revenue by Store"})}),(0,r.jsx)(d.Wu,{children:"chart"===em?(0,r.jsx)(h.u,{width:"100%",height:300,children:(0,r.jsxs)(v.E,{data:ee,children:[(0,r.jsx)(j.d,{strokeDasharray:"3 3"}),(0,r.jsx)(f.W,{dataKey:"storeName"}),(0,r.jsx)(p.h,{}),(0,r.jsx)(y.m,{formatter:e=>"₹".concat(Number(e).toFixed(2))}),(0,r.jsx)(N.s,{}),(0,r.jsx)(b.y,{dataKey:"totalRevenue",fill:"#8884d8",name:"Revenue"})]})}):(0,r.jsxs)(u.XI,{children:[(0,r.jsx)(u.A0,{children:(0,r.jsxs)(u.Hj,{children:[(0,r.jsx)(u.nd,{children:"Store"}),(0,r.jsx)(u.nd,{children:"Revenue"}),(0,r.jsx)(u.nd,{children:"Bills"})]})}),(0,r.jsx)(u.BF,{children:ee.map(e=>(0,r.jsxs)(u.Hj,{children:[(0,r.jsx)(u.nA,{children:e.storeName}),(0,r.jsxs)(u.nA,{children:["₹",e.totalRevenue.toFixed(2)]}),(0,r.jsx)(u.nA,{children:e.totalBills})]},e.storeId))})]})})]}),(0,r.jsxs)(d.Zp,{children:[(0,r.jsx)(d.aR,{children:(0,r.jsx)(d.ZB,{children:"Store Distribution"})}),(0,r.jsx)(d.Wu,{children:"chart"===em?(0,r.jsx)(h.u,{width:"100%",height:300,children:(0,r.jsxs)(w.r,{children:[(0,r.jsx)(A.F,{data:ee,dataKey:"totalRevenue",nameKey:"storeName",cx:"50%",cy:"50%",outerRadius:100,label:!0,children:ee.map((e,t)=>(0,r.jsx)(R.f,{fill:Q[t%Q.length]},"cell-".concat(t)))}),(0,r.jsx)(y.m,{formatter:e=>"₹".concat(Number(e).toFixed(2))})]})}):(0,r.jsxs)(u.XI,{children:[(0,r.jsx)(u.A0,{children:(0,r.jsxs)(u.Hj,{children:[(0,r.jsx)(u.nd,{children:"Store"}),(0,r.jsx)(u.nd,{children:"Revenue %"})]})}),(0,r.jsx)(u.BF,{children:ee.map(e=>(0,r.jsxs)(u.Hj,{children:[(0,r.jsx)(u.nA,{children:e.storeName}),(0,r.jsxs)(u.nA,{children:[eA>0?(e.totalRevenue/eA*100).toFixed(1):"0.0","%"]})]},e.storeId))})]})})]})]}),(0,r.jsxs)(d.Zp,{children:[(0,r.jsx)(d.aR,{children:(0,r.jsx)(d.ZB,{children:"Bills vs Items Sold"})}),(0,r.jsx)(d.Wu,{children:(0,r.jsx)(h.u,{width:"100%",height:300,children:(0,r.jsxs)(k.b,{data:en,children:[(0,r.jsx)(j.d,{strokeDasharray:"3 3"}),(0,r.jsx)(f.W,{dataKey:"date"}),(0,r.jsx)(p.h,{}),(0,r.jsx)(y.m,{}),(0,r.jsx)(N.s,{}),(0,r.jsx)(I.N,{type:"monotone",dataKey:"bills",stroke:"#8884d8",name:"Bills"}),(0,r.jsx)(I.N,{type:"monotone",dataKey:"items",stroke:"#82ca9d",name:"Items"})]})})})]})]}),(0,r.jsxs)(x.av,{value:"stores",className:"space-y-4",children:[(0,r.jsxs)(d.Zp,{children:[(0,r.jsx)(d.aR,{children:(0,r.jsx)(d.ZB,{children:"Store Performance Analysis"})}),(0,r.jsx)(d.Wu,{children:(0,r.jsxs)(u.XI,{children:[(0,r.jsx)(u.A0,{children:(0,r.jsxs)(u.Hj,{children:[(0,r.jsx)(u.nd,{children:"Store"}),(0,r.jsx)(u.nd,{children:"Revenue"}),(0,r.jsx)(u.nd,{children:"Bills"}),(0,r.jsx)(u.nd,{children:"Items"}),(0,r.jsx)(u.nd,{children:"Avg Bill"})]})}),(0,r.jsx)(u.BF,{children:ee.map(e=>(0,r.jsxs)(u.Hj,{children:[(0,r.jsx)(u.nA,{className:"font-medium",children:e.storeName}),(0,r.jsxs)(u.nA,{children:["₹",e.totalRevenue.toFixed(2)]}),(0,r.jsx)(u.nA,{children:e.totalBills}),(0,r.jsx)(u.nA,{children:e.totalItems}),(0,r.jsxs)(u.nA,{children:["₹",e.averageBillValue.toFixed(2)]})]},e.storeId))})]})})]}),(0,r.jsxs)(d.Zp,{children:[(0,r.jsx)(d.aR,{children:(0,r.jsx)(d.ZB,{children:"Store Performance Radar"})}),(0,r.jsx)(d.Wu,{children:(0,r.jsx)(h.u,{width:"100%",height:400,children:(0,r.jsxs)(S.V,{data:ee.slice(0,5),children:[(0,r.jsx)(B.z,{}),(0,r.jsx)(F.r,{dataKey:"storeName"}),(0,r.jsx)(C.E,{}),(0,r.jsx)(Z.V,{name:"Revenue",dataKey:"totalRevenue",stroke:"#8884d8",fill:"#8884d8",fillOpacity:.6}),(0,r.jsx)(N.s,{})]})})})]})]}),(0,r.jsxs)(x.av,{value:"products",className:"space-y-4",children:[(0,r.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,r.jsxs)(d.Zp,{children:[(0,r.jsx)(d.aR,{children:(0,r.jsx)(d.ZB,{children:"Top Products by Revenue"})}),(0,r.jsx)(d.Wu,{children:(0,r.jsx)(h.u,{width:"100%",height:300,children:(0,r.jsxs)(v.E,{data:es.slice().sort((e,t)=>t.totalRevenue-e.totalRevenue).slice(0,10),layout:"vertical",children:[(0,r.jsx)(j.d,{strokeDasharray:"3 3"}),(0,r.jsx)(f.W,{type:"number"}),(0,r.jsx)(p.h,{dataKey:"productName",type:"category",width:120}),(0,r.jsx)(y.m,{formatter:e=>"₹".concat(Number(e).toFixed(2))}),(0,r.jsx)(b.y,{dataKey:"totalRevenue",fill:"#82ca9d"})]})})})]}),(0,r.jsxs)(d.Zp,{children:[(0,r.jsx)(d.aR,{children:(0,r.jsx)(d.ZB,{children:"Top Products by Quantity"})}),(0,r.jsx)(d.Wu,{children:(0,r.jsx)(h.u,{width:"100%",height:300,children:(0,r.jsxs)(v.E,{data:es.slice().sort((e,t)=>t.totalQuantitySold-e.totalQuantitySold).slice(0,10),layout:"vertical",children:[(0,r.jsx)(j.d,{strokeDasharray:"3 3"}),(0,r.jsx)(f.W,{type:"number"}),(0,r.jsx)(p.h,{dataKey:"productName",type:"category",width:120}),(0,r.jsx)(y.m,{}),(0,r.jsx)(b.y,{dataKey:"totalQuantitySold",fill:"#8884d8"})]})})})]})]}),(0,r.jsxs)(d.Zp,{children:[(0,r.jsx)(d.aR,{children:(0,r.jsx)(d.ZB,{children:"Product Performance Table"})}),(0,r.jsx)(d.Wu,{children:(0,r.jsxs)(u.XI,{children:[(0,r.jsx)(u.A0,{children:(0,r.jsxs)(u.Hj,{children:[(0,r.jsx)(u.nd,{children:"Product"}),(0,r.jsx)(u.nd,{children:"Qty Sold"}),(0,r.jsx)(u.nd,{children:"Revenue"}),(0,r.jsx)(u.nd,{children:"Bills"}),(0,r.jsx)(u.nd,{children:"Avg Price"})]})}),(0,r.jsx)(u.BF,{children:es.slice().sort((e,t)=>t.totalRevenue-e.totalRevenue).slice(0,15).map(e=>(0,r.jsxs)(u.Hj,{children:[(0,r.jsx)(u.nA,{className:"font-medium",children:e.productName}),(0,r.jsx)(u.nA,{children:e.totalQuantitySold}),(0,r.jsxs)(u.nA,{children:["₹",e.totalRevenue.toFixed(2)]}),(0,r.jsx)(u.nA,{children:e.totalBills}),(0,r.jsxs)(u.nA,{children:["₹",e.averagePrice.toFixed(2)]})]},e.productId))})]})})]})]}),(0,r.jsxs)(x.av,{value:"trends",className:"space-y-4",children:[(0,r.jsxs)(d.Zp,{children:[(0,r.jsx)(d.aR,{children:(0,r.jsx)(d.ZB,{children:"Revenue Trend Analysis"})}),(0,r.jsx)(d.Wu,{children:(0,r.jsx)(h.u,{width:"100%",height:400,children:(0,r.jsxs)(m.Q,{data:en,children:[(0,r.jsx)("defs",{children:(0,r.jsxs)("linearGradient",{id:"colorRev",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,r.jsx)("stop",{offset:"5%",stopColor:"#8884d8",stopOpacity:.8}),(0,r.jsx)("stop",{offset:"95%",stopColor:"#8884d8",stopOpacity:0})]})}),(0,r.jsx)(j.d,{strokeDasharray:"3 3"}),(0,r.jsx)(f.W,{dataKey:"date"}),(0,r.jsx)(p.h,{}),(0,r.jsx)(y.m,{formatter:e=>"₹".concat(Number(e).toFixed(2))}),(0,r.jsx)(N.s,{}),(0,r.jsx)(g.Gk,{type:"monotone",dataKey:"revenue",stroke:"#8884d8",fill:"url(#colorRev)",name:"Revenue"})]})})})]}),(0,r.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,r.jsxs)(d.Zp,{children:[(0,r.jsx)(d.aR,{children:(0,r.jsx)(d.ZB,{children:"Daily Bills Count"})}),(0,r.jsx)(d.Wu,{children:(0,r.jsx)(h.u,{width:"100%",height:300,children:(0,r.jsxs)(k.b,{data:en,children:[(0,r.jsx)(j.d,{strokeDasharray:"3 3"}),(0,r.jsx)(f.W,{dataKey:"date"}),(0,r.jsx)(p.h,{}),(0,r.jsx)(y.m,{}),(0,r.jsx)(I.N,{type:"monotone",dataKey:"bills",stroke:"#8884d8",strokeWidth:2})]})})})]}),(0,r.jsxs)(d.Zp,{children:[(0,r.jsx)(d.aR,{children:(0,r.jsx)(d.ZB,{children:"Daily Items Sold"})}),(0,r.jsx)(d.Wu,{children:(0,r.jsx)(h.u,{width:"100%",height:300,children:(0,r.jsxs)(k.b,{data:en,children:[(0,r.jsx)(j.d,{strokeDasharray:"3 3"}),(0,r.jsx)(f.W,{dataKey:"date"}),(0,r.jsx)(p.h,{}),(0,r.jsx)(y.m,{}),(0,r.jsx)(I.N,{type:"monotone",dataKey:"items",stroke:"#82ca9d",strokeWidth:2})]})})})]})]})]}),(0,r.jsxs)(x.av,{value:"returns",className:"space-y-4",children:[(0,r.jsxs)("div",{className:"grid gap-4 md:grid-cols-3",children:[(0,r.jsx)(G,{title:"Total Returns",value:J.length,icon:(0,r.jsx)(K.A,{className:"h-4 w-4 text-muted-foreground"})}),(0,r.jsx)(G,{title:"Refund Amount",value:"₹".concat(J.reduce((e,t)=>e+(t.returnAmount||0),0).toFixed(2)),icon:(0,r.jsx)(q.A,{className:"h-4 w-4 text-muted-foreground"})}),(0,r.jsx)(G,{title:"Pending Returns",value:J.filter(e=>"pending"===e.status).length,icon:(0,r.jsx)(L.A,{className:"h-4 w-4 text-muted-foreground"})})]}),(0,r.jsxs)(d.Zp,{children:[(0,r.jsx)(d.aR,{children:(0,r.jsx)(d.ZB,{children:"Recent Returns"})}),(0,r.jsx)(d.Wu,{children:(0,r.jsxs)(u.XI,{children:[(0,r.jsx)(u.A0,{children:(0,r.jsxs)(u.Hj,{children:[(0,r.jsx)(u.nd,{children:"Date"}),(0,r.jsx)(u.nd,{children:"Product ID"}),(0,r.jsx)(u.nd,{children:"Amount"}),(0,r.jsx)(u.nd,{children:"Status"})]})}),(0,r.jsx)(u.BF,{children:J.slice().sort((e,t)=>new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime()).slice(0,20).map(e=>{var t;return(0,r.jsxs)(u.Hj,{children:[(0,r.jsx)(u.nA,{children:e.createdAt&&!isNaN(new Date(e.createdAt).getTime())?(0,V.GP)(new Date(e.createdAt),"MMM dd, yyyy"):"N/A"}),(0,r.jsxs)(u.nA,{className:"font-mono text-xs",children:[null==(t=e.productId)?void 0:t.substring(0,20),"..."]}),(0,r.jsxs)(u.nA,{children:["₹",(e.returnAmount||0).toFixed(2)]}),(0,r.jsx)(u.nA,{children:(0,r.jsx)(i.E,{variant:"approved"===e.status?"default":"pending"===e.status?"secondary":"destructive",children:e.status})})]},e.returnId)})})]})})]})]}),(0,r.jsxs)(x.av,{value:"inventory",className:"space-y-4",children:[(0,r.jsxs)("div",{className:"grid gap-4 md:grid-cols-4",children:[(0,r.jsx)(G,{title:"Total Products",value:z.length,icon:(0,r.jsx)(H.A,{className:"h-4 w-4 text-muted-foreground"})}),(0,r.jsx)(G,{title:"Inventory Value",value:"₹".concat(z.reduce((e,t)=>e+t.price*t.stock,0).toFixed(2)),icon:(0,r.jsx)(q.A,{className:"h-4 w-4 text-muted-foreground"})}),(0,r.jsx)(G,{title:"Low Stock",value:z.filter(e=>e.stock>0&&e.stock<10).length,icon:(0,r.jsx)(L.A,{className:"h-4 w-4 text-muted-foreground"})}),(0,r.jsx)(G,{title:"Out of Stock",value:z.filter(e=>0===e.stock).length,icon:(0,r.jsx)(L.A,{className:"h-4 w-4 text-muted-foreground"})})]}),(0,r.jsxs)(d.Zp,{children:[(0,r.jsx)(d.aR,{children:(0,r.jsx)(d.ZB,{children:"Inventory Status Distribution"})}),(0,r.jsx)(d.Wu,{children:(0,r.jsx)(h.u,{width:"100%",height:300,children:(0,r.jsxs)(w.r,{children:[(0,r.jsxs)(A.F,{data:[{name:"In Stock",value:z.filter(e=>e.stock>=10).length},{name:"Low Stock",value:z.filter(e=>e.stock>0&&e.stock<10).length},{name:"Out of Stock",value:z.filter(e=>0===e.stock).length}],cx:"50%",cy:"50%",labelLine:!1,label:!0,outerRadius:100,fill:"#8884d8",dataKey:"value",children:[(0,r.jsx)(R.f,{fill:"#00C49F"}),(0,r.jsx)(R.f,{fill:"#FFBB28"}),(0,r.jsx)(R.f,{fill:"#FF8042"})]}),(0,r.jsx)(y.m,{}),(0,r.jsx)(N.s,{})]})})})]}),(0,r.jsxs)(d.Zp,{children:[(0,r.jsx)(d.aR,{children:(0,r.jsx)(d.ZB,{children:"Low Stock Products"})}),(0,r.jsx)(d.Wu,{children:(0,r.jsxs)(u.XI,{children:[(0,r.jsx)(u.A0,{children:(0,r.jsxs)(u.Hj,{children:[(0,r.jsx)(u.nd,{children:"Product"}),(0,r.jsx)(u.nd,{children:"Stock"}),(0,r.jsx)(u.nd,{children:"Price"}),(0,r.jsx)(u.nd,{children:"Value"})]})}),(0,r.jsx)(u.BF,{children:z.filter(e=>e.stock<10).slice(0,20).map(e=>(0,r.jsxs)(u.Hj,{children:[(0,r.jsx)(u.nA,{className:"font-medium",children:e.name}),(0,r.jsx)(u.nA,{children:(0,r.jsx)(i.E,{variant:0===e.stock?"destructive":"secondary",children:e.stock})}),(0,r.jsxs)(u.nA,{children:["₹",e.price.toFixed(2)]}),(0,r.jsxs)(u.nA,{children:["₹",(e.price*e.stock).toFixed(2)]})]},e.id))})]})})]})]})]})]})})}},81955:(e,t,s)=>{Promise.resolve().then(s.bind(s,63290))},83209:(e,t,s)=>{"use strict";s.d(t,{BT:()=>o,Wu:()=>c,ZB:()=>i,Zp:()=>n,aR:()=>d});var r=s(95155),a=s(12115),l=s(25016);let n=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,l.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",s),...a})});n.displayName="Card";let d=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",s),...a})});d.displayName="CardHeader";let i=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,l.cn)("text-2xl font-semibold leading-none tracking-tight",s),...a})});i.displayName="CardTitle";let o=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,l.cn)("text-sm text-muted-foreground",s),...a})});o.displayName="CardDescription";let c=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,l.cn)("p-6 pt-0",s),...a})});c.displayName="CardContent",a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,l.cn)("flex items-center p-6 pt-0",s),...a})}).displayName="CardFooter"},90923:(e,t,s)=>{"use strict";s.d(t,{Xi:()=>o,av:()=>c,j7:()=>i,tU:()=>d});var r=s(95155),a=s(12115),l=s(25667),n=s(25016);let d=l.bL,i=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(l.B8,{ref:t,className:(0,n.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",s),...a})});i.displayName=l.B8.displayName;let o=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(l.l9,{ref:t,className:(0,n.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",s),...a})});o.displayName=l.l9.displayName;let c=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(l.UC,{ref:t,className:(0,n.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",s),...a})});c.displayName=l.UC.displayName},96633:(e,t,s)=>{"use strict";s.d(t,{A0:()=>d,BF:()=>i,Gg:()=>o,Hj:()=>c,XI:()=>n,nA:()=>x,nd:()=>u});var r=s(95155),a=s(12115),l=s(25016);let n=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{className:"relative w-full overflow-auto",children:(0,r.jsx)("table",{ref:t,className:(0,l.cn)("w-full caption-bottom text-sm",s),...a})})});n.displayName="Table";let d=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("thead",{ref:t,className:(0,l.cn)("[&_tr]:border-b",s),...a})});d.displayName="TableHeader";let i=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("tbody",{ref:t,className:(0,l.cn)("[&_tr:last-child]:border-0",s),...a})});i.displayName="TableBody";let o=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("tfoot",{ref:t,className:(0,l.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",s),...a})});o.displayName="TableFooter";let c=a.forwardRef((e,t)=>{let{className:s,children:a,...n}=e;return(0,r.jsx)("tr",{ref:t,className:(0,l.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",s),...n,children:a})});c.displayName="TableRow";let u=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("th",{ref:t,className:(0,l.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",s),...a})});u.displayName="TableHead";let x=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("td",{ref:t,className:(0,l.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",s),...a})});x.displayName="TableCell",a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("caption",{ref:t,className:(0,l.cn)("mt-4 text-sm text-muted-foreground",s),...a})}).displayName="TableCaption"}},e=>{e.O(0,[9206,6445,5239,5584,9648,5730,6840,399,832,8441,1255,7358],()=>e(e.s=81955)),_N_E=e.O()}]);