(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[926],{20120:(e,a,t)=>{"use strict";t.d(a,{$v:()=>f,EO:()=>x,Lt:()=>n,Rx:()=>j,Zr:()=>N,ck:()=>u,r7:()=>h,tv:()=>i,wd:()=>p});var s=t(95155),l=t(12115),r=t(35646),d=t(25016),c=t(97003);let n=r.bL,i=r.l9,o=r.ZL,m=l.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,s.jsx)(r.hJ,{className:(0,d.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...l,ref:a})});m.displayName=r.hJ.displayName;let x=l.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,s.jsxs)(o,{children:[(0,s.jsx)(m,{}),(0,s.jsx)(r.UC,{ref:a,className:(0,d.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...l})]})});x.displayName=r.UC.displayName;let p=e=>{let{className:a,...t}=e;return(0,s.jsx)("div",{className:(0,d.cn)("flex flex-col space-y-2 text-center sm:text-left",a),...t})};p.displayName="AlertDialogHeader";let u=e=>{let{className:a,...t}=e;return(0,s.jsx)("div",{className:(0,d.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",a),...t})};u.displayName="AlertDialogFooter";let h=l.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,s.jsx)(r.hE,{ref:a,className:(0,d.cn)("text-lg font-semibold",t),...l})});h.displayName=r.hE.displayName;let f=l.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,s.jsx)(r.VY,{ref:a,className:(0,d.cn)("text-sm text-muted-foreground",t),...l})});f.displayName=r.VY.displayName;let j=l.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,s.jsx)(r.rc,{ref:a,className:(0,d.cn)((0,c.r)(),t),...l})});j.displayName=r.rc.displayName;let N=l.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,s.jsx)(r.ZD,{ref:a,className:(0,d.cn)((0,c.r)({variant:"outline"}),"mt-2 sm:mt-0",t),...l})});N.displayName=r.ZD.displayName},35842:(e,a,t)=>{Promise.resolve().then(t.bind(t,80094))},47507:(e,a,t)=>{"use strict";t.d(a,{bq:()=>x,eb:()=>f,gC:()=>h,l6:()=>o,yv:()=>m});var s=t(95155),l=t(12115),r=t(47887),d=t(24033),c=t(12108),n=t(5917),i=t(25016);let o=r.bL;r.YJ;let m=r.WT,x=l.forwardRef((e,a)=>{let{className:t,children:l,...c}=e;return(0,s.jsxs)(r.l9,{ref:a,className:(0,i.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...c,children:[l,(0,s.jsx)(r.In,{asChild:!0,children:(0,s.jsx)(d.A,{className:"h-4 w-4 opacity-50"})})]})});x.displayName=r.l9.displayName;let p=l.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,s.jsx)(r.PP,{ref:a,className:(0,i.cn)("flex cursor-default items-center justify-center py-1",t),...l,children:(0,s.jsx)(c.A,{className:"h-4 w-4"})})});p.displayName=r.PP.displayName;let u=l.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,s.jsx)(r.wn,{ref:a,className:(0,i.cn)("flex cursor-default items-center justify-center py-1",t),...l,children:(0,s.jsx)(d.A,{className:"h-4 w-4"})})});u.displayName=r.wn.displayName;let h=l.forwardRef((e,a)=>{let{className:t,children:l,position:d="popper",...c}=e;return(0,s.jsx)(r.ZL,{children:(0,s.jsxs)(r.UC,{ref:a,className:(0,i.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===d&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:d,...c,children:[(0,s.jsx)(p,{}),(0,s.jsx)(r.LM,{className:(0,i.cn)("p-1","popper"===d&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:l}),(0,s.jsx)(u,{})]})})});h.displayName=r.UC.displayName,l.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,s.jsx)(r.JU,{ref:a,className:(0,i.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...l})}).displayName=r.JU.displayName;let f=l.forwardRef((e,a)=>{let{className:t,children:l,...d}=e;return(0,s.jsxs)(r.q7,{ref:a,className:(0,i.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...d,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(r.VF,{children:(0,s.jsx)(n.A,{className:"h-4 w-4"})})}),(0,s.jsx)(r.p4,{children:l})]})});f.displayName=r.q7.displayName,l.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,s.jsx)(r.wv,{ref:a,className:(0,i.cn)("-mx-1 my-1 h-px bg-muted",t),...l})}).displayName=r.wv.displayName},54679:(e,a,t)=>{"use strict";t.d(a,{Cf:()=>x,Es:()=>u,L3:()=>h,c7:()=>p,lG:()=>n,rr:()=>f,zM:()=>i});var s=t(95155),l=t(12115),r=t(89511),d=t(65229),c=t(25016);let n=r.bL,i=r.l9,o=r.ZL;r.bm;let m=l.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,s.jsx)(r.hJ,{ref:a,className:(0,c.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...l})});m.displayName=r.hJ.displayName;let x=l.forwardRef((e,a)=>{let{className:t,children:l,...n}=e;return(0,s.jsxs)(o,{children:[(0,s.jsx)(m,{}),(0,s.jsxs)(r.UC,{ref:a,className:(0,c.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...n,children:[l,(0,s.jsxs)(r.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,s.jsx)(d.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});x.displayName=r.UC.displayName;let p=e=>{let{className:a,...t}=e;return(0,s.jsx)("div",{className:(0,c.cn)("flex flex-col space-y-1.5 text-center sm:text-left",a),...t})};p.displayName="DialogHeader";let u=e=>{let{className:a,...t}=e;return(0,s.jsx)("div",{className:(0,c.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",a),...t})};u.displayName="DialogFooter";let h=l.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,s.jsx)(r.hE,{ref:a,className:(0,c.cn)("text-lg font-semibold leading-none tracking-tight",t),...l})});h.displayName=r.hE.displayName;let f=l.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,s.jsx)(r.VY,{ref:a,className:(0,c.cn)("text-sm text-muted-foreground",t),...l})});f.displayName=r.VY.displayName},80094:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>P});var s=t(95155),l=t(12115),r=t(20063),d=t(1026),c=t(16176),n=t(97003),i=t(33789),o=t(90235),m=t(83209),x=t(67812),p=t(54679),u=t(47507),h=t(20120),f=t(78874),j=t(6132),N=t(42529),g=t(21786),y=t(39867),v=t(6191),b=t(71360),w=t(26617),k=t(86651),C=t(309),S=t(11010);let A=(0,t(67909).default)(()=>Promise.all([t.e(261),t.e(7)]).then(t.bind(t,12007)),{loadableGenerated:{webpack:()=>[12007]},ssr:!1}),E=e=>fetch("".concat("http://127.0.0.1:8000").concat(e)).then(e=>e.json());function P(){var e;(0,r.useRouter)();let{data:a=[],mutate:t}=(0,d.Ay)("/api/products",E),[P,R]=(0,l.useState)(null),[F,J]=(0,l.useState)([]),[z,L]=(0,l.useState)(""),[$,O]=(0,l.useState)("all"),[T,Z]=(0,l.useState)("all"),[I,U]=(0,l.useState)(!1),[D,B]=(0,l.useState)(!1),[M,_]=(0,l.useState)(null),[G,W]=(0,l.useState)(!1),[q,V]=(0,l.useState)([]),[Y,H]=(0,l.useState)([]),[Q,K]=(0,l.useState)({name:"",price:"",stock:"",tax:"",barcodes:[""]});(0,l.useEffect)(()=>{let e=localStorage.getItem("adminUser");if(e){let a=JSON.parse(e);if(R(a),"billing_user"===a.role&&a.assignedStores){let e=localStorage.getItem("stores");e&&J(JSON.parse(e).filter(e=>{var t;return(null==(t=a.assignedStores)?void 0:t.includes(e.id))&&"active"===e.status}))}}},[]);let X=()=>{K({name:"",price:"",stock:"",tax:"",barcodes:[""]})},ee=()=>{K({...Q,barcodes:[...Q.barcodes,""]})},ea=e=>{if(Q.barcodes.length>1){let a=Q.barcodes.filter((a,t)=>t!==e);K({...Q,barcodes:a})}},et=(e,a)=>{let t=[...Q.barcodes];t[e]=a,K({...Q,barcodes:t})},es=()=>{let e=Date.now().toString(),a=Math.floor(1e3*Math.random()).toString().padStart(3,"0");return"".concat(e).concat(a)},el=async()=>{if(!Q.name||!Q.price||!Q.stock)return void alert("Please fill in all required fields");let e=Q.barcodes.filter(e=>""!==e.trim());if(0===e.length)return void alert("Please add at least one barcode");let s=a.flatMap(e=>e.barcodes||[]),l=e.filter(e=>s.includes(e));if(l.length>0)return void alert("Barcode(s) already exist: ".concat(l.join(", ")));let r={name:Q.name,price:Number.parseFloat(Q.price),stock:Number.parseInt(Q.stock),tax:Number.parseFloat(Q.tax),barcodes:e};try{if(!(await fetch("".concat("http://127.0.0.1:8000","/api/products"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)})).ok)throw Error("Failed to add product");t(),X(),U(!1)}catch(e){console.error("Error adding product:",e),alert("Failed to add product.")}},er=async()=>{if(!M||!Q.name||!Q.price||!Q.stock)return void alert("Please fill in all required fields");let e=Q.barcodes.filter(e=>""!==e.trim());if(0===e.length)return void alert("Please add at least one barcode");let s=a.filter(e=>e.id!==M.id).flatMap(e=>e.barcodes||[]),l=e.filter(e=>s.includes(e));if(l.length>0)return void alert("Barcode(s) already exist: ".concat(l.join(", ")));let r={name:Q.name,price:Number.parseFloat(Q.price),stock:Number.parseInt(Q.stock),tax:Number.parseFloat(Q.tax),barcodes:e};try{if(!(await fetch("".concat("http://127.0.0.1:8000","/api/products/").concat(M.id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)})).ok)throw Error("Failed to update product");t(),X(),_(null),B(!1)}catch(e){console.error("Error updating product:",e),alert("Failed to update product.")}},ed=async e=>{try{if(!(await fetch("".concat("http://127.0.0.1:8000","/api/products/").concat(e),{method:"DELETE"})).ok)throw Error("Failed to delete product");t()}catch(e){console.error("Error deleting product:",e),alert("Failed to delete product.")}},ec=e=>{H(a.filter(a=>e.includes(a.id))),W(!0)},en=async e=>{var a;let s=null==(a=e.target.files)?void 0:a[0];if(!s)return;let l=new FileReader;l.onload=async e=>{try{var a;let s=JSON.parse(null==(a=e.target)?void 0:a.result);if(Array.isArray(s)){for(let e of s)await fetch("".concat("http://127.0.0.1:8000","/api/products"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});t(),alert("Successfully imported ".concat(s.length," products"))}else alert("Invalid file format")}catch(e){alert("Error reading file")}},l.readAsText(s)},ei=a.filter(e=>{let a=""===z||e.name.toLowerCase().includes(z.toLowerCase())||e.barcodes.some(e=>e.toLowerCase().includes(z.toLowerCase())),t="all"===T||"low"===T&&e.stock<=5||"out"===T&&0===e.stock||"available"===T&&e.stock>5;return a&&t});return(0,s.jsx)(c.default,{children:(0,s.jsxs)("div",{className:"space-y-8",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Product Management"}),(0,s.jsx)("p",{className:"text-gray-600 mt-2",children:"Manage your inventory and product catalog"})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("input",{type:"file",accept:".json",onChange:en,className:"hidden",id:"import-products"}),(0,s.jsxs)(n.$,{variant:"outline",onClick:()=>{var e;return null==(e=document.getElementById("import-products"))?void 0:e.click()},children:[(0,s.jsx)(g.A,{className:"h-4 w-4 mr-2"}),"Import"]}),(0,s.jsxs)(n.$,{variant:"outline",onClick:()=>{let e="data:application/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(a,null,2)),t="products_".concat(new Date().toISOString().split("T")[0],".json"),s=document.createElement("a");s.setAttribute("href",e),s.setAttribute("download",t),s.click()},children:[(0,s.jsx)(y.A,{className:"h-4 w-4 mr-2"}),"Export"]}),(0,s.jsxs)(p.lG,{open:I,onOpenChange:U,children:[(0,s.jsx)(p.zM,{asChild:!0,children:(0,s.jsxs)(n.$,{className:"bg-blue-600 hover:bg-blue-700",children:[(0,s.jsx)(v.A,{className:"h-4 w-4 mr-2"}),"Add Product"]})}),(0,s.jsxs)(p.Cf,{className:"sm:max-w-[600px] max-h-[90vh] overflow-y-auto",children:[(0,s.jsxs)(p.c7,{children:[(0,s.jsx)(p.L3,{children:"Add New Product"}),(0,s.jsx)(p.rr,{children:"Create a new product with barcode information"})]}),(0,s.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(o.J,{htmlFor:"name",children:"Product Name *"}),(0,s.jsx)(i.p,{id:"name",value:Q.name,onChange:e=>K({...Q,name:e.target.value}),placeholder:"Enter product name"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(o.J,{htmlFor:"price",children:"Price (₹) *"}),(0,s.jsx)(i.p,{id:"price",type:"number",min:"0",step:"0.01",value:Q.price,onChange:e=>K({...Q,price:e.target.value}),placeholder:"0.00"})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(o.J,{htmlFor:"stock",children:"Stock Quantity *"}),(0,s.jsx)(i.p,{id:"stock",type:"number",min:"0",value:Q.stock,onChange:e=>K({...Q,stock:e.target.value}),placeholder:"0"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(o.J,{htmlFor:"tax",children:"Tax (%)"}),(0,s.jsx)(i.p,{id:"tax",type:"number",min:"0",step:"0.01",value:Q.tax,onChange:e=>K({...Q,tax:e.target.value}),placeholder:"0.00"})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)(o.J,{children:"Barcodes *"}),(0,s.jsxs)(n.$,{type:"button",variant:"outline",size:"sm",onClick:ee,children:[(0,s.jsx)(v.A,{className:"h-3 w-3 mr-1"}),"Add Barcode"]})]}),(0,s.jsx)("div",{className:"space-y-2",children:Q.barcodes.map((e,a)=>(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(i.p,{value:e,onChange:e=>et(a,e.target.value),placeholder:"Enter barcode or click generate",className:"flex-1"}),(0,s.jsx)(n.$,{type:"button",variant:"outline",size:"sm",onClick:()=>et(a,es()),children:"Generate"}),Q.barcodes.length>1&&(0,s.jsx)(n.$,{type:"button",variant:"outline",size:"sm",onClick:()=>ea(a),className:"text-red-600 hover:text-red-700",children:(0,s.jsx)(b.A,{className:"h-3 w-3"})})]},a))})]})]}),(0,s.jsxs)(p.Es,{children:[(0,s.jsx)(n.$,{variant:"outline",onClick:()=>{U(!1),X()},children:"Cancel"}),(0,s.jsx)(n.$,{onClick:el,children:"Add Product"})]})]})]})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,s.jsx)(m.Zp,{children:(0,s.jsx)(m.Wu,{className:"p-6",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(w.A,{className:"h-8 w-8 text-blue-600"}),(0,s.jsxs)("div",{className:"ml-4",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Products"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:a.length})]})]})})}),(0,s.jsx)(m.Zp,{children:(0,s.jsx)(m.Wu,{className:"p-6",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(N.A,{className:"h-8 w-8 text-green-600"}),(0,s.jsxs)("div",{className:"ml-4",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"In Stock"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:a.filter(e=>e.stock>5).length})]})]})})}),(0,s.jsx)(m.Zp,{children:(0,s.jsx)(m.Wu,{className:"p-6",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(j.A,{className:"h-8 w-8 text-yellow-600"}),(0,s.jsxs)("div",{className:"ml-4",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Low Stock"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:a.filter(e=>e.stock>0&&e.stock<=5).length})]})]})})}),(0,s.jsx)(m.Zp,{children:(0,s.jsx)(m.Wu,{className:"p-6",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(f.A,{className:"h-8 w-8 text-red-600"}),(0,s.jsxs)("div",{className:"ml-4",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Out of Stock"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:a.filter(e=>0===e.stock).length})]})]})})})]}),(0,s.jsxs)(m.Zp,{children:[(0,s.jsx)(m.aR,{children:(0,s.jsx)(m.ZB,{children:"Product Catalog"})}),(0,s.jsxs)(m.Wu,{children:[(0,s.jsxs)("div",{className:"flex flex-col md:flex-row gap-4 mb-6",children:[(0,s.jsx)("div",{className:"flex-1",children:(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(k.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),(0,s.jsx)(i.p,{placeholder:"Search products or barcodes...",value:z,onChange:e=>L(e.target.value),className:"pl-10"})]})}),(0,s.jsxs)(u.l6,{value:T,onValueChange:Z,children:[(0,s.jsx)(u.bq,{className:"w-full md:w-48",children:(0,s.jsx)(u.yv,{placeholder:"Filter by stock"})}),(0,s.jsxs)(u.gC,{children:[(0,s.jsx)(u.eb,{value:"all",children:"All Stock Levels"}),(0,s.jsx)(u.eb,{value:"available",children:"In Stock"}),(0,s.jsx)(u.eb,{value:"low",children:"Low Stock"}),(0,s.jsx)(u.eb,{value:"out",children:"Out of Stock"})]})]})]}),q.length>0&&(0,s.jsx)("div",{className:"mb-4 p-4 bg-blue-50 rounded-lg border border-blue-200",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("span",{className:"text-sm font-medium text-blue-700",children:[q.length," product(s) selected"]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsxs)(n.$,{variant:"outline",size:"sm",onClick:()=>ec(q),children:[(0,s.jsx)(C.A,{className:"h-4 w-4 mr-2"}),"Print Labels"]}),(0,s.jsx)(n.$,{variant:"outline",size:"sm",onClick:()=>V([]),children:"Clear Selection"})]})]})}),(0,s.jsxs)("div",{className:"overflow-x-auto",children:[(0,s.jsxs)("table",{className:"w-full",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"border-b",children:[(0,s.jsx)("th",{className:"text-left p-4",children:(0,s.jsx)("input",{type:"checkbox",checked:q.length===ei.length&&ei.length>0,onChange:()=>{q.length===ei.length?V([]):V(ei.map(e=>e.id))},className:"rounded"})}),(0,s.jsx)("th",{className:"text-left p-4 font-medium",children:"Product"}),(0,s.jsx)("th",{className:"text-left p-4 font-medium",children:"Price"}),(0,s.jsx)("th",{className:"text-left p-4 font-medium",children:"Tax"}),(0,s.jsx)("th",{className:"text-left p-4 font-medium",children:"Stock"}),(0,s.jsx)("th",{className:"text-left p-4 font-medium",children:"Barcodes"}),(0,s.jsx)("th",{className:"text-left p-4 font-medium",children:"Status"}),(0,s.jsx)("th",{className:"text-left p-4 font-medium",children:"Actions"})]})}),(0,s.jsx)("tbody",{children:ei.map(e=>{var a;let t=0===(a=e.stock)?{label:"Out of Stock",variant:"destructive",icon:f.A}:a<=5?{label:"Low Stock",variant:"secondary",icon:j.A}:{label:"In Stock",variant:"default",icon:N.A},l=t.icon;return(0,s.jsxs)("tr",{className:"border-b hover:bg-gray-50",children:[(0,s.jsx)("td",{className:"p-4",children:(0,s.jsx)("input",{type:"checkbox",checked:q.includes(e.id),onChange:()=>{var a;return a=e.id,void V(e=>e.includes(a)?e.filter(e=>e!==a):[...e,a])},className:"rounded"})}),(0,s.jsx)("td",{className:"p-4",children:(0,s.jsx)("div",{children:(0,s.jsx)("div",{className:"font-medium",children:e.name})})}),(0,s.jsx)("td",{className:"p-4",children:(0,s.jsxs)("span",{className:"font-medium",children:["₹",e.price.toFixed(2)]})}),(0,s.jsx)("td",{className:"p-4",children:(0,s.jsxs)("span",{className:"font-medium",children:[(e.tax||0).toFixed(2),"%"]})}),(0,s.jsx)("td",{className:"p-4",children:(0,s.jsx)("span",{className:"font-medium",children:e.stock})}),(0,s.jsx)("td",{className:"p-4",children:(0,s.jsxs)("div",{className:"space-y-1",children:[(e.barcodes||[]).slice(0,2).map((e,a)=>(0,s.jsx)("code",{className:"text-xs bg-gray-100 px-2 py-1 rounded block",children:e},a)),(e.barcodes||[]).length>2&&(0,s.jsxs)("span",{className:"text-xs text-gray-500",children:["+",(e.barcodes||[]).length-2," more"]})]})}),(0,s.jsx)("td",{className:"p-4",children:(0,s.jsxs)(x.E,{variant:t.variant,className:"flex items-center w-fit",children:[(0,s.jsx)(l,{className:"h-3 w-3 mr-1"}),t.label]})}),(0,s.jsx)("td",{className:"p-4",children:(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(n.$,{variant:"outline",size:"sm",onClick:()=>{_(e),K({name:e.name,price:e.price.toString(),stock:e.stock.toString(),tax:null!=e.tax?e.tax.toString():"",barcodes:e.barcodes.length>0?e.barcodes:[""]}),B(!0)},children:(0,s.jsx)(S.A,{className:"h-3 w-3"})}),(0,s.jsx)(n.$,{variant:"outline",size:"sm",onClick:()=>ec([e.id]),children:(0,s.jsx)(C.A,{className:"h-3 w-3"})}),(0,s.jsxs)(h.Lt,{children:[(0,s.jsx)(h.tv,{asChild:!0,children:(0,s.jsx)(n.$,{variant:"outline",size:"sm",className:"text-red-600 hover:text-red-700 bg-transparent",children:(0,s.jsx)(b.A,{className:"h-3 w-3"})})}),(0,s.jsxs)(h.EO,{children:[(0,s.jsxs)(h.wd,{children:[(0,s.jsx)(h.r7,{children:"Delete Product"}),(0,s.jsxs)(h.$v,{children:['Are you sure you want to delete "',e.name,'"? This action cannot be undone.']})]}),(0,s.jsxs)(h.ck,{children:[(0,s.jsx)(h.Zr,{children:"Cancel"}),(0,s.jsx)(h.Rx,{onClick:()=>ed(e.id),className:"bg-red-600 hover:bg-red-700",children:"Delete"})]})]})]})]})})]},e.id)})})]}),0===ei.length&&(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)(w.A,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),(0,s.jsx)("h3",{className:"text-xl font-medium text-gray-900 mb-2",children:"No products found"}),(0,s.jsx)("p",{className:"text-gray-500 mb-4",children:z||"all"!==$||"all"!==T?"Try adjusting your search or filters":"Get started by adding your first product"}),!z&&"all"===$&&"all"===T&&(0,s.jsxs)(n.$,{onClick:()=>U(!0),children:[(0,s.jsx)(v.A,{className:"h-4 w-4 mr-2"}),"Add Your First Product"]})]})]})]})]}),(0,s.jsx)(A,{products:Y,isOpen:G,onClose:()=>W(!1),onPrintSuccess:()=>{V([]),H([])},storeName:(null==F||null==(e=F[0])?void 0:e.name)||"Siri Art Jewellers"}),(0,s.jsx)(p.lG,{open:D,onOpenChange:B,children:(0,s.jsxs)(p.Cf,{className:"sm:max-w-[600px] max-h-[90vh] overflow-y-auto",children:[(0,s.jsxs)(p.c7,{children:[(0,s.jsx)(p.L3,{children:"Edit Product"}),(0,s.jsx)(p.rr,{children:"Update product information and barcode details"})]}),(0,s.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,s.jsx)("div",{className:"grid grid-cols-2 gap-4",children:(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(o.J,{htmlFor:"edit-name",children:"Product Name *"}),(0,s.jsx)(i.p,{id:"edit-name",value:Q.name,onChange:e=>K({...Q,name:e.target.value}),placeholder:"Enter product name"})]})}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(o.J,{htmlFor:"edit-price",children:"Price (₹) *"}),(0,s.jsx)(i.p,{id:"edit-price",type:"number",min:"0",step:"0.01",value:Q.price,onChange:e=>K({...Q,price:e.target.value}),placeholder:"0.00"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(o.J,{htmlFor:"edit-stock",children:"Stock Quantity *"}),(0,s.jsx)(i.p,{id:"edit-stock",type:"number",min:"0",value:Q.stock,onChange:e=>K({...Q,stock:e.target.value}),placeholder:"0"})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(o.J,{htmlFor:"edit-tax",children:"Tax (%)"}),(0,s.jsx)(i.p,{id:"edit-tax",type:"number",min:"0",step:"0.01",value:Q.tax,onChange:e=>K({...Q,tax:e.target.value}),placeholder:"0.00"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)(o.J,{children:"Barcodes *"}),(0,s.jsxs)(n.$,{type:"button",variant:"outline",size:"sm",onClick:ee,children:[(0,s.jsx)(v.A,{className:"h-3 w-3 mr-1"}),"Add Barcode"]})]}),(0,s.jsx)("div",{className:"space-y-2",children:Q.barcodes.map((e,a)=>(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(i.p,{value:e,onChange:e=>et(a,e.target.value),placeholder:"Enter barcode or click generate",className:"flex-1"}),(0,s.jsx)(n.$,{type:"button",variant:"outline",size:"sm",onClick:()=>et(a,es()),children:"Generate"}),Q.barcodes.length>1&&(0,s.jsx)(n.$,{type:"button",variant:"outline",size:"sm",onClick:()=>ea(a),className:"text-red-600 hover:text-red-700",children:(0,s.jsx)(b.A,{className:"h-3 w-3"})})]},a))})]})]}),(0,s.jsxs)(p.Es,{children:[(0,s.jsx)(n.$,{variant:"outline",onClick:()=>{B(!1),X(),_(null)},children:"Cancel"}),(0,s.jsx)(n.$,{onClick:er,children:"Update Product"})]})]})})]})})}},83209:(e,a,t)=>{"use strict";t.d(a,{BT:()=>i,Wu:()=>o,ZB:()=>n,Zp:()=>d,aR:()=>c});var s=t(95155),l=t(12115),r=t(25016);let d=l.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,s.jsx)("div",{ref:a,className:(0,r.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...l})});d.displayName="Card";let c=l.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,s.jsx)("div",{ref:a,className:(0,r.cn)("flex flex-col space-y-1.5 p-6",t),...l})});c.displayName="CardHeader";let n=l.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,s.jsx)("div",{ref:a,className:(0,r.cn)("text-2xl font-semibold leading-none tracking-tight",t),...l})});n.displayName="CardTitle";let i=l.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,s.jsx)("div",{ref:a,className:(0,r.cn)("text-sm text-muted-foreground",t),...l})});i.displayName="CardDescription";let o=l.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,s.jsx)("div",{ref:a,className:(0,r.cn)("p-6 pt-0",t),...l})});o.displayName="CardContent",l.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,s.jsx)("div",{ref:a,className:(0,r.cn)("flex items-center p-6 pt-0",t),...l})}).displayName="CardFooter"},90235:(e,a,t)=>{"use strict";t.d(a,{J:()=>i});var s=t(95155),l=t(12115),r=t(10489),d=t(83101),c=t(25016);let n=(0,d.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),i=l.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,s.jsx)(r.b,{ref:a,className:(0,c.cn)(n(),t),...l})});i.displayName=r.b.displayName}},e=>{e.O(0,[666,530,535,143,148,509,176,441,255,358],()=>e(e.s=35842)),_N_E=e.O()}]);