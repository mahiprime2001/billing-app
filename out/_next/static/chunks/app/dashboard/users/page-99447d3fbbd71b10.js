(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9242],{13314:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>A});var t=a(95155),r=a(12115),l=a(20063),i=a(10832),n=a(97003),d=a(33789),o=a(90235),c=a(83209),m=a(67812),x=a(54679),u=a(47507),h=a(20120),p=a(84916),f=a(17910),g=a(20508),j=a(26983),N=a(6191),y=a(70532),v=a(57828),b=a(91169),w=a(86651),S=a(11010),C=a(71360);function A(){let e=(0,l.useRouter)(),[s,a]=(0,r.useState)([]),[A,E]=(0,r.useState)([]),[R,D]=(0,r.useState)(null),[F,U]=(0,r.useState)(""),[k,T]=(0,r.useState)("all"),[O,_]=(0,r.useState)("all"),[J,L]=(0,r.useState)(!1),[z,Z]=(0,r.useState)(!1),[P,$]=(0,r.useState)(null),[q,V]=(0,r.useState)(!1),[I,B]=(0,r.useState)({name:"",email:"",password:"",role:"billing_user",assignedStores:[],sessionDuration:24,status:"active"});(0,r.useEffect)(()=>{let s=localStorage.getItem("adminLoggedIn"),a=localStorage.getItem("adminUser");if("true"!==s||!a)return void e.push("/");D(JSON.parse(a)),M(),W()},[e]);let M=async()=>{try{console.log("[FRONTEND] loadUsers - Fetching users...");let e=await fetch("http://127.0.0.1:8080/api/users");if(e.ok){let s=await e.json();console.log("[FRONTEND] loadUsers - Received data:",s),console.log("[FRONTEND] loadUsers - Number of users:",s.length),s.forEach((e,s)=>{console.log("[FRONTEND] User ".concat(s+1," (").concat(e.name,"):"),{id:e.id,email:e.email,role:e.role,assignedStores:e.assignedStores,assignedStoresType:typeof e.assignedStores,assignedStoresIsArray:Array.isArray(e.assignedStores)})}),a(s)}else console.error("[FRONTEND] Failed to fetch users - Status:",e.status)}catch(e){console.error("[FRONTEND] Error fetching users:",e)}},W=async()=>{try{let e=await fetch("http://127.0.0.1:8080/api/stores");if(e.ok){let s=await e.json();E(s)}else console.error("Failed to fetch stores")}catch(e){console.error("Error fetching stores:",e)}},G=()=>{B({name:"",email:"",password:"",role:"billing_user",assignedStores:[],sessionDuration:24,status:"active"})},Y=()=>{let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%&*();'./,?<>",s="";for(let a=0;a<8;a++)s+=e.charAt(Math.floor(Math.random()*e.length));B({...I,password:s})},H=async()=>{if(!I.name||!I.email||!I.password)return void alert("Please fill in all required fields");if("billing_user"===I.role&&0===I.assignedStores.length)return void alert("Please assign at least one store for billing users");try{let e={name:I.name,email:I.email,password:I.password,role:I.role,status:I.status};"billing_user"===I.role&&(e.assignedStores=I.assignedStores),"temporary_user"===I.role&&(e.sessionDuration=I.sessionDuration),console.log("[FRONTEND] handleAddUser - formData:",I),console.log("[FRONTEND] handleAddUser - formData.assignedStores:",I.assignedStores),console.log("[FRONTEND] handleAddUser - payload being sent:",JSON.stringify(e,null,2));let s=await fetch("http://127.0.0.1:8080/api/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(console.log("[FRONTEND] Response status:",s.status),s.ok){let e=await s.json();console.log("[FRONTEND] Response data:",e),M(),G(),L(!1)}else{let e=await s.json();console.error("[FRONTEND] Error response:",e),alert(e.message||"Failed to add user")}}catch(e){console.error("[FRONTEND] Error adding user:",e),alert("An error occurred while adding the user")}},K=async()=>{if(!P||!I.name||!I.email)return void alert("Please fill in all required fields (Name, Email)");if("billing_user"===I.role&&0===I.assignedStores.length)return void alert("Please assign at least one store for billing users");let e={name:I.name,email:I.email,role:I.role,status:I.status};I.password&&(e.password=I.password),"billing_user"===I.role&&(e.assignedStores=I.assignedStores),"temporary_user"===I.role&&(e.sessionDuration=I.sessionDuration),console.log("[FRONTEND] handleEditUser - formData:",I),console.log("[FRONTEND] handleEditUser - formData.assignedStores:",I.assignedStores),console.log("[FRONTEND] handleEditUser - payload being sent:",JSON.stringify(e,null,2));try{let s=await fetch("http://127.0.0.1:8080"+"/api/users/".concat(P.id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(console.log("[FRONTEND] Response status:",s.status),s.ok){let e=await s.json();console.log("[FRONTEND] Response data:",e),M(),G(),$(null),Z(!1)}else{let e=await s.json();console.error("[FRONTEND] Error response:",e),alert(e.message||"Failed to update user")}}catch(e){console.error("[FRONTEND] Error updating user:",e),alert("An error occurred while updating the user")}},Q=async e=>{var a;if((null==R?void 0:R.email)===(null==(a=s.find(s=>s.id===e))?void 0:a.email))return void alert("You cannot delete your own account");try{let s=await fetch("http://127.0.0.1:8080"+"/api/users/".concat(e),{method:"DELETE"});if(s.ok)M();else{let e=await s.json();alert(e.message||"Failed to delete user")}}catch(e){console.error("Error deleting user:",e),alert("An error occurred while deleting the user")}},X=e=>{B(s=>({...s,assignedStores:s.assignedStores.includes(e)?s.assignedStores.filter(s=>s!==e):[...s.assignedStores,e]}))},ee=s.filter(e=>{let s=e.name.toLowerCase().includes(F.toLowerCase())||e.email.toLowerCase().includes(F.toLowerCase()),a="all"===k||e.role===k,t="all"===O||e.status===O;return s&&a&&t});return(0,t.jsx)(i.default,{children:(0,t.jsxs)("div",{className:"space-y-8",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"User Management"}),(0,t.jsx)("p",{className:"text-gray-600 mt-2",children:"Manage admin users and their permissions"})]}),(0,t.jsxs)(x.lG,{open:J,onOpenChange:L,children:[(0,t.jsx)(x.zM,{asChild:!0,children:(0,t.jsxs)(n.$,{className:"bg-blue-600 hover:bg-blue-700",children:[(0,t.jsx)(N.A,{className:"h-4 w-4 mr-2"}),"Add User"]})}),(0,t.jsxs)(x.Cf,{className:"sm:max-w-[600px] max-h-[90vh] overflow-y-auto",children:[(0,t.jsxs)(x.c7,{children:[(0,t.jsx)(x.L3,{children:"Add New User"}),(0,t.jsx)(x.rr,{children:"Create a new admin user account"})]}),(0,t.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(o.J,{htmlFor:"name",children:"Full Name *"}),(0,t.jsx)(d.p,{id:"name",value:I.name,onChange:e=>B({...I,name:e.target.value}),placeholder:"Enter full name"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(o.J,{htmlFor:"email",children:"Email *"}),(0,t.jsx)(d.p,{id:"email",type:"email",value:I.email,onChange:e=>B({...I,email:e.target.value}),placeholder:"Enter email address"})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(o.J,{htmlFor:"password",children:"Password *"}),(0,t.jsxs)("div",{className:"flex space-x-2",children:[(0,t.jsxs)("div",{className:"relative flex-1",children:[(0,t.jsx)(d.p,{id:"password",type:q?"text":"password",value:I.password,onChange:e=>B({...I,password:e.target.value}),placeholder:"Enter password"}),(0,t.jsx)(n.$,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>V(!q),children:q?(0,t.jsx)(y.A,{className:"h-4 w-4 text-gray-400"}):(0,t.jsx)(v.A,{className:"h-4 w-4 text-gray-400"})})]}),(0,t.jsx)(n.$,{type:"button",variant:"outline",onClick:Y,children:"Generate"})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(o.J,{htmlFor:"role",children:"Role *"}),(0,t.jsxs)(u.l6,{value:I.role,onValueChange:e=>B({...I,role:e}),children:[(0,t.jsx)(u.bq,{children:(0,t.jsx)(u.yv,{})}),(0,t.jsxs)(u.gC,{children:[(0,t.jsx)(u.eb,{value:"super_admin",children:"Super Admin"}),(0,t.jsx)(u.eb,{value:"billing_user",children:"Billing User"}),(0,t.jsx)(u.eb,{value:"temporary_user",children:"Temporary User"})]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(o.J,{htmlFor:"status",children:"Status *"}),(0,t.jsxs)(u.l6,{value:I.status,onValueChange:e=>B({...I,status:e}),children:[(0,t.jsx)(u.bq,{children:(0,t.jsx)(u.yv,{})}),(0,t.jsxs)(u.gC,{children:[(0,t.jsx)(u.eb,{value:"active",children:"Active"}),(0,t.jsx)(u.eb,{value:"inactive",children:"Inactive"})]})]})]})]}),"billing_user"===I.role&&(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(o.J,{children:"Assigned Stores *"}),(0,t.jsx)("div",{className:"border rounded-lg p-3 max-h-32 overflow-y-auto",children:A.filter(e=>"active"===e.status).map(e=>(0,t.jsxs)("div",{className:"flex items-center space-x-2 py-1",children:[(0,t.jsx)(p.S,{id:"store-".concat(e.id),checked:I.assignedStores.includes(e.id),onCheckedChange:()=>X(e.id)}),(0,t.jsx)(o.J,{htmlFor:"store-".concat(e.id),className:"text-sm",children:e.name})]},e.id))})]}),"temporary_user"===I.role&&(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(o.J,{htmlFor:"sessionDuration",children:"Session Duration (hours)"}),(0,t.jsx)(d.p,{id:"sessionDuration",type:"number",min:"1",max:"168",value:I.sessionDuration,onChange:e=>B({...I,sessionDuration:Number(e.target.value)||24}),placeholder:"24"}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"How long the temporary user session should last (1-168 hours)"})]})]}),(0,t.jsxs)(x.Es,{children:[(0,t.jsx)(n.$,{variant:"outline",onClick:()=>{L(!1),G()},children:"Cancel"}),(0,t.jsx)(n.$,{onClick:H,children:"Add User"})]})]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,t.jsx)(c.Zp,{children:(0,t.jsx)(c.Wu,{className:"p-6",children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(b.A,{className:"h-8 w-8 text-blue-600"}),(0,t.jsxs)("div",{className:"ml-4",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Users"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:s.length})]})]})})}),(0,t.jsx)(c.Zp,{children:(0,t.jsx)(c.Wu,{className:"p-6",children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(f.A,{className:"h-8 w-8 text-blue-600"}),(0,t.jsxs)("div",{className:"ml-4",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Super Admins"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:s.filter(e=>"super_admin"===e.role).length})]})]})})}),(0,t.jsx)(c.Zp,{children:(0,t.jsx)(c.Wu,{className:"p-6",children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(g.A,{className:"h-8 w-8 text-green-600"}),(0,t.jsxs)("div",{className:"ml-4",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Billing Users"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:s.filter(e=>"billing_user"===e.role).length})]})]})})}),(0,t.jsx)(c.Zp,{children:(0,t.jsx)(c.Wu,{className:"p-6",children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(j.A,{className:"h-8 w-8 text-orange-600"}),(0,t.jsxs)("div",{className:"ml-4",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Temporary Users"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:s.filter(e=>"temporary_user"===e.role).length})]})]})})})]}),(0,t.jsxs)(c.Zp,{children:[(0,t.jsx)(c.aR,{children:(0,t.jsx)(c.ZB,{children:"User Accounts"})}),(0,t.jsxs)(c.Wu,{children:[(0,t.jsxs)("div",{className:"flex flex-col md:flex-row gap-4 mb-6",children:[(0,t.jsx)("div",{className:"flex-1",children:(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(w.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),(0,t.jsx)(d.p,{placeholder:"Search users...",value:F,onChange:e=>U(e.target.value),className:"pl-10"})]})}),(0,t.jsxs)(u.l6,{value:k,onValueChange:T,children:[(0,t.jsx)(u.bq,{className:"w-full md:w-48",children:(0,t.jsx)(u.yv,{placeholder:"Filter by role"})}),(0,t.jsxs)(u.gC,{children:[(0,t.jsx)(u.eb,{value:"all",children:"All Roles"}),(0,t.jsx)(u.eb,{value:"super_admin",children:"Super Admin"}),(0,t.jsx)(u.eb,{value:"billing_user",children:"Billing User"}),(0,t.jsx)(u.eb,{value:"temporary_user",children:"Temporary User"})]})]}),(0,t.jsxs)(u.l6,{value:O,onValueChange:_,children:[(0,t.jsx)(u.bq,{className:"w-full md:w-48",children:(0,t.jsx)(u.yv,{placeholder:"Filter by status"})}),(0,t.jsxs)(u.gC,{children:[(0,t.jsx)(u.eb,{value:"all",children:"All Status"}),(0,t.jsx)(u.eb,{value:"active",children:"Active"}),(0,t.jsx)(u.eb,{value:"inactive",children:"Inactive"})]})]})]}),(0,t.jsxs)("div",{className:"overflow-x-auto",children:[(0,t.jsxs)("table",{className:"w-full",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{className:"border-b",children:[(0,t.jsx)("th",{className:"text-left p-4 font-medium",children:"User"}),(0,t.jsx)("th",{className:"text-left p-4 font-medium",children:"Role"}),(0,t.jsx)("th",{className:"text-left p-4 font-medium",children:"Status"}),(0,t.jsx)("th",{className:"text-left p-4 font-medium",children:"Assigned Stores"}),(0,t.jsx)("th",{className:"text-left p-4 font-medium",children:"Session Duration"}),(0,t.jsx)("th",{className:"text-left p-4 font-medium",children:"Created"}),(0,t.jsx)("th",{className:"text-left p-4 font-medium",children:"Actions"})]})}),(0,t.jsx)("tbody",{children:ee.map(e=>{let s=(e=>{switch(e){case"super_admin":return{label:"Super Admin",variant:"default",icon:f.A,color:"text-blue-600"};case"billing_user":return{label:"Billing User",variant:"secondary",icon:g.A,color:"text-green-600"};case"temporary_user":return{label:"Temporary User",variant:"outline",icon:j.A,color:"text-orange-600"};default:return{label:"Unknown Role",variant:"destructive",icon:g.A,color:"text-gray-500"}}})(e.role),a="active"===e.status?{label:"Active",variant:"default"}:{label:"Inactive",variant:"secondary"},r=s.icon;return(0,t.jsxs)("tr",{className:"border-b hover:bg-gray-50",children:[(0,t.jsx)("td",{className:"p-4",children:(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-medium",children:e.name}),(0,t.jsx)("div",{className:"text-sm text-gray-500",children:e.email})]})}),(0,t.jsx)("td",{className:"p-4",children:(0,t.jsxs)(m.E,{variant:s.variant,className:"flex items-center w-fit",children:[(0,t.jsx)(r,{className:"h-3 w-3 mr-1 ".concat(s.color)}),s.label]})}),(0,t.jsx)("td",{className:"p-4",children:(0,t.jsx)(m.E,{variant:a.variant,children:a.label})}),(0,t.jsx)("td",{className:"p-4",children:e.assignedStores&&e.assignedStores.length>0?(0,t.jsxs)("div",{className:"space-y-1",children:[e.assignedStores.map(e=>{let s=A.find(s=>s.id===e);return s?(0,t.jsx)("div",{className:"text-xs bg-gray-100 px-2 py-1 rounded",children:s.name},e):null}),e.assignedStores.length>2&&(0,t.jsxs)("span",{className:"text-xs text-gray-500",children:["+",e.assignedStores.length-2," more"]})]}):(0,t.jsx)("span",{className:"text-gray-400",children:"-"})}),(0,t.jsx)("td",{className:"p-4",children:e.sessionDuration?(0,t.jsxs)("span",{className:"text-sm",children:[e.sessionDuration,"h"]}):(0,t.jsx)("span",{className:"text-gray-400",children:"-"})}),(0,t.jsx)("td",{className:"p-4",children:(0,t.jsx)("span",{className:"text-sm text-gray-500",children:new Date(e.createdat).toLocaleDateString()})}),(0,t.jsx)("td",{className:"p-4",children:(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(n.$,{variant:"outline",size:"sm",onClick:()=>{$(e),Z(!0),V(!1),console.log("--- Opening Edit Dialog ---"),console.log("User being edited:",{id:e.id,name:e.name,email:e.email,role:e.role,assignedStores:e.assignedStores,status:e.status,password:e.password}),console.log("All available stores for context:",A.map(e=>({id:e.id,name:e.name,status:e.status}))),B(s=>{let a=[];if(e.assignedStores){if(Array.isArray(e.assignedStores))a=e.assignedStores;else if("string"==typeof e.assignedStores){let s=e.assignedStores;a=s.includes(",")?s.split(",").map(e=>e.trim()):[s]}}let t={...s,name:e.name,email:e.email,password:e.password||"",role:e.role,assignedStores:a,sessionDuration:e.sessionDuration||24,status:e.status};return console.log("FormData after setting:",t),console.log("AssignedStores type:",typeof t.assignedStores,"Is array:",Array.isArray(t.assignedStores)),console.log("AssignedStores value:",t.assignedStores),t})},children:(0,t.jsx)(S.A,{className:"h-3 w-3"})}),(null==R?void 0:R.email)!==e.email&&(0,t.jsxs)(h.Lt,{children:[(0,t.jsx)(h.tv,{asChild:!0,children:(0,t.jsx)(n.$,{variant:"outline",size:"sm",className:"text-red-600 hover:text-red-700 bg-transparent",children:(0,t.jsx)(C.A,{className:"h-3 w-3"})})}),(0,t.jsxs)(h.EO,{children:[(0,t.jsxs)(h.wd,{children:[(0,t.jsx)(h.r7,{children:"Delete User"}),(0,t.jsxs)(h.$v,{children:['Are you sure you want to delete "',e.name,'"? This action cannot be undone.']})]}),(0,t.jsxs)(h.ck,{children:[(0,t.jsx)(h.Zr,{children:"Cancel"}),(0,t.jsx)(h.Rx,{onClick:()=>Q(e.id),className:"bg-red-600 hover:bg-red-700",children:"Delete"})]})]})]})]})})]},e.id)})})]}),0===ee.length&&(0,t.jsxs)("div",{className:"text-center py-12",children:[(0,t.jsx)(b.A,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),(0,t.jsx)("h3",{className:"text-xl font-medium text-gray-900 mb-2",children:"No users found"}),(0,t.jsx)("p",{className:"text-gray-500 mb-4",children:F||"all"!==k||"all"!==O?"Try adjusting your search or filters":"Get started by adding your first user"})]})]})]})]}),(0,t.jsx)(x.lG,{open:z,onOpenChange:Z,children:(0,t.jsxs)(x.Cf,{className:"sm:max-w-[600px] max-h-[90vh] overflow-y-auto",children:[(0,t.jsxs)(x.c7,{children:[(0,t.jsx)(x.L3,{children:"Edit User"}),(0,t.jsx)(x.rr,{children:"Update user information and permissions"})]}),(0,t.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(o.J,{htmlFor:"edit-name",children:"Full Name *"}),(0,t.jsx)(d.p,{id:"edit-name",value:I.name,onChange:e=>B({...I,name:e.target.value}),placeholder:"Enter full name"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(o.J,{htmlFor:"edit-email",children:"Email *"}),(0,t.jsx)(d.p,{id:"edit-email",type:"email",value:I.email,onChange:e=>B({...I,email:e.target.value}),placeholder:"Enter email address"})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(o.J,{htmlFor:"edit-password",children:"Password *"}),(0,t.jsxs)("div",{className:"flex space-x-2",children:[(0,t.jsxs)("div",{className:"relative flex-1",children:[(0,t.jsx)(d.p,{id:"edit-password",type:q?"text":"password",value:I.password,onChange:e=>B({...I,password:e.target.value}),placeholder:"Leave blank to keep existing password, or enter new password"}),(0,t.jsx)(n.$,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>V(!q),children:q?(0,t.jsx)(y.A,{className:"h-4 w-4 text-gray-400"}):(0,t.jsx)(v.A,{className:"h-4 w-4 text-gray-400"})})]}),(0,t.jsx)(n.$,{type:"button",variant:"outline",onClick:Y,children:"Generate"})]}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"Leave the password field blank to keep the current password. Enter a new password to change it."})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(o.J,{htmlFor:"edit-role",children:"Role *"}),(0,t.jsxs)(u.l6,{value:I.role,onValueChange:e=>B({...I,role:e}),children:[(0,t.jsx)(u.bq,{children:(0,t.jsx)(u.yv,{})}),(0,t.jsxs)(u.gC,{children:[(0,t.jsx)(u.eb,{value:"super_admin",children:"Super Admin"}),(0,t.jsx)(u.eb,{value:"billing_user",children:"Billing User"}),(0,t.jsx)(u.eb,{value:"temporary_user",children:"Temporary User"})]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(o.J,{htmlFor:"edit-status",children:"Status *"}),(0,t.jsxs)(u.l6,{value:I.status,onValueChange:e=>B({...I,status:e}),children:[(0,t.jsx)(u.bq,{children:(0,t.jsx)(u.yv,{})}),(0,t.jsxs)(u.gC,{children:[(0,t.jsx)(u.eb,{value:"active",children:"Active"}),(0,t.jsx)(u.eb,{value:"inactive",children:"Inactive"})]})]})]})]}),"billing_user"===I.role&&(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(o.J,{children:"Assigned Stores *"}),(0,t.jsx)("div",{className:"border rounded-lg p-3 max-h-32 overflow-y-auto",children:A.filter(e=>"active"===e.status).map(e=>(0,t.jsxs)("div",{className:"flex items-center space-x-2 py-1",children:[(0,t.jsx)(p.S,{id:"edit-store-".concat(e.id),checked:I.assignedStores.includes(e.id),onCheckedChange:()=>X(e.id)}),(0,t.jsx)(o.J,{htmlFor:"edit-store-".concat(e.id),className:"text-sm",children:e.name})]},e.id))})]}),"temporary_user"===I.role&&(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(o.J,{htmlFor:"edit-sessionDuration",children:"Session Duration (hours)"}),(0,t.jsx)(d.p,{id:"edit-sessionDuration",type:"number",min:"1",max:"168",value:I.sessionDuration,onChange:e=>B({...I,sessionDuration:Number(e.target.value)||24}),placeholder:"24"}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"How long the temporary user session should last (1-168 hours)"})]})]}),(0,t.jsxs)(x.Es,{children:[(0,t.jsx)(n.$,{variant:"outline",onClick:()=>{Z(!1),G(),$(null)},children:"Cancel"}),(0,t.jsx)(n.$,{onClick:K,children:"Update User"})]})]})})]})})}},20120:(e,s,a)=>{"use strict";a.d(s,{$v:()=>f,EO:()=>x,Lt:()=>d,Rx:()=>g,Zr:()=>j,ck:()=>h,r7:()=>p,tv:()=>o,wd:()=>u});var t=a(95155),r=a(12115),l=a(52498),i=a(25016),n=a(97003);let d=l.bL,o=l.l9,c=l.ZL,m=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(l.hJ,{className:(0,i.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...r,ref:s})});m.displayName=l.hJ.displayName;let x=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsxs)(c,{children:[(0,t.jsx)(m,{}),(0,t.jsx)(l.UC,{ref:s,className:(0,i.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...r})]})});x.displayName=l.UC.displayName;let u=e=>{let{className:s,...a}=e;return(0,t.jsx)("div",{className:(0,i.cn)("flex flex-col space-y-2 text-center sm:text-left",s),...a})};u.displayName="AlertDialogHeader";let h=e=>{let{className:s,...a}=e;return(0,t.jsx)("div",{className:(0,i.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...a})};h.displayName="AlertDialogFooter";let p=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(l.hE,{ref:s,className:(0,i.cn)("text-lg font-semibold",a),...r})});p.displayName=l.hE.displayName;let f=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(l.VY,{ref:s,className:(0,i.cn)("text-sm text-muted-foreground",a),...r})});f.displayName=l.VY.displayName;let g=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(l.rc,{ref:s,className:(0,i.cn)((0,n.r)(),a),...r})});g.displayName=l.rc.displayName;let j=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(l.ZD,{ref:s,className:(0,i.cn)((0,n.r)({variant:"outline"}),"mt-2 sm:mt-0",a),...r})});j.displayName=l.ZD.displayName},34963:(e,s,a)=>{Promise.resolve().then(a.bind(a,13314))},47507:(e,s,a)=>{"use strict";a.d(s,{bq:()=>x,eb:()=>f,gC:()=>p,l6:()=>c,yv:()=>m});var t=a(95155),r=a(12115),l=a(4729),i=a(24033),n=a(12108),d=a(5917),o=a(25016);let c=l.bL;l.YJ;let m=l.WT,x=r.forwardRef((e,s)=>{let{className:a,children:r,...n}=e;return(0,t.jsxs)(l.l9,{ref:s,className:(0,o.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a),...n,children:[r,(0,t.jsx)(l.In,{asChild:!0,children:(0,t.jsx)(i.A,{className:"h-4 w-4 opacity-50"})})]})});x.displayName=l.l9.displayName;let u=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(l.PP,{ref:s,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",a),...r,children:(0,t.jsx)(n.A,{className:"h-4 w-4"})})});u.displayName=l.PP.displayName;let h=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(l.wn,{ref:s,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",a),...r,children:(0,t.jsx)(i.A,{className:"h-4 w-4"})})});h.displayName=l.wn.displayName;let p=r.forwardRef((e,s)=>{let{className:a,children:r,position:i="popper",...n}=e;return(0,t.jsx)(l.ZL,{children:(0,t.jsxs)(l.UC,{ref:s,className:(0,o.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===i&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:i,...n,children:[(0,t.jsx)(u,{}),(0,t.jsx)(l.LM,{className:(0,o.cn)("p-1","popper"===i&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r}),(0,t.jsx)(h,{})]})})});p.displayName=l.UC.displayName,r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(l.JU,{ref:s,className:(0,o.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",a),...r})}).displayName=l.JU.displayName;let f=r.forwardRef((e,s)=>{let{className:a,children:r,...i}=e;return(0,t.jsxs)(l.q7,{ref:s,className:(0,o.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...i,children:[(0,t.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,t.jsx)(l.VF,{children:(0,t.jsx)(d.A,{className:"h-4 w-4"})})}),(0,t.jsx)(l.p4,{children:r})]})});f.displayName=l.q7.displayName,r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(l.wv,{ref:s,className:(0,o.cn)("-mx-1 my-1 h-px bg-muted",a),...r})}).displayName=l.wv.displayName},54679:(e,s,a)=>{"use strict";a.d(s,{Cf:()=>x,Es:()=>h,L3:()=>p,c7:()=>u,lG:()=>d,rr:()=>f,zM:()=>o});var t=a(95155),r=a(12115),l=a(93409),i=a(65229),n=a(25016);let d=l.bL,o=l.l9,c=l.ZL;l.bm;let m=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(l.hJ,{ref:s,className:(0,n.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...r})});m.displayName=l.hJ.displayName;let x=r.forwardRef((e,s)=>{let{className:a,children:r,...d}=e;return(0,t.jsxs)(c,{children:[(0,t.jsx)(m,{}),(0,t.jsxs)(l.UC,{ref:s,className:(0,n.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...d,children:[r,(0,t.jsxs)(l.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,t.jsx)(i.A,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});x.displayName=l.UC.displayName;let u=e=>{let{className:s,...a}=e;return(0,t.jsx)("div",{className:(0,n.cn)("flex flex-col space-y-1.5 text-center sm:text-left",s),...a})};u.displayName="DialogHeader";let h=e=>{let{className:s,...a}=e;return(0,t.jsx)("div",{className:(0,n.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...a})};h.displayName="DialogFooter";let p=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(l.hE,{ref:s,className:(0,n.cn)("text-lg font-semibold leading-none tracking-tight",a),...r})});p.displayName=l.hE.displayName;let f=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(l.VY,{ref:s,className:(0,n.cn)("text-sm text-muted-foreground",a),...r})});f.displayName=l.VY.displayName},83209:(e,s,a)=>{"use strict";a.d(s,{BT:()=>o,Wu:()=>c,ZB:()=>d,Zp:()=>i,aR:()=>n});var t=a(95155),r=a(12115),l=a(25016);let i=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("div",{ref:s,className:(0,l.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...r})});i.displayName="Card";let n=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("div",{ref:s,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",a),...r})});n.displayName="CardHeader";let d=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("div",{ref:s,className:(0,l.cn)("text-2xl font-semibold leading-none tracking-tight",a),...r})});d.displayName="CardTitle";let o=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("div",{ref:s,className:(0,l.cn)("text-sm text-muted-foreground",a),...r})});o.displayName="CardDescription";let c=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("div",{ref:s,className:(0,l.cn)("p-6 pt-0",a),...r})});c.displayName="CardContent",r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("div",{ref:s,className:(0,l.cn)("flex items-center p-6 pt-0",a),...r})}).displayName="CardFooter"},84916:(e,s,a)=>{"use strict";a.d(s,{S:()=>d});var t=a(95155),r=a(12115),l=a(38162),i=a(5917),n=a(25016);let d=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(l.bL,{ref:s,className:(0,n.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",a),...r,children:(0,t.jsx)(l.C1,{className:(0,n.cn)("flex items-center justify-center text-current"),children:(0,t.jsx)(i.A,{className:"h-4 w-4"})})})});d.displayName=l.bL.displayName},90235:(e,s,a)=>{"use strict";a.d(s,{J:()=>o});var t=a(95155),r=a(12115),l=a(32894),i=a(83101),n=a(25016);let d=(0,i.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),o=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(l.b,{ref:s,className:(0,n.cn)(d(),a),...r})});o.displayName=l.b.displayName}},e=>{e.O(0,[9206,6445,5239,5584,9648,5907,832,8441,1255,7358],()=>e(e.s=34963)),_N_E=e.O()}]);