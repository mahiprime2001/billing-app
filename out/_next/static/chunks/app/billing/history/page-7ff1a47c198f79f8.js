(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[881],{309:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(71847).A)("Printer",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]])},21786:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(71847).A)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]])},52056:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(71847).A)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},57828:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(71847).A)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},68267:(e,s,t)=>{"use strict";t.d(s,{lA:()=>n,yw:()=>a}),"function"==typeof SuppressedError&&SuppressedError;function a(e,s=!1){return window.__TAURI_INTERNALS__.transformCallback(e,s)}async function n(e,s={},t){return window.__TAURI_INTERNALS__.invoke(e,s,t)}new WeakMap,new WeakMap,new WeakMap,new WeakMap,new WeakMap},71360:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(71847).A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},80501:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(71847).A)("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]])},81577:(e,s,t)=>{"use strict";t.d(s,{S:()=>f});var a=t(95155),n=t(71163),l=t(16485),i=t(25016),r=t(97003),c=t(12115),d=t(90368),o=t(27937),m=t(31531);function x(e){let{className:s,classNames:t,showOutsideDays:n=!0,...l}=e;return(0,a.jsx)(m.h,{showOutsideDays:n,className:(0,i.cn)("p-3",s),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:(0,i.cn)((0,r.r)({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:(0,i.cn)((0,r.r)({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground aria-selected:bg-accent/50 aria-selected:text-muted-foreground",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...t},components:{IconLeft:e=>(0,a.jsx)(d.A,{className:"h-4 w-4",...e}),IconRight:e=>(0,a.jsx)(o.A,{className:"h-4 w-4",...e})},...l})}x.displayName="Calendar";var h=t(82286);let p=h.bL,u=h.l9,j=c.forwardRef((e,s)=>{let{className:t,align:n="center",sideOffset:l=4,...r}=e;return(0,a.jsx)(h.ZL,{children:(0,a.jsx)(h.UC,{ref:s,align:n,sideOffset:l,className:(0,i.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...r})})});function f(e){let{className:s,date:t,setDate:c}=e;return(0,a.jsx)("div",{className:(0,i.cn)("grid gap-2",s),children:(0,a.jsxs)(p,{children:[(0,a.jsx)(u,{asChild:!0,children:(0,a.jsxs)(r.$,{id:"date",variant:"outline",className:(0,i.cn)("w-[300px] justify-start text-left font-normal",!t&&"text-muted-foreground"),children:[(0,a.jsx)(l.A,{className:"mr-2 h-4 w-4"}),(null==t?void 0:t.from)?t.to?(0,a.jsxs)(a.Fragment,{children:[(0,n.GP)(t.from,"LLL dd, y")," - ",(0,n.GP)(t.to,"LLL dd, y")]}):(0,n.GP)(t.from,"LLL dd, y"):(0,a.jsx)("span",{children:"Pick a date range"})]})}),(0,a.jsx)(j,{className:"w-auto p-0",align:"start",children:(0,a.jsx)(x,{initialFocus:!0,mode:"range",defaultMonth:null==t?void 0:t.from,selected:t,onSelect:c,numberOfMonths:2})})]})})}j.displayName=h.UC.displayName},86651:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(71847).A)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},88161:(e,s,t)=>{Promise.resolve().then(t.bind(t,88942))},88942:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>_});var a=t(95155),n=t(12115),l=t(20063),i=t(27702),r=t(97003),c=t(33789),d=t(90235),o=t(83209),m=t(67812),x=t(54679),h=t(47507),p=t(54664),u=t(81577),j=t(96633),f=t(54485),y=t(91761),N=t(53409);let g=(0,t(71847).A)("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);var v=t(1524),b=t(63581),w=t(86651),A=t(39867),k=t(21786),C=t(89715),S=t(57828),T=t(309),M=t(71360),P=t(71163),E=t(15571);function _(){let e=(0,l.useRouter)(),[s,t]=(0,n.useState)([]),[_,R]=(0,n.useState)([]),[D,F]=(0,n.useState)(null),[I,L]=(0,n.useState)(""),[Z,z]=(0,n.useState)("all"),[W,O]=(0,n.useState)(),[H,B]=(0,n.useState)(null),[$,q]=(0,n.useState)(!1),[G,J]=(0,n.useState)(!1),[U,V]=(0,n.useState)(!1),[X,Y]=(0,n.useState)(null),[K,Q]=(0,n.useState)(!1),[ee,es]=(0,n.useState)({gstin:"27AAFCV2449G1Z7",taxPercentage:18,companyName:"SIRI ART JEWELLERY",companyAddress:"123 Jewelry Street, Diamond District, Mumbai, Maharashtra 400001",companyPhone:"+91 98765 43210",companyEmail:"info@siriartjewellery.com"});(0,n.useEffect)(()=>{let s=localStorage.getItem("adminUser");if(!s)return void e.push("/");F(JSON.parse(s)),fetch("http://127.0.0.1:8080/api/settings").then(e=>e.json()).then(e=>{e.systemSettings&&es(e.systemSettings)}),et()},[e]),(0,n.useEffect)(()=>{ea()},[s,I,Z,W]);let et=async()=>{try{let e=await fetch("http://127.0.0.1:8080/api/bills");if(e.ok){let s=(await e.json()).sort((e,s)=>new Date(s.timestamp).getTime()-new Date(e.timestamp).getTime());t(s)}}catch(e){console.error("Failed to load sales:",e)}},ea=()=>{let e=[...s];I&&(e=e.filter(e=>{var s,t;return e.id.toLowerCase().includes(I.toLowerCase())||(null==(s=e.customerName)?void 0:s.toLowerCase().includes(I.toLowerCase()))||(null==(t=e.customerPhone)?void 0:t.includes(I))||e.items.some(e=>e.productName.toLowerCase().includes(I.toLowerCase()))})),"all"!==Z&&(e=e.filter(e=>e.paymentMethod===Z)),(null==W?void 0:W.from)&&(e=e.filter(e=>{let s=new Date(e.timestamp),t=new Date(W.from),a=W.to?new Date(W.to):new Date;return t.setHours(0,0,0,0),a.setHours(23,59,59,999),s>=t&&s<=a})),R(e)},en=async()=>{if(!X)return void console.error("No file selected for import.");Q(!0);try{let e=await X.text(),s=JSON.parse(e),t=!0;for(let e of s){let s=await fetch("http://127.0.0.1:8080/api/bills",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});s.ok||(t=!1,console.error("Failed to import bill ".concat(e.id,":"),s.statusText))}t?(console.log("Bills imported successfully!"),et(),V(!1),Y(null)):console.error("Some bills failed to import.")}catch(e){console.error("Error importing bills:",e)}finally{Q(!1)}},el=async()=>{if(H)try{(await fetch("http://127.0.0.1:8080"+"/api/bills/".concat(H.id),{method:"DELETE"})).ok?(et(),J(!1),B(null)):console.error("Failed to delete sale")}catch(e){console.error("Error deleting sale:",e)}},ei=async e=>{let s="\n      <!DOCTYPE html>\n      <html>\n        <head>\n          <title>Receipt - ".concat(e.id,'</title>\n          <style>\n            body { font-family: monospace; max-width: 300px; margin: 0 auto; padding: 20px; }\n            .header { text-align: center; margin-bottom: 20px; }\n            .company-name { font-weight: bold; font-size: 16px; }\n            .store-info { font-size: 12px; margin-top: 5px; }\n            .receipt-id { margin: 10px 0; font-size: 12px; }\n            .customer-info { margin: 10px 0; font-size: 12px; border-top: 1px dashed #000; padding-top: 10px; }\n            .items { margin: 20px 0; }\n            .item { display: flex; justify-content: space-between; margin: 5px 0; font-size: 12px; }\n            .totals { border-top: 1px dashed #000; padding-top: 10px; margin-top: 10px; }\n            .total-line { display: flex; justify-content: space-between; margin: 3px 0; font-size: 12px; }\n            .final-total { font-weight: bold; border-top: 1px solid #000; padding-top: 5px; }\n            .footer { text-align: center; margin-top: 20px; font-size: 10px; }\n            .gstin { font-size: 10px; margin-top: 5px; }\n          </style>\n        </head>\n        <body>\n          <div class="header">\n            <div class="company-name">').concat(ee.companyName,'</div>\n            <div class="store-info">').concat(e.storeName,'</div>\n            <div class="store-info">').concat(e.storeAddress,'</div>\n            <div class="gstin">GSTIN: ').concat(ee.gstin,'</div>\n            <div class="receipt-id">Invoice: ').concat(e.id,'</div>\n            <div class="receipt-id">Date: ').concat(new Date(e.timestamp).toLocaleString(),'</div>\n            <div class="receipt-id">Reprint: ').concat(new Date().toLocaleString(),"</div>\n          </div>\n          \n          ").concat(e.customerName||e.customerPhone?'\n          <div class="customer-info">\n            <strong>Customer Details:</strong><br>\n            '.concat(e.customerName?"Name: ".concat(e.customerName,"<br>"):"","\n            ").concat(e.customerPhone?"Phone: ".concat(e.customerPhone,"<br>"):"","\n            ").concat(e.customerEmail?"Email: ".concat(e.customerEmail,"<br>"):"","\n            ").concat(e.customerAddress?"Address: ".concat(e.customerAddress,"<br>"):"","\n          </div>\n          "):"",'\n          \n          <div class="items">\n            ').concat(e.items.map(e=>'\n              <div class="item">\n                <span>'.concat(e.productName," x").concat(e.quantity,"</span>\n                <span>₹").concat(e.total.toFixed(2),"</span>\n              </div>\n            ")).join(""),'\n          </div>\n          \n          <div class="totals">\n            <div class="total-line">\n              <span>Subtotal:</span>\n              <span>₹').concat(e.subtotal.toFixed(2),"</span>\n            </div>\n            ").concat(e.discountAmount>0?'\n            <div class="total-line">\n              <span>Discount ('.concat(e.discountPercentage.toFixed(1),"%):</span>\n              <span>-₹").concat(e.discountAmount.toFixed(2),"</span>\n            </div>\n            "):"",'\n            <div class="total-line">\n              <span>Tax (').concat(e.taxPercentage,"%):</span>\n              <span>₹").concat(e.taxAmount.toFixed(2),'</span>\n            </div>\n            <div class="total-line final-total">\n              <span>TOTAL:</span>\n              <span>₹').concat(e.total.toFixed(2),'</span>\n            </div>\n            <div class="total-line">\n              <span>Payment:</span>\n              <span>').concat(e.paymentMethod.toUpperCase(),"</span>\n            </div>\n          </div>\n          \n          ").concat(e.notes?'\n          <div class="customer-info">\n            <strong>Notes:</strong><br>\n            '.concat(e.notes,"\n          </div>\n          "):"",'\n          \n          <div class="footer">\n            <p>Thank you for your business!</p>\n            <p>Visit us again</p>\n            <p>').concat(ee.companyPhone,"</p>\n            <p>").concat(ee.companyEmail,"</p>\n          </div>\n        </body>\n      </html>\n    ");await (0,E.H)(s)},er=(()=>{let e=_.reduce((e,s)=>e+s.total,0),s=_.length,t=_.reduce((e,s)=>e+s.items.reduce((e,s)=>e+s.quantity,0),0);return{totalSales:e,totalTransactions:s,totalItems:t,uniqueCustomers:new Set(_.filter(e=>e.customerPhone).map(e=>e.customerPhone)).size,avgTransactionValue:s>0?e/s:0}})();return(0,a.jsx)(i.A,{children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)(o.Zp,{className:"bg-gradient-to-r from-purple-600 to-purple-700 text-white",children:(0,a.jsx)(o.Wu,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h1",{className:"text-2xl font-bold flex items-center",children:[(0,a.jsx)(f.A,{className:"h-6 w-6 mr-3"}),"Billing History"]}),(0,a.jsx)("p",{className:"text-purple-100 mt-1",children:"View and manage transaction history"})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("div",{className:"text-3xl font-bold",children:["₹",er.totalSales.toFixed(2)]}),(0,a.jsx)("div",{className:"text-purple-100",children:"Total Sales"}),(0,a.jsxs)("div",{className:"text-sm text-purple-200 mt-1",children:[er.totalTransactions," Transactions"]})]})]})})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,a.jsx)(o.Zp,{children:(0,a.jsx)(o.Wu,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Revenue"}),(0,a.jsxs)("p",{className:"text-2xl font-bold text-green-600",children:["₹",er.totalSales.toFixed(2)]})]}),(0,a.jsx)(y.A,{className:"h-8 w-8 text-green-600"})]})})}),(0,a.jsx)(o.Zp,{children:(0,a.jsx)(o.Wu,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Transactions"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-blue-600",children:er.totalTransactions})]}),(0,a.jsx)(N.A,{className:"h-8 w-8 text-blue-600"})]})})}),(0,a.jsx)(o.Zp,{children:(0,a.jsx)(o.Wu,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Items Sold"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-orange-600",children:er.totalItems})]}),(0,a.jsx)(g,{className:"h-8 w-8 text-orange-600"})]})})}),(0,a.jsx)(o.Zp,{children:(0,a.jsx)(o.Wu,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Avg. Transaction"}),(0,a.jsxs)("p",{className:"text-2xl font-bold text-purple-600",children:["₹",er.avgTransactionValue.toFixed(2)]})]}),(0,a.jsx)(v.A,{className:"h-8 w-8 text-purple-600"})]})})})]}),(0,a.jsxs)(o.Zp,{children:[(0,a.jsx)(o.aR,{children:(0,a.jsxs)(o.ZB,{className:"flex items-center",children:[(0,a.jsx)(b.A,{className:"h-5 w-5 mr-2"}),"Filters & Search"]})}),(0,a.jsx)(o.Wu,{children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(d.J,{htmlFor:"search",className:"text-sm font-medium",children:"Search"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(w.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,a.jsx)(c.p,{id:"search",placeholder:"Invoice ID, customer, product...",value:I,onChange:e=>L(e.target.value),className:"pl-10"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(d.J,{className:"text-sm font-medium",children:"Payment Method"}),(0,a.jsxs)(h.l6,{value:Z,onValueChange:z,children:[(0,a.jsx)(h.bq,{children:(0,a.jsx)(h.yv,{placeholder:"All methods"})}),(0,a.jsxs)(h.gC,{children:[(0,a.jsx)(h.eb,{value:"all",children:"All Methods"}),(0,a.jsx)(h.eb,{value:"cash",children:"Cash"}),(0,a.jsx)(h.eb,{value:"card",children:"Card"}),(0,a.jsx)(h.eb,{value:"upi",children:"UPI"})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(d.J,{className:"text-sm font-medium",children:"Date Range"}),(0,a.jsx)(u.S,{date:W,setDate:O})]}),(0,a.jsxs)("div",{className:"flex items-end space-x-2",children:[(0,a.jsxs)(r.$,{onClick:()=>{let e="data:application/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(_,null,2)),s="billing-history-".concat((0,P.GP)(new Date,"yyyy-MM-dd"),".json"),t=document.createElement("a");t.setAttribute("href",e),t.setAttribute("download",s),t.click()},variant:"outline",className:"w-full bg-transparent",children:[(0,a.jsx)(A.A,{className:"h-4 w-4 mr-2"}),"Export JSON"]}),(0,a.jsxs)(r.$,{onClick:()=>V(!0),className:"w-full",children:[(0,a.jsx)(k.A,{className:"h-4 w-4 mr-2"}),"Import JSON"]})]})]})})]}),(0,a.jsxs)(o.Zp,{children:[(0,a.jsx)(o.aR,{children:(0,a.jsxs)(o.ZB,{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(C.A,{className:"h-5 w-5 mr-2"}),"Transaction History (",_.length,")"]}),_.length>0&&(0,a.jsxs)(m.E,{variant:"secondary",children:[_.length," results"]})]})}),(0,a.jsx)(o.Wu,{children:(0,a.jsxs)("div",{className:"overflow-x-auto",children:[(0,a.jsxs)(j.XI,{children:[(0,a.jsx)(j.A0,{children:(0,a.jsxs)(j.Hj,{children:[(0,a.jsx)(j.nd,{children:"Invoice ID"}),(0,a.jsx)(j.nd,{children:"Date & Time"}),(0,a.jsx)(j.nd,{children:"Customer"}),(0,a.jsx)(j.nd,{children:"Items"}),(0,a.jsx)(j.nd,{children:"Payment"}),(0,a.jsx)(j.nd,{className:"text-right",children:"Total"}),(0,a.jsx)(j.nd,{className:"text-center",children:"Actions"})]})}),(0,a.jsx)(j.BF,{children:_.map(e=>(0,a.jsxs)(j.Hj,{className:"hover:bg-gray-50",children:[(0,a.jsx)(j.nA,{className:"font-medium",children:(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("span",{children:e.id}),e.storeName&&(0,a.jsx)("span",{className:"text-xs text-gray-500",children:e.storeName})]})}),(0,a.jsx)(j.nA,{children:(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("span",{children:(0,P.GP)(new Date(e.timestamp),"MMM dd, yyyy")}),(0,a.jsx)("span",{className:"text-xs text-gray-500",children:(0,P.GP)(new Date(e.timestamp),"hh:mm a")})]})}),(0,a.jsx)(j.nA,{children:(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("span",{children:e.customerName||"Walk-in"}),e.customerPhone&&(0,a.jsx)("span",{className:"text-xs text-gray-500",children:e.customerPhone})]})}),(0,a.jsx)(j.nA,{children:(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsxs)("span",{children:[e.items.length," items"]}),(0,a.jsxs)("span",{className:"text-xs text-gray-500",children:[e.items.reduce((e,s)=>e+s.quantity,0)," qty"]})]})}),(0,a.jsx)(j.nA,{children:(0,a.jsx)(m.E,{variant:"cash"===e.paymentMethod?"default":"card"===e.paymentMethod?"secondary":"outline",children:e.paymentMethod.toUpperCase()})}),(0,a.jsx)(j.nA,{className:"text-right font-medium",children:(0,a.jsxs)("div",{className:"flex flex-col items-end",children:[(0,a.jsxs)("span",{children:["₹",e.total.toFixed(2)]}),e.discountAmount>0&&(0,a.jsxs)("span",{className:"text-xs text-green-600",children:["-",e.discountPercentage.toFixed(1),"% off"]})]})}),(0,a.jsx)(j.nA,{children:(0,a.jsxs)("div",{className:"flex items-center justify-center space-x-1",children:[(0,a.jsx)(r.$,{variant:"ghost",size:"sm",onClick:()=>{B(e),q(!0)},title:"View Details",children:(0,a.jsx)(S.A,{className:"h-4 w-4"})}),(0,a.jsx)(r.$,{variant:"ghost",size:"sm",onClick:()=>ei(e),title:"Print Receipt",children:(0,a.jsx)(T.A,{className:"h-4 w-4"})}),(0,a.jsx)(r.$,{variant:"ghost",size:"sm",onClick:()=>{B(e),J(!0)},title:"Delete Bill",className:"text-red-500 hover:text-red-700",children:(0,a.jsx)(M.A,{className:"h-4 w-4"})})]})})]},e.id))})]}),0===_.length&&(0,a.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,a.jsx)(f.A,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),(0,a.jsx)("p",{children:"No transactions found"}),(0,a.jsx)("p",{className:"text-sm",children:"Try adjusting your filters"})]})]})})]}),(0,a.jsx)(x.lG,{open:G,onOpenChange:J,children:(0,a.jsxs)(x.Cf,{children:[(0,a.jsxs)(x.c7,{children:[(0,a.jsx)(x.L3,{children:"Are you sure?"}),(0,a.jsxs)(x.rr,{children:["This action cannot be undone. This will permanently delete the bill (",null==H?void 0:H.id,") from the system."]})]}),(0,a.jsxs)(x.Es,{children:[(0,a.jsx)(r.$,{variant:"outline",onClick:()=>J(!1),children:"Cancel"}),(0,a.jsx)(r.$,{variant:"destructive",onClick:el,children:"Delete"})]})]})}),(0,a.jsx)(x.lG,{open:$,onOpenChange:q,children:(0,a.jsxs)(x.Cf,{className:"sm:max-w-2xl max-h-[80vh] overflow-y-auto",children:[(0,a.jsxs)(x.c7,{children:[(0,a.jsxs)(x.L3,{className:"flex items-center",children:[(0,a.jsx)(N.A,{className:"h-5 w-5 mr-2"}),"Transaction Details"]}),(0,a.jsx)(x.rr,{children:H&&"Invoice: ".concat(H.id)})]}),H&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)(o.Zp,{children:[(0,a.jsx)(o.aR,{className:"pb-3",children:(0,a.jsx)(o.ZB,{className:"text-sm",children:"Transaction Info"})}),(0,a.jsxs)(o.Wu,{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Invoice ID:"}),(0,a.jsx)("span",{className:"font-medium",children:H.id})]}),(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Date:"}),(0,a.jsx)("span",{children:(0,P.GP)(new Date(H.timestamp),"MMM dd, yyyy hh:mm a")})]}),(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Payment:"}),(0,a.jsx)(m.E,{variant:"outline",children:H.paymentMethod.toUpperCase()})]}),H.storeName&&(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Store:"}),(0,a.jsx)("span",{children:H.storeName})]})]})]}),(0,a.jsxs)(o.Zp,{children:[(0,a.jsx)(o.aR,{className:"pb-3",children:(0,a.jsx)(o.ZB,{className:"text-sm",children:"Customer Info"})}),(0,a.jsx)(o.Wu,{className:"space-y-2",children:H.customerName?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Name:"}),(0,a.jsx)("span",{children:H.customerName})]}),H.customerPhone&&(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Phone:"}),(0,a.jsx)("span",{children:H.customerPhone})]}),H.customerEmail&&(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Email:"}),(0,a.jsx)("span",{children:H.customerEmail})]})]}):(0,a.jsx)("div",{className:"text-sm text-gray-500",children:"Walk-in Customer"})})]})]}),(0,a.jsxs)(o.Zp,{children:[(0,a.jsx)(o.aR,{className:"pb-3",children:(0,a.jsx)(o.ZB,{className:"text-sm",children:"Items Purchased"})}),(0,a.jsx)(o.Wu,{children:(0,a.jsx)("div",{className:"space-y-2",children:H.items.map((e,s)=>(0,a.jsxs)("div",{className:"flex justify-between items-center p-2 bg-gray-50 rounded",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("div",{className:"font-medium text-sm",children:e.productName}),(0,a.jsxs)("div",{className:"text-xs text-gray-600",children:["₹",e.price.toFixed(2)," \xd7 ",e.quantity]})]}),(0,a.jsxs)("div",{className:"font-medium",children:["₹",e.total.toFixed(2)]})]},s))})})]}),(0,a.jsxs)(o.Zp,{children:[(0,a.jsx)(o.aR,{className:"pb-3",children:(0,a.jsx)(o.ZB,{className:"text-sm",children:"Bill Summary"})}),(0,a.jsx)(o.Wu,{children:(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{children:"Subtotal:"}),(0,a.jsxs)("span",{children:["₹",H.subtotal.toFixed(2)]})]}),H.discountAmount>0&&(0,a.jsxs)("div",{className:"flex justify-between text-sm text-red-600",children:[(0,a.jsxs)("span",{children:["Discount ($",H.discountPercentage.toFixed(1),"%):"]}),(0,a.jsxs)("span",{children:["-₹",H.discountAmount.toFixed(2)]})]}),(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsxs)("span",{children:["Tax ($",H.taxPercentage,"%):"]}),(0,a.jsxs)("span",{children:["₹",H.taxAmount.toFixed(2)]})]}),(0,a.jsx)(p.w,{}),(0,a.jsxs)("div",{className:"flex justify-between font-bold",children:[(0,a.jsx)("span",{children:"Total:"}),(0,a.jsxs)("span",{children:["₹",H.total.toFixed(2)]})]})]})})]}),H.notes&&(0,a.jsxs)(o.Zp,{children:[(0,a.jsx)(o.aR,{className:"pb-3",children:(0,a.jsx)(o.ZB,{className:"text-sm",children:"Notes"})}),(0,a.jsx)(o.Wu,{children:(0,a.jsx)("p",{className:"text-sm text-gray-700",children:H.notes})})]})]}),(0,a.jsxs)(x.Es,{children:[(0,a.jsx)(r.$,{variant:"outline",onClick:()=>q(!1),children:"Close"}),H&&(0,a.jsxs)(r.$,{onClick:()=>ei(H),children:[(0,a.jsx)(T.A,{className:"h-4 w-4 mr-2"}),"Print Receipt"]})]})]})}),(0,a.jsx)(x.lG,{open:U,onOpenChange:V,children:(0,a.jsxs)(x.Cf,{children:[(0,a.jsxs)(x.c7,{children:[(0,a.jsx)(x.L3,{children:"Import Bills from JSON"}),(0,a.jsx)(x.rr,{children:"Upload a JSON file containing bill data to import into the system."})]}),(0,a.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,a.jsx)(c.p,{id:"jsonFile",type:"file",accept:".json",onChange:e=>{e.target.files&&e.target.files[0]&&Y(e.target.files[0])}}),X&&(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:["Selected file: ",X.name]})]}),(0,a.jsxs)(x.Es,{children:[(0,a.jsx)(r.$,{variant:"outline",onClick:()=>V(!1),children:"Cancel"}),(0,a.jsx)(r.$,{onClick:en,disabled:!X||K,children:K?"Importing...":"Import"})]})]})})]})})}},89715:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(71847).A)("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},96633:(e,s,t)=>{"use strict";t.d(s,{A0:()=>r,BF:()=>c,Gg:()=>d,Hj:()=>o,XI:()=>i,nA:()=>x,nd:()=>m});var a=t(95155),n=t(12115),l=t(25016);let i=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)("div",{className:"relative w-full overflow-auto",children:(0,a.jsx)("table",{ref:s,className:(0,l.cn)("w-full caption-bottom text-sm",t),...n})})});i.displayName="Table";let r=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)("thead",{ref:s,className:(0,l.cn)("[&_tr]:border-b",t),...n})});r.displayName="TableHeader";let c=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)("tbody",{ref:s,className:(0,l.cn)("[&_tr:last-child]:border-0",t),...n})});c.displayName="TableBody";let d=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)("tfoot",{ref:s,className:(0,l.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",t),...n})});d.displayName="TableFooter";let o=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)("tr",{ref:s,className:(0,l.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",t),...n})});o.displayName="TableRow";let m=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)("th",{ref:s,className:(0,l.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",t),...n})});m.displayName="TableHead";let x=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)("td",{ref:s,className:(0,l.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",t),...n})});x.displayName="TableCell",n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)("caption",{ref:s,className:(0,l.cn)("mt-4 text-sm text-muted-foreground",t),...n})}).displayName="TableCaption"}},e=>{e.O(0,[666,530,143,168,489,441,255,358],()=>e(e.s=88161)),_N_E=e.O()}]);