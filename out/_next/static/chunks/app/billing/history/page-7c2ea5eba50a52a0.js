(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6881],{46174:(e,s,t)=>{Promise.resolve().then(t.bind(t,85325))},85325:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>$});var a=t(95155),n=t(12115),l=t(20063),i=t(27702),r=t(97003),c=t(33789),d=t(90235),o=t(83209),m=t(67812),x=t(54679),h=t(47507),p=t(54664),u=t(71163),j=t(16485),f=t(25016),y=t(90368),g=t(27937),N=t(86494);function v(e){let{className:s,classNames:t,showOutsideDays:n=!0,onDayClick:l,...i}=e;return(0,a.jsx)(N.h,{showOutsideDays:n,className:(0,f.cn)("p-3",s),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:(0,f.cn)((0,r.r)({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:(0,f.cn)((0,r.r)({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground aria-selected:bg-accent/50 aria-selected:text-muted-foreground",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...t},components:{IconLeft:e=>(0,a.jsx)(y.A,{className:"h-4 w-4",...e}),IconRight:e=>(0,a.jsx)(g.A,{className:"h-4 w-4",...e})},...i,onDayClick:l})}v.displayName="Calendar";var b=t(31138);let w=b.bL,A=b.l9,C=n.forwardRef((e,s)=>{let{className:t,align:n="center",sideOffset:l=4,...i}=e;return(0,a.jsx)(b.ZL,{children:(0,a.jsx)(b.UC,{ref:s,align:n,sideOffset:l,className:(0,f.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...i})})});function S(e){let{className:s,date:t,setDate:n}=e;return(0,a.jsx)("div",{className:(0,f.cn)("grid gap-2",s),children:(0,a.jsxs)(w,{children:[(0,a.jsx)(A,{asChild:!0,children:(0,a.jsxs)(r.$,{id:"date",variant:"outline",className:(0,f.cn)("w-[300px] justify-start text-left font-normal",!t&&"text-muted-foreground"),children:[(0,a.jsx)(j.A,{className:"mr-2 h-4 w-4"}),(null==t?void 0:t.from)?t.to?(0,a.jsxs)(a.Fragment,{children:[(0,u.GP)(t.from,"LLL dd, y")," - ",(0,u.GP)(t.to,"LLL dd, y")]}):(0,u.GP)(t.from,"LLL dd, y"):(0,a.jsx)("span",{children:"Pick a date range"})]})}),(0,a.jsx)(C,{className:"w-auto p-0",align:"start",children:(0,a.jsx)(v,{initialFocus:!0,mode:"range",defaultMonth:null==t?void 0:t.from,selected:t,onSelect:n,numberOfMonths:2})})]})})}C.displayName=b.UC.displayName;var T=t(96633),P=t(54485),D=t(91761),E=t(53409),F=t(60952),R=t(1524),I=t(63581),k=t(86651),L=t(39867),_=t(21786),Z=t(89715),M=t(57828),O=t(309),B=t(71360);async function z(e){await W(e)}async function W(e){try{let s=window.open("","_blank");if(!s)throw Error("Failed to open print window.");s.document.write("\n      <!DOCTYPE html>\n      <html>\n      <head>\n        <title>Print Document</title>\n        <style>\n          body { margin: 0; padding: 0px; font-family: Arial, sans-serif; }\n          @media print { body { margin: 0; } }\n        </style>\n      </head>\n      <body>".concat(e,"</body>\n      </html>\n    ")),s.document.close(),s.onload=()=>{s.focus(),setTimeout(()=>{s.print(),s.close()},100)},console.log("Browser print triggered.")}catch(e){console.error("Browser printing failed:",e)}}function $(){let e=(0,l.useRouter)(),[s,t]=(0,n.useState)([]),[j,f]=(0,n.useState)([]),[y,g]=(0,n.useState)(null),[N,v]=(0,n.useState)(""),[b,w]=(0,n.useState)("all"),[A,C]=(0,n.useState)(),[W,$]=(0,n.useState)(null),[G,J]=(0,n.useState)(!1),[H,U]=(0,n.useState)(!1),[q,V]=(0,n.useState)(!1),[Y,X]=(0,n.useState)(null),[K,Q]=(0,n.useState)(!1),[ee,es]=(0,n.useState)({gstin:"27AAFCV2449G1Z7",taxPercentage:18,companyName:"SIRI ART JEWELLERY",companyAddress:"123 Jewelry Street, Diamond District, Mumbai, Maharashtra 400001",companyPhone:"+91 98765 43210",companyEmail:"info@siriartjewellery.com"});(0,n.useEffect)(()=>{let s=localStorage.getItem("adminUser");if(!s)return void e.push("/");g(JSON.parse(s)),fetch("http://127.0.0.1:8080/api/settings").then(e=>e.json()).then(e=>{e.systemSettings&&es(e.systemSettings)}),et()},[e]),(0,n.useEffect)(()=>{ea()},[s,N,b,A]);let et=async()=>{try{let e=await fetch("http://127.0.0.1:8080/api/bills");if(e.ok){let s=(await e.json()).sort((e,s)=>new Date(s.timestamp).getTime()-new Date(e.timestamp).getTime());t(s)}}catch(e){console.error("Failed to load sales:",e)}},ea=()=>{let e=[...s];N&&(e=e.filter(e=>{var s,t;return e.id.toLowerCase().includes(N.toLowerCase())||(null==(s=e.customerName)?void 0:s.toLowerCase().includes(N.toLowerCase()))||(null==(t=e.customerPhone)?void 0:t.includes(N))||e.items.some(e=>e.productName.toLowerCase().includes(N.toLowerCase()))})),"all"!==b&&(e=e.filter(e=>e.paymentMethod===b)),(null==A?void 0:A.from)&&(e=e.filter(e=>{let s=new Date(e.timestamp),t=new Date(A.from),a=A.to?new Date(A.to):new Date;return t.setHours(0,0,0,0),a.setHours(23,59,59,999),s>=t&&s<=a})),f(e)},en=async()=>{if(!Y)return void console.error("No file selected for import.");Q(!0);try{let e=await Y.text(),s=JSON.parse(e),t=!0;for(let e of s){let s=await fetch("http://127.0.0.1:8080/api/bills",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});s.ok||(t=!1,console.error("Failed to import bill ".concat(e.id,":"),s.statusText))}t?(console.log("Bills imported successfully!"),et(),V(!1),X(null)):console.error("Some bills failed to import.")}catch(e){console.error("Error importing bills:",e)}finally{Q(!1)}},el=async()=>{if(W)try{(await fetch("http://127.0.0.1:8080"+"/api/bills/".concat(W.id),{method:"DELETE"})).ok?(et(),U(!1),$(null)):console.error("Failed to delete sale")}catch(e){console.error("Error deleting sale:",e)}},ei=async e=>{let s="\n      <!DOCTYPE html>\n      <html>\n        <head>\n          <title>Receipt - ".concat(e.id,'</title>\n          <style>\n            body { font-family: monospace; max-width: 300px; margin: 0 auto; padding: 20px; }\n            .header { text-align: center; margin-bottom: 20px; }\n            .company-name { font-weight: bold; font-size: 16px; }\n            .store-info { font-size: 12px; margin-top: 5px; }\n            .receipt-id { margin: 10px 0; font-size: 12px; }\n            .customer-info { margin: 10px 0; font-size: 12px; border-top: 1px dashed #000; padding-top: 10px; }\n            .items { margin: 20px 0; }\n            .item { display: flex; justify-content: space-between; margin: 5px 0; font-size: 12px; }\n            .totals { border-top: 1px dashed #000; padding-top: 10px; margin-top: 10px; }\n            .total-line { display: flex; justify-content: space-between; margin: 3px 0; font-size: 12px; }\n            .final-total { font-weight: bold; border-top: 1px solid #000; padding-top: 5px; }\n            .footer { text-align: center; margin-top: 20px; font-size: 10px; }\n            .gstin { font-size: 10px; margin-top: 5px; }\n          </style>\n        </head>\n        <body>\n          <div class="header">\n            <div class="company-name">').concat(ee.companyName,'</div>\n            <div class="store-info">').concat(e.storeName,'</div>\n            <div class="store-info">').concat(e.storeAddress,'</div>\n            <div class="gstin">GSTIN: ').concat(ee.gstin,'</div>\n            <div class="receipt-id">Invoice: ').concat(e.id,'</div>\n            <div class="receipt-id">Date: ').concat(new Date(e.timestamp).toLocaleString(),'</div>\n            <div class="receipt-id">Reprint: ').concat(new Date().toLocaleString(),"</div>\n          </div>\n          \n          ").concat(e.customerName||e.customerPhone?'\n          <div class="customer-info">\n            <strong>Customer Details:</strong><br>\n            '.concat(e.customerName?"Name: ".concat(e.customerName,"<br>"):"","\n            ").concat(e.customerPhone?"Phone: ".concat(e.customerPhone,"<br>"):"","\n            ").concat(e.customerEmail?"Email: ".concat(e.customerEmail,"<br>"):"","\n            ").concat(e.customerAddress?"Address: ".concat(e.customerAddress,"<br>"):"","\n          </div>\n          "):"",'\n          \n          <div class="items">\n            ').concat(e.items.map(e=>'\n              <div class="item">\n                <span>'.concat(e.productName," x").concat(e.quantity,"</span>\n                <span>₹").concat(e.total.toFixed(2),"</span>\n              </div>\n            ")).join(""),'\n          </div>\n          \n          <div class="totals">\n            <div class="total-line">\n              <span>Subtotal:</span>\n              <span>₹').concat(e.subtotal.toFixed(2),"</span>\n            </div>\n            ").concat(e.discountAmount>0?'\n            <div class="total-line">\n              <span>Discount ('.concat(e.discountPercentage.toFixed(1),"%):</span>\n              <span>-₹").concat(e.discountAmount.toFixed(2),"</span>\n            </div>\n            "):"",'\n            <div class="total-line">\n              <span>Tax (').concat(e.taxPercentage,"%):</span>\n              <span>₹").concat(e.taxAmount.toFixed(2),'</span>\n            </div>\n            <div class="total-line final-total">\n              <span>TOTAL:</span>\n              <span>₹').concat(e.total.toFixed(2),'</span>\n            </div>\n            <div class="total-line">\n              <span>Payment:</span>\n              <span>').concat(e.paymentMethod.toUpperCase(),"</span>\n            </div>\n          </div>\n          \n          ").concat(e.notes?'\n          <div class="customer-info">\n            <strong>Notes:</strong><br>\n            '.concat(e.notes,"\n          </div>\n          "):"",'\n          \n          <div class="footer">\n            <p>Thank you for your business!</p>\n            <p>Visit us again</p>\n            <p>').concat(ee.companyPhone,"</p>\n            <p>").concat(ee.companyEmail,"</p>\n          </div>\n        </body>\n      </html>\n    ");await z(s)},er=(()=>{let e=j.reduce((e,s)=>e+s.total,0),s=j.length,t=j.reduce((e,s)=>e+s.items.reduce((e,s)=>e+s.quantity,0),0);return{totalSales:e,totalTransactions:s,totalItems:t,uniqueCustomers:new Set(j.filter(e=>e.customerPhone).map(e=>e.customerPhone)).size,avgTransactionValue:s>0?e/s:0}})();return(0,a.jsx)(i.A,{children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)(o.Zp,{className:"bg-gradient-to-r from-purple-600 to-purple-700 text-white",children:(0,a.jsx)(o.Wu,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h1",{className:"text-2xl font-bold flex items-center",children:[(0,a.jsx)(P.A,{className:"h-6 w-6 mr-3"}),"Billing History"]}),(0,a.jsx)("p",{className:"text-purple-100 mt-1",children:"View and manage transaction history"})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("div",{className:"text-3xl font-bold",children:["₹",er.totalSales.toFixed(2)]}),(0,a.jsx)("div",{className:"text-purple-100",children:"Total Sales"}),(0,a.jsxs)("div",{className:"text-sm text-purple-200 mt-1",children:[er.totalTransactions," Transactions"]})]})]})})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,a.jsx)(o.Zp,{children:(0,a.jsx)(o.Wu,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Revenue"}),(0,a.jsxs)("p",{className:"text-2xl font-bold text-green-600",children:["₹",er.totalSales.toFixed(2)]})]}),(0,a.jsx)(D.A,{className:"h-8 w-8 text-green-600"})]})})}),(0,a.jsx)(o.Zp,{children:(0,a.jsx)(o.Wu,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Transactions"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-blue-600",children:er.totalTransactions})]}),(0,a.jsx)(E.A,{className:"h-8 w-8 text-blue-600"})]})})}),(0,a.jsx)(o.Zp,{children:(0,a.jsx)(o.Wu,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Items Sold"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-orange-600",children:er.totalItems})]}),(0,a.jsx)(F.A,{className:"h-8 w-8 text-orange-600"})]})})}),(0,a.jsx)(o.Zp,{children:(0,a.jsx)(o.Wu,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Avg. Transaction"}),(0,a.jsxs)("p",{className:"text-2xl font-bold text-purple-600",children:["₹",er.avgTransactionValue.toFixed(2)]})]}),(0,a.jsx)(R.A,{className:"h-8 w-8 text-purple-600"})]})})})]}),(0,a.jsxs)(o.Zp,{children:[(0,a.jsx)(o.aR,{children:(0,a.jsxs)(o.ZB,{className:"flex items-center",children:[(0,a.jsx)(I.A,{className:"h-5 w-5 mr-2"}),"Filters & Search"]})}),(0,a.jsx)(o.Wu,{children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(d.J,{htmlFor:"search",className:"text-sm font-medium",children:"Search"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(k.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,a.jsx)(c.p,{id:"search",placeholder:"Invoice ID, customer, product...",value:N,onChange:e=>v(e.target.value),className:"pl-10"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(d.J,{className:"text-sm font-medium",children:"Payment Method"}),(0,a.jsxs)(h.l6,{value:b,onValueChange:w,children:[(0,a.jsx)(h.bq,{children:(0,a.jsx)(h.yv,{placeholder:"All methods"})}),(0,a.jsxs)(h.gC,{children:[(0,a.jsx)(h.eb,{value:"all",children:"All Methods"}),(0,a.jsx)(h.eb,{value:"cash",children:"Cash"}),(0,a.jsx)(h.eb,{value:"card",children:"Card"}),(0,a.jsx)(h.eb,{value:"upi",children:"UPI"})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(d.J,{className:"text-sm font-medium",children:"Date Range"}),(0,a.jsx)(S,{date:A,setDate:C})]}),(0,a.jsxs)("div",{className:"flex items-end space-x-2",children:[(0,a.jsxs)(r.$,{onClick:()=>{let e="data:application/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(j,null,2)),s="billing-history-".concat((0,u.GP)(new Date,"yyyy-MM-dd"),".json"),t=document.createElement("a");t.setAttribute("href",e),t.setAttribute("download",s),t.click()},variant:"outline",className:"w-full bg-transparent",children:[(0,a.jsx)(L.A,{className:"h-4 w-4 mr-2"}),"Export JSON"]}),(0,a.jsxs)(r.$,{onClick:()=>V(!0),className:"w-full",children:[(0,a.jsx)(_.A,{className:"h-4 w-4 mr-2"}),"Import JSON"]})]})]})})]}),(0,a.jsxs)(o.Zp,{children:[(0,a.jsx)(o.aR,{children:(0,a.jsxs)(o.ZB,{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(Z.A,{className:"h-5 w-5 mr-2"}),"Transaction History (",j.length,")"]}),j.length>0&&(0,a.jsxs)(m.E,{variant:"secondary",children:[j.length," results"]})]})}),(0,a.jsx)(o.Wu,{children:(0,a.jsxs)("div",{className:"overflow-x-auto",children:[(0,a.jsxs)(T.XI,{children:[(0,a.jsx)(T.A0,{children:(0,a.jsxs)(T.Hj,{children:[(0,a.jsx)(T.nd,{children:"Invoice ID"}),(0,a.jsx)(T.nd,{children:"Date & Time"}),(0,a.jsx)(T.nd,{children:"Customer"}),(0,a.jsx)(T.nd,{children:"Items"}),(0,a.jsx)(T.nd,{children:"Payment"}),(0,a.jsx)(T.nd,{className:"text-right",children:"Total"}),(0,a.jsx)(T.nd,{className:"text-center",children:"Actions"})]})}),(0,a.jsx)(T.BF,{children:j.map(e=>(0,a.jsxs)(T.Hj,{className:"hover:bg-gray-50",children:[(0,a.jsx)(T.nA,{className:"font-medium",children:(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("span",{children:e.id}),e.storeName&&(0,a.jsx)("span",{className:"text-xs text-gray-500",children:e.storeName})]})}),(0,a.jsx)(T.nA,{children:(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("span",{children:(0,u.GP)(new Date(e.timestamp),"MMM dd, yyyy")}),(0,a.jsx)("span",{className:"text-xs text-gray-500",children:(0,u.GP)(new Date(e.timestamp),"hh:mm a")})]})}),(0,a.jsx)(T.nA,{children:(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("span",{children:e.customerName||"Walk-in"}),e.customerPhone&&(0,a.jsx)("span",{className:"text-xs text-gray-500",children:e.customerPhone})]})}),(0,a.jsx)(T.nA,{children:(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsxs)("span",{children:[e.items.length," items"]}),(0,a.jsxs)("span",{className:"text-xs text-gray-500",children:[e.items.reduce((e,s)=>e+s.quantity,0)," qty"]})]})}),(0,a.jsx)(T.nA,{children:(0,a.jsx)(m.E,{variant:"cash"===e.paymentMethod?"default":"card"===e.paymentMethod?"secondary":"outline",children:e.paymentMethod.toUpperCase()})}),(0,a.jsx)(T.nA,{className:"text-right font-medium",children:(0,a.jsxs)("div",{className:"flex flex-col items-end",children:[(0,a.jsxs)("span",{children:["₹",e.total.toFixed(2)]}),e.discountAmount>0&&(0,a.jsxs)("span",{className:"text-xs text-green-600",children:["-",e.discountPercentage.toFixed(1),"% off"]})]})}),(0,a.jsx)(T.nA,{children:(0,a.jsxs)("div",{className:"flex items-center justify-center space-x-1",children:[(0,a.jsx)(r.$,{variant:"ghost",size:"sm",onClick:()=>{$(e),J(!0)},title:"View Details",children:(0,a.jsx)(M.A,{className:"h-4 w-4"})}),(0,a.jsx)(r.$,{variant:"ghost",size:"sm",onClick:()=>ei(e),title:"Print Receipt",children:(0,a.jsx)(O.A,{className:"h-4 w-4"})}),(0,a.jsx)(r.$,{variant:"ghost",size:"sm",onClick:()=>{$(e),U(!0)},title:"Delete Bill",className:"text-red-500 hover:text-red-700",children:(0,a.jsx)(B.A,{className:"h-4 w-4"})})]})})]},e.id))})]}),0===j.length&&(0,a.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,a.jsx)(P.A,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),(0,a.jsx)("p",{children:"No transactions found"}),(0,a.jsx)("p",{className:"text-sm",children:"Try adjusting your filters"})]})]})})]}),(0,a.jsx)(x.lG,{open:H,onOpenChange:U,children:(0,a.jsxs)(x.Cf,{children:[(0,a.jsxs)(x.c7,{children:[(0,a.jsx)(x.L3,{children:"Are you sure?"}),(0,a.jsxs)(x.rr,{children:["This action cannot be undone. This will permanently delete the bill (",null==W?void 0:W.id,") from the system."]})]}),(0,a.jsxs)(x.Es,{children:[(0,a.jsx)(r.$,{variant:"outline",onClick:()=>U(!1),children:"Cancel"}),(0,a.jsx)(r.$,{variant:"destructive",onClick:el,children:"Delete"})]})]})}),(0,a.jsx)(x.lG,{open:G,onOpenChange:J,children:(0,a.jsxs)(x.Cf,{className:"sm:max-w-2xl max-h-[80vh] overflow-y-auto",children:[(0,a.jsxs)(x.c7,{children:[(0,a.jsxs)(x.L3,{className:"flex items-center",children:[(0,a.jsx)(E.A,{className:"h-5 w-5 mr-2"}),"Transaction Details"]}),(0,a.jsx)(x.rr,{children:W&&"Invoice: ".concat(W.id)})]}),W&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)(o.Zp,{children:[(0,a.jsx)(o.aR,{className:"pb-3",children:(0,a.jsx)(o.ZB,{className:"text-sm",children:"Transaction Info"})}),(0,a.jsxs)(o.Wu,{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Invoice ID:"}),(0,a.jsx)("span",{className:"font-medium",children:W.id})]}),(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Date:"}),(0,a.jsx)("span",{children:(0,u.GP)(new Date(W.timestamp),"MMM dd, yyyy hh:mm a")})]}),(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Payment:"}),(0,a.jsx)(m.E,{variant:"outline",children:W.paymentMethod.toUpperCase()})]}),W.storeName&&(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Store:"}),(0,a.jsx)("span",{children:W.storeName})]})]})]}),(0,a.jsxs)(o.Zp,{children:[(0,a.jsx)(o.aR,{className:"pb-3",children:(0,a.jsx)(o.ZB,{className:"text-sm",children:"Customer Info"})}),(0,a.jsx)(o.Wu,{className:"space-y-2",children:W.customerName?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Name:"}),(0,a.jsx)("span",{children:W.customerName})]}),W.customerPhone&&(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Phone:"}),(0,a.jsx)("span",{children:W.customerPhone})]}),W.customerEmail&&(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Email:"}),(0,a.jsx)("span",{children:W.customerEmail})]})]}):(0,a.jsx)("div",{className:"text-sm text-gray-500",children:"Walk-in Customer"})})]})]}),(0,a.jsxs)(o.Zp,{children:[(0,a.jsx)(o.aR,{className:"pb-3",children:(0,a.jsx)(o.ZB,{className:"text-sm",children:"Items Purchased"})}),(0,a.jsx)(o.Wu,{children:(0,a.jsx)("div",{className:"space-y-2",children:W.items.map((e,s)=>(0,a.jsxs)("div",{className:"flex justify-between items-center p-2 bg-gray-50 rounded",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("div",{className:"font-medium text-sm",children:e.productName}),(0,a.jsxs)("div",{className:"text-xs text-gray-600",children:["₹",e.price.toFixed(2)," \xd7 ",e.quantity]})]}),(0,a.jsxs)("div",{className:"font-medium",children:["₹",e.total.toFixed(2)]})]},s))})})]}),(0,a.jsxs)(o.Zp,{children:[(0,a.jsx)(o.aR,{className:"pb-3",children:(0,a.jsx)(o.ZB,{className:"text-sm",children:"Bill Summary"})}),(0,a.jsx)(o.Wu,{children:(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{children:"Subtotal:"}),(0,a.jsxs)("span",{children:["₹",W.subtotal.toFixed(2)]})]}),W.discountAmount>0&&(0,a.jsxs)("div",{className:"flex justify-between text-sm text-red-600",children:[(0,a.jsxs)("span",{children:["Discount ($",W.discountPercentage.toFixed(1),"%):"]}),(0,a.jsxs)("span",{children:["-₹",W.discountAmount.toFixed(2)]})]}),(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsxs)("span",{children:["Tax ($",W.taxPercentage,"%):"]}),(0,a.jsxs)("span",{children:["₹",W.taxAmount.toFixed(2)]})]}),(0,a.jsx)(p.w,{}),(0,a.jsxs)("div",{className:"flex justify-between font-bold",children:[(0,a.jsx)("span",{children:"Total:"}),(0,a.jsxs)("span",{children:["₹",W.total.toFixed(2)]})]})]})})]}),W.notes&&(0,a.jsxs)(o.Zp,{children:[(0,a.jsx)(o.aR,{className:"pb-3",children:(0,a.jsx)(o.ZB,{className:"text-sm",children:"Notes"})}),(0,a.jsx)(o.Wu,{children:(0,a.jsx)("p",{className:"text-sm text-gray-700",children:W.notes})})]})]}),(0,a.jsxs)(x.Es,{children:[(0,a.jsx)(r.$,{variant:"outline",onClick:()=>J(!1),children:"Close"}),W&&(0,a.jsxs)(r.$,{onClick:()=>ei(W),children:[(0,a.jsx)(O.A,{className:"h-4 w-4 mr-2"}),"Print Receipt"]})]})]})}),(0,a.jsx)(x.lG,{open:q,onOpenChange:V,children:(0,a.jsxs)(x.Cf,{children:[(0,a.jsxs)(x.c7,{children:[(0,a.jsx)(x.L3,{children:"Import Bills from JSON"}),(0,a.jsx)(x.rr,{children:"Upload a JSON file containing bill data to import into the system."})]}),(0,a.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,a.jsx)(c.p,{id:"jsonFile",type:"file",accept:".json",onChange:e=>{e.target.files&&e.target.files[0]&&X(e.target.files[0])}}),Y&&(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:["Selected file: ",Y.name]})]}),(0,a.jsxs)(x.Es,{children:[(0,a.jsx)(r.$,{variant:"outline",onClick:()=>V(!1),children:"Cancel"}),(0,a.jsx)(r.$,{onClick:en,disabled:!Y||K,children:K?"Importing...":"Import"})]})]})})]})})}},96633:(e,s,t)=>{"use strict";t.d(s,{A0:()=>r,BF:()=>c,Gg:()=>d,Hj:()=>o,XI:()=>i,nA:()=>x,nd:()=>m});var a=t(95155),n=t(12115),l=t(25016);let i=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)("div",{className:"relative w-full overflow-auto",children:(0,a.jsx)("table",{ref:s,className:(0,l.cn)("w-full caption-bottom text-sm",t),...n})})});i.displayName="Table";let r=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)("thead",{ref:s,className:(0,l.cn)("[&_tr]:border-b",t),...n})});r.displayName="TableHeader";let c=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)("tbody",{ref:s,className:(0,l.cn)("[&_tr:last-child]:border-0",t),...n})});c.displayName="TableBody";let d=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)("tfoot",{ref:s,className:(0,l.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",t),...n})});d.displayName="TableFooter";let o=n.forwardRef((e,s)=>{let{className:t,children:n,...i}=e;return(0,a.jsx)("tr",{ref:s,className:(0,l.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",t),...i,children:n})});o.displayName="TableRow";let m=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)("th",{ref:s,className:(0,l.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",t),...n})});m.displayName="TableHead";let x=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)("td",{ref:s,className:(0,l.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",t),...n})});x.displayName="TableCell",n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)("caption",{ref:s,className:(0,l.cn)("mt-4 text-sm text-muted-foreground",t),...n})}).displayName="TableCaption"}},e=>{e.O(0,[3194,6445,9553,7150,7704,6899,8441,1255,7358],()=>e(e.s=46174)),_N_E=e.O()}]);