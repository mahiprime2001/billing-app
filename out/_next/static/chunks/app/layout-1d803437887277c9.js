(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{7787:(e,t,n)=>{Promise.resolve().then(n.bind(n,45185)),Promise.resolve().then(n.bind(n,62217)),Promise.resolve().then(n.bind(n,50085)),Promise.resolve().then(n.bind(n,18211)),Promise.resolve().then(n.t.bind(n,95003,23)),Promise.resolve().then(n.t.bind(n,41290,23))},18211:(e,t,n)=>{"use strict";n.d(t,{default:()=>h});var a=n(95155),s=n(12115),i=n(68267);class l extends i.FW{constructor(e){super(e.rid),this.available=!0,this.currentVersion=e.currentVersion,this.version=e.version,this.date=e.date,this.body=e.body,this.rawJson=e.rawJson}async download(e,t){o(t);let n=new i.c3;e&&(n.onmessage=e);let a=await (0,i.lA)("plugin:updater|download",{onEvent:n,rid:this.rid,...t});this.downloadedBytes=new i.FW(a)}async install(){if(!this.downloadedBytes)throw Error("Update.install called before Update.download");await (0,i.lA)("plugin:updater|install",{updateRid:this.rid,bytesRid:this.downloadedBytes.rid}),this.downloadedBytes=void 0}async downloadAndInstall(e,t){o(t);let n=new i.c3;e&&(n.onmessage=e),await (0,i.lA)("plugin:updater|download_and_install",{onEvent:n,rid:this.rid,...t})}async close(){await this.downloadedBytes?.close(),await super.close()}}async function r(e){o(e);let t=await (0,i.lA)("plugin:updater|check",{...e});return t?new l(t):null}function o(e){e?.headers&&(e.headers=Array.from(new Headers(e.headers).entries()))}async function d(e,t){let n="string"==typeof t?{title:t}:t;return(0,i.lA)("plugin:dialog|message",{message:e.toString(),title:n?.title?.toString(),kind:n?.kind,okButtonLabel:n?.okLabel?.toString(),buttons:function(e){if(void 0!==e){if("string"==typeof e)return e;else if("ok"in e&&"cancel"in e)return{OkCancelCustom:[e.ok,e.cancel]};else if("yes"in e&&"no"in e&&"cancel"in e)return{YesNoCancelCustom:[e.yes,e.no,e.cancel]};else if("ok"in e)return{OkCustom:e.ok}}}(n?.buttons)})}async function c(e,t){let n="string"==typeof t?{title:t}:t;return await (0,i.lA)("plugin:dialog|ask",{message:e.toString(),title:n?.title?.toString(),kind:n?.kind,yesButtonLabel:n?.okLabel?.toString(),noButtonLabel:n?.cancelLabel?.toString()})}async function u(){await (0,i.lA)("plugin:process|restart")}function h(){let e=(0,s.useRef)(null),[t,n]=(0,s.useState)(!1),[i,l]=(0,s.useState)(!1),[o,h]=(0,s.useState)(0),[f,w]=(0,s.useState)(null);async function m(){try{let t=await r();if(!t||!t.available)return void console.log("No updates available.");e.current=t,n(!0),w({version:t.version,notes:t.body||"No release notes available."}),p()}catch(e){console.error("Failed to check for updates:",e)}}async function p(){if(t&&e.current)try{await c("A new version ".concat(null==f?void 0:f.version," is available!\n\nRelease notes:\n").concat(null==f?void 0:f.notes,"\n\nWould you like to install it now? (App will restart after update)"),{title:"Update Available!",kind:"info",okLabel:"Install Update",cancelLabel:"Later"})&&!i?await v():n(!1)}catch(e){console.error("Prompt failed:",e)}}async function v(){if(e.current)try{l(!0),h(0),await e.current.downloadAndInstall(e=>{switch(e.event){case"Started":console.log("Download started"),h(0);break;case"Progress":let t=e.data;if(t.contentLength){let e=Math.round(t.chunkLength/t.contentLength*100);h(e),console.log("Download progress: ".concat(e,"%"))}break;case"Finished":console.log("Download finished, installing..."),h(100)}}),await d("Update installed successfully! The app will now restart.",{title:"Update Complete",kind:"info",okLabel:"Restart Now"}),await u()}catch(e){console.error("Update installation failed:",e),await d("Update download failed. Please try again later.",{kind:"error",title:"Update Failed"}),l(!1),h(0)}}return((0,s.useEffect)(()=>{m()},[]),i)?(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 max-w-md w-full mx-4",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-4 text-gray-900 dark:text-white",children:"Downloading Update..."}),(0,a.jsx)("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-4 mb-4",children:(0,a.jsx)("div",{className:"bg-blue-600 h-4 rounded-full transition-all duration-300",style:{width:"".concat(o,"%")}})}),(0,a.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[o,"% complete"]}),(0,a.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-2",children:"Please don't close the application"})]})})}):t&&f?(0,a.jsx)("div",{className:"fixed bottom-4 right-4 bg-gradient-to-r from-blue-600 to-blue-700 text-white p-4 rounded-lg shadow-2xl max-w-sm z-50 animate-slide-in",children:(0,a.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("svg",{className:"w-6 h-6 text-yellow-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),(0,a.jsx)("p",{className:"font-semibold text-lg",children:"Update Available!"})]}),(0,a.jsx)("button",{onClick:()=>n(!1),className:"text-white hover:text-gray-200 transition-colors","aria-label":"Close",children:(0,a.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{className:"text-sm font-medium",children:["Version ",f.version]}),(0,a.jsx)("p",{className:"text-xs text-blue-100 mt-1 line-clamp-2",children:f.notes})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("button",{onClick:v,disabled:i,className:"bg-white text-blue-600 px-4 py-2 rounded-md hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed flex-1 font-medium transition-colors text-sm",children:"Install Now"}),(0,a.jsx)("button",{onClick:()=>n(!1),className:"bg-transparent border border-white px-4 py-2 rounded-md hover:bg-blue-800 transition-colors text-sm font-medium",children:"Later"})]})]})}):null}},20063:(e,t,n)=>{"use strict";var a=n(47260);n.o(a,"usePathname")&&n.d(t,{usePathname:function(){return a.usePathname}}),n.o(a,"useRouter")&&n.d(t,{useRouter:function(){return a.useRouter}})},41290:()=>{},45185:(e,t,n)=>{"use strict";n.d(t,{default:()=>i});var a=n(12115),s=n(20063);let i=e=>{let t,{timeoutInMinutes:n=120}=e;(0,s.useRouter)();let i=(0,a.useCallback)(()=>{window.location.href="/"},[]),l=(0,a.useCallback)(()=>{clearTimeout(t),t=setTimeout(i,60*n*1e3)},[i,n]);return(0,a.useEffect)(()=>{let e=["mousemove","keydown","click","scroll"],n=()=>l();return e.forEach(e=>window.addEventListener(e,n)),l(),()=>{clearTimeout(t),e.forEach(e=>window.removeEventListener(e,n))}},[l]),null}},50085:(e,t,n)=>{"use strict";n.d(t,{default:()=>i});var a=n(95155),s=n(12115);function i(e){let{children:t}=e,[i,l]=(0,s.useState)(null);return((0,s.useEffect)(()=>{let e;return(async()=>{if(window.__TAURI__){let{listen:t}=await n.e(380).then(n.bind(n,13380)),a=t("server-error",e=>{l(e.payload)});e=await a}})(),()=>{null==e||e()}},[]),i)?(0,a.jsxs)("div",{style:{color:"red",display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:["Error: ",i]}):(0,a.jsx)(a.Fragment,{children:t})}},62217:(e,t,n)=>{"use strict";n.d(t,{default:()=>i});var a=n(95155),s=n(12115);function i(){let[e,t]=(0,s.useState)(!0);return((0,s.useEffect)(()=>{let e=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",e),window.addEventListener("offline",n),void 0!==navigator.onLine&&t(navigator.onLine),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",n)}},[]),e)?null:(0,a.jsx)("div",{className:"bg-yellow-500 text-white text-center p-2",children:"You are currently offline. Some features may not be available."})}},68267:(e,t,n)=>{"use strict";var a,s,i,l,r;function o(e,t,n,a){if("a"===n&&!a)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!a:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?a:"a"===n?a.call(e):a?a.value:t.get(e)}function d(e,t,n,a,s){if("m"===a)throw TypeError("Private method is not writable");if("a"===a&&!s)throw TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===a?s.call(e,n):s?s.value=n:t.set(e,n),n}n.d(t,{c3:()=>h,FW:()=>w,lA:()=>f,yw:()=>u}),"function"==typeof SuppressedError&&SuppressedError;let c="__TAURI_TO_IPC_KEY__";function u(e,t=!1){return window.__TAURI_INTERNALS__.transformCallback(e,t)}class h{constructor(e){a.set(this,void 0),s.set(this,0),i.set(this,[]),l.set(this,void 0),d(this,a,e||(()=>{}),"f"),this.id=u(e=>{let t=e.index;if("end"in e)return void(t==o(this,s,"f")?this.cleanupCallback():d(this,l,t,"f"));let n=e.message;if(t==o(this,s,"f")){for(o(this,a,"f").call(this,n),d(this,s,o(this,s,"f")+1,"f");o(this,s,"f")in o(this,i,"f");){let e=o(this,i,"f")[o(this,s,"f")];o(this,a,"f").call(this,e),delete o(this,i,"f")[o(this,s,"f")],d(this,s,o(this,s,"f")+1,"f")}o(this,s,"f")===o(this,l,"f")&&this.cleanupCallback()}else o(this,i,"f")[t]=n})}cleanupCallback(){window.__TAURI_INTERNALS__.unregisterCallback(this.id)}set onmessage(e){d(this,a,e,"f")}get onmessage(){return o(this,a,"f")}[(a=new WeakMap,s=new WeakMap,i=new WeakMap,l=new WeakMap,c)](){return`__CHANNEL__:${this.id}`}toJSON(){return this[c]()}}async function f(e,t={},n){return window.__TAURI_INTERNALS__.invoke(e,t,n)}class w{get rid(){return o(this,r,"f")}constructor(e){r.set(this,void 0),d(this,r,e,"f")}async close(){return f("plugin:resources|close",{rid:this.rid})}}r=new WeakMap},95003:e=>{e.exports={style:{fontFamily:"'Inter', 'Inter Fallback'",fontStyle:"normal"},className:"__className_f367f3"}}},e=>{e.O(0,[761,441,255,358],()=>e(e.s=7787)),_N_E=e.O()}]);